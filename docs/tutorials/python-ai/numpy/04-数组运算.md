---
title: 数组运算
---

# 数组运算

> 掌握NumPy的向量化运算

## 📚 学习目标

- 掌握数组的算术运算
- 理解通用函数（ufunc）
- 掌握数组的聚合操作
- 学会使用数学函数

## 1. 算术运算

```python
import numpy as np

a = np.array([1, 2, 3, 4])
b = np.array([10, 20, 30, 40])

# 加法
print(a + b)  # [11 22 33 44]

# 减法
print(b - a)  # [ 9 18 27 36]

# 乘法（逐元素）
print(a * b)  # [ 10  40  90 160]

# 除法
print(b / a)  # [10. 10. 10. 10.]

# 整除
print(b // a)  # [10 10 10 10]

# 幂运算
print(a ** 2)  # [ 1  4  9 16]

# 取余
print(b % a)  # [0 0 0 0]
```

## 2. 比较运算

```python
a = np.array([1, 2, 3, 4, 5])
b = np.array([5, 4, 3, 2, 1])

print(a > b)   # [False False False  True  True]
print(a == 3)  # [False False  True False False]
print(a >= b)  # [False False  True  True  True]

# 数组比较
print(np.array_equal(a, b))  # False
```

## 3. 通用函数（ufunc）

```python
arr = np.array([1, 2, 3, 4, 5])

# 三角函数
print(np.sin(arr))
print(np.cos(arr))
print(np.tan(arr))

# 指数和对数
print(np.exp(arr))    # e^x
print(np.log(arr))    # ln(x)
print(np.log10(arr))  # log10(x)
print(np.log2(arr))   # log2(x)

# 开方
print(np.sqrt(arr))   # 平方根
print(np.cbrt(arr))   # 立方根

# 绝对值
arr_neg = np.array([-1, -2, 3, -4])
print(np.abs(arr_neg))  # [1 2 3 4]

# 取整
arr_float = np.array([1.2, 2.7, 3.5, 4.9])
print(np.floor(arr_float))  # [1. 2. 3. 4.]
print(np.ceil(arr_float))   # [2. 3. 4. 5.]
print(np.round(arr_float))  # [1. 3. 4. 5.]
```

## 4. 聚合操作

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])

# 求和
print(np.sum(arr))        # 21
print(arr.sum())          # 21
print(arr.sum(axis=0))    # [ 5  7  9]
print(arr.sum(axis=1))    # [ 6 15]

# 均值
print(np.mean(arr))       # 3.5
print(arr.mean(axis=0))   # [2.5 3.5 4.5]

# 最大最小值
print(arr.max())          # 6
print(arr.min())          # 1
print(arr.max(axis=0))    # [4 5 6]
print(arr.argmax())       # 5（最大值索引）

# 标准差和方差
print(arr.std())          # 标准差
print(arr.var())          # 方差

# 累积和和累积积
print(arr.cumsum())       # [ 1  3  6 10 15 21]
print(arr.cumprod())      # [  1   2   6  24 120 720]
```

## 5. 数学函数

```python
# 统计函数
arr = np.array([1, 2, 3, 4, 5])

print(np.median(arr))      # 中位数: 3.0
print(np.percentile(arr, 50))  # 50百分位: 3.0
print(np.quantile(arr, 0.5))   # 分位数: 3.0

# 排序
arr = np.array([3, 1, 4, 1, 5, 9, 2, 6])
print(np.sort(arr))        # [1 1 2 3 4 5 6 9]
print(np.argsort(arr))     # 返回排序后的索引

# 去重
print(np.unique(arr))      # [1 2 3 4 5 6 9]

# clip 限制范围
arr = np.array([1, 2, 3, 4, 5])
print(np.clip(arr, 2, 4))  # [2 2 3 4 4]
```

## 6. 广播运算

```python
# 标量和数组
arr = np.array([1, 2, 3])
print(arr + 10)  # [11 12 13]

# 不同形状数组
arr = np.array([[1, 2, 3], [4, 5, 6]])
print(arr + np.array([10, 20, 30]))
# [[11 22 33]
#  [14 25 36]]
```

## 7. 实战示例

### 示例1：数据标准化

```python
data = np.array([10, 20, 30, 40, 50])

# Z-score标准化
mean = data.mean()
std = data.std()
normalized = (data - mean) / std
print(normalized)
```

### 示例2：计算距离

```python
# 欧氏距离
point1 = np.array([1, 2, 3])
point2 = np.array([4, 5, 6])

distance = np.sqrt(np.sum((point1 - point2)**2))
print(f'欧氏距离: {distance:.2f}')
```

## 练习题

1. 计算数组所有元素的平方和
2. 找出数组中大于平均值的元素
3. 对数组进行Min-Max归一化

---

**下一节：** [数组形状操作](05-数组形状操作.md)
