---
title: CV 入门
---

# CV 入门

> 了解计算机视觉，开启CV学习之旅

## 📚 学习目标

- 理解什么是计算机视觉
- 了解CV的应用场景
- 掌握OpenCV安装
- 理解图像基础知识
- 运行第一个CV程序

## 1. 什么是计算机视觉

### 1.1 定义

**计算机视觉（Computer Vision，CV）** 是人工智能的重要分支，让计算机能够理解和处理视觉信息（图像和视频）。

### 1.2 核心任务

- **图像分类** - 识别图像内容
- **目标检测** - 定位和识别物体
- **图像分割** - 分割图像区域
- **人脸识别** - 识别人脸身份
- **姿态估计** - 识别人体姿态
- **图像生成** - 生成新图像

## 2. CV 应用场景

### 2.1 安防监控

```python
# 人脸识别门禁
# 异常行为检测
# 车牌识别
```

### 2.2 自动驾驶

```python
# 车道线检测
# 行人检测
# 交通标志识别
# 障碍物识别
```

### 2.3 医疗影像

```python
# X光图像分析
# CT/MRI扫描
# 病灶检测
# 辅助诊断
```

## 3. 安装 OpenCV

### 3.1 安装

```bash
# 基础版本
pip install opencv-python

# 完整版本（包含额外模块）
pip install opencv-contrib-python

# 验证安装
python -c "import cv2; print(cv2.__version__)"
```

### 3.2 其他依赖

```bash
pip install numpy
pip install matplotlib
pip install pillow
```

## 4. 图像基础知识

### 4.1 图像表示

```python
import cv2
import numpy as np

# 图像本质是数组
# 灰度图: (height, width)
# 彩色图: (height, width, 3) - BGR

# 创建纯色图像
img = np.zeros((100, 100, 3), dtype=np.uint8)
img[:, :] = (255, 0, 0)  # 蓝色

cv2.imshow('Blue Image', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 4.2 色彩空间

```python
# BGR - OpenCV默认格式
# RGB - 标准格式
# HSV - 色调、饱和度、亮度
# Gray - 灰度图

# BGR转RGB
rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# BGR转灰度
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# BGR转HSV
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
```

## 5. 第一个 CV 程序

### 5.1 读取和显示图像

```python
import cv2

# 读取图像
img = cv2.imread('image.jpg')

# 检查是否成功
if img is None:
    print("无法读取图像")
else:
    print(f"图像shape: {img.shape}")
    print(f"图像类型: {img.dtype}")
    
    # 显示图像
    cv2.imshow('Image', img)
    cv2.waitKey(0)
    cv2.destroyAllWindows()
```

### 5.2 图像处理

```python
# 转换为灰度图
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# 高斯模糊
blurred = cv2.GaussianBlur(gray, (5, 5), 0)

# Canny边缘检测
edges = cv2.Canny(blurred, 50, 150)

# 显示结果
cv2.imshow('Original', img)
cv2.imshow('Gray', gray)
cv2.imshow('Edges', edges)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 5.3 保存图像

```python
# 保存处理后的图像
cv2.imwrite('output_gray.jpg', gray)
cv2.imwrite('output_edges.jpg', edges)

print("图像已保存")
```

## 6. 使用 matplotlib 显示

```python
import matplotlib.pyplot as plt

# 读取图像
img = cv2.imread('image.jpg')

# OpenCV使用BGR，matplotlib使用RGB
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# 显示
plt.figure(figsize=(10, 5))

plt.subplot(121)
plt.imshow(img_rgb)
plt.title('Original')
plt.axis('off')

plt.subplot(122)
plt.imshow(edges, cmap='gray')
plt.title('Edges')
plt.axis('off')

plt.tight_layout()
plt.show()
```

## 7. 摄像头采集

```python
# 打开摄像头
cap = cv2.VideoCapture(0)

if not cap.isOpened():
    print("无法打开摄像头")
    exit()

while True:
    # 读取一帧
    ret, frame = cap.read()
    
    if not ret:
        print("无法接收帧")
        break
    
    # 转为灰度图
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    
    # 显示
    cv2.imshow('Camera', frame)
    cv2.imshow('Gray', gray)
    
    # 按'q'退出
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# 释放资源
cap.release()
cv2.destroyAllWindows()
```

## 8. 视频处理

```python
# 读取视频
cap = cv2.VideoCapture('video.mp4')

# 获取视频信息
fps = cap.get(cv2.CAP_PROP_FPS)
width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH))
height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT))

print(f"FPS: {fps}, Size: {width}x{height}")

# 创建视频写入器
fourcc = cv2.VideoWriter_fourcc(*'mp4v')
out = cv2.VideoWriter('output.mp4', fourcc, fps, (width, height))

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    
    # 处理帧
    processed = cv2.Canny(frame, 100, 200)
    processed = cv2.cvtColor(processed, cv2.COLOR_GRAY2BGR)
    
    # 写入视频
    out.write(processed)
    
    # 显示
    cv2.imshow('Frame', processed)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
out.release()
cv2.destroyAllWindows()
```

## 9. 常见问题

### Q1: 图像读取失败？

```python
img = cv2.imread('image.jpg')
if img is None:
    print("检查:")
    print("1. 文件路径是否正确")
    print("2. 文件是否存在")
    print("3. 文件格式是否支持")
```

### Q2: 图像显示颜色不对？

```python
# OpenCV使用BGR，需要转为RGB
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
plt.imshow(img_rgb)
```

### Q3: 窗口一闪而过？

```python
cv2.imshow('Image', img)
cv2.waitKey(0)  # 等待按键
cv2.destroyAllWindows()  # 关闭所有窗口
```

## 10. 练习题

1. 读取一张图片并显示其shape和dtype
2. 将彩色图转为灰度图并保存
3. 使用Canny进行边缘检测
4. 打开摄像头并实时显示
5. 读取视频并提取第一帧

## 💡 重点总结

1. **OpenCV** - 最流行的计算机视觉库
2. **图像表示** - NumPy数组 (H, W, C)
3. **色彩空间** - BGR (OpenCV默认)
4. **基本操作** - 读取、显示、保存
5. **图像处理** - 灰度、模糊、边缘检测

---

**下一节：** [图像基本操作](02-图像基本操作.md)
