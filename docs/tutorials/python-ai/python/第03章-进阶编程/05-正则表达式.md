---
title: æ­£åˆ™è¡¨è¾¾å¼
---

# æ­£åˆ™è¡¨è¾¾å¼

> æŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œé«˜æ•ˆå¤„ç†æ–‡æœ¬æ•°æ®

## ğŸ“š å­¦ä¹ ç›®æ ‡

- ç†è§£æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•
- æŒæ¡ re æ¨¡å—çš„ä½¿ç”¨
- å­¦ä¼šæ–‡æœ¬åŒ¹é…å’Œæå–
- æŒæ¡å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼

## 1. æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€

### 1.1 åŸºæœ¬åŒ¹é…

```python
import re

# ç²¾ç¡®åŒ¹é…
pattern = r'hello'
text = 'hello world'
result = re.search(pattern, text)
print(result.group())  # hello

# å¿½ç•¥å¤§å°å†™
result = re.search(r'HELLO', text, re.IGNORECASE)
print(result.group())  # hello
```

### 1.2 å…ƒå­—ç¬¦

```python
# . åŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆé™¤æ¢è¡Œç¬¦ï¼‰
re.search(r'h.llo', 'hello')  # åŒ¹é…

# ^ åŒ¹é…å­—ç¬¦ä¸²å¼€å§‹
re.search(r'^hello', 'hello world')  # åŒ¹é…
re.search(r'^world', 'hello world')  # ä¸åŒ¹é…

# $ åŒ¹é…å­—ç¬¦ä¸²ç»“æŸ
re.search(r'world$', 'hello world')  # åŒ¹é…

# * åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡
re.search(r'ab*c', 'ac')    # åŒ¹é…
re.search(r'ab*c', 'abc')   # åŒ¹é…
re.search(r'ab*c', 'abbc')  # åŒ¹é…

# + åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡
re.search(r'ab+c', 'abc')   # åŒ¹é…
re.search(r'ab+c', 'ac')    # ä¸åŒ¹é…

# ? åŒ¹é…0æ¬¡æˆ–1æ¬¡
re.search(r'ab?c', 'ac')    # åŒ¹é…
re.search(r'ab?c', 'abc')   # åŒ¹é…
```

### 1.3 å­—ç¬¦ç±»

```python
# [] å­—ç¬¦é›†
re.search(r'[abc]', 'apple')  # åŒ¹é… a
re.search(r'[0-9]', 'abc123')  # åŒ¹é… 1

# [^] å–å
re.search(r'[^0-9]', '123abc')  # åŒ¹é… a

# \d æ•°å­— [0-9]
re.search(r'\d+', 'abc123')  # 123

# \D éæ•°å­—
re.search(r'\D+', '123abc')  # abc

# \w å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ [a-zA-Z0-9_]
re.search(r'\w+', 'hello_123')  # hello_123

# \W éå­—æ¯æ•°å­—ä¸‹åˆ’çº¿
re.search(r'\W+', 'hello, world!')  # , 

# \s ç©ºç™½å­—ç¬¦
re.search(r'\s+', 'hello world')  # ç©ºæ ¼

# \S éç©ºç™½å­—ç¬¦
re.search(r'\S+', 'hello world')  # hello
```

## 2. re æ¨¡å—å‡½æ•°

### 2.1 search() - æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…

```python
import re

text = 'My phone: 123-456-7890'
pattern = r'\d{3}-\d{3}-\d{4}'

result = re.search(pattern, text)
if result:
    print(result.group())  # 123-456-7890
    print(result.start())  # èµ·å§‹ä½ç½®
    print(result.end())    # ç»“æŸä½ç½®
```

### 2.2 match() - ä»å¼€å¤´åŒ¹é…

```python
# ä»å­—ç¬¦ä¸²å¼€å¤´åŒ¹é…
text = 'hello world'
print(re.match(r'hello', text))  # åŒ¹é…
print(re.match(r'world', text))  # None
```

### 2.3 findall() - æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…

```python
text = 'Email: user@example.com, admin@test.com'
pattern = r'[\w.-]+@[\w.-]+'

emails = re.findall(pattern, text)
print(emails)  # ['user@example.com', 'admin@test.com']
```

### 2.4 finditer() - è¿­ä»£å™¨

```python
text = 'Phone: 123-456-7890, 098-765-4321'
pattern = r'\d{3}-\d{3}-\d{4}'

for match in re.finditer(pattern, text):
    print(match.group(), match.span())
```

### 2.5 sub() - æ›¿æ¢

```python
text = 'Hello 123 World 456'

# æ›¿æ¢æ‰€æœ‰æ•°å­—
result = re.sub(r'\d+', 'NUM', text)
print(result)  # Hello NUM World NUM

# é™åˆ¶æ›¿æ¢æ¬¡æ•°
result = re.sub(r'\d+', 'NUM', text, count=1)
print(result)  # Hello NUM World 456
```

### 2.6 split() - åˆ†å‰²

```python
text = 'apple,banana;orange|grape'

# ä½¿ç”¨å¤šä¸ªåˆ†éš”ç¬¦
parts = re.split(r'[,;|]', text)
print(parts)  # ['apple', 'banana', 'orange', 'grape']
```

## 3. åˆ†ç»„å’Œæ•è·

### 3.1 åŸºæœ¬åˆ†ç»„

```python
# () åˆ›å»ºæ•è·ç»„
pattern = r'(\d{4})-(\d{2})-(\d{2})'
text = '2024-01-15'

match = re.search(pattern, text)
print(match.group(0))  # 2024-01-15 (å®Œæ•´åŒ¹é…)
print(match.group(1))  # 2024 (ç¬¬ä¸€ç»„)
print(match.group(2))  # 01 (ç¬¬äºŒç»„)
print(match.group(3))  # 15 (ç¬¬ä¸‰ç»„)
print(match.groups())  # ('2024', '01', '15')
```

### 3.2 å‘½ååˆ†ç»„

```python
pattern = r'(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})'
text = '2024-01-15'

match = re.search(pattern, text)
print(match.group('year'))   # 2024
print(match.group('month'))  # 01
print(match.group('day'))    # 15
print(match.groupdict())     # {'year': '2024', 'month': '01', 'day': '15'}
```

### 3.3 éæ•è·ç»„

```python
# (?:...) éæ•è·ç»„
pattern = r'(?:http|https)://(\w+\.\w+)'
text = 'https://www.example.com'

match = re.search(pattern, text)
print(match.group(0))  # https://www.example.com
print(match.group(1))  # www.example.com
```

## 4. å¸¸ç”¨æ­£åˆ™æ¨¡å¼

### 4.1 é‚®ç®±éªŒè¯

```python
def validate_email(email):
    pattern = r'^[\w.-]+@[\w.-]+\.\w+$'
    return re.match(pattern, email) is not None

print(validate_email('user@example.com'))  # True
print(validate_email('invalid.email'))      # False
```

### 4.2 æ‰‹æœºå·éªŒè¯

```python
def validate_phone(phone):
    # ä¸­å›½æ‰‹æœºå·
    pattern = r'^1[3-9]\d{9}$'
    return re.match(pattern, phone) is not None

print(validate_phone('13812345678'))  # True
print(validate_phone('12345678901'))  # False
```

### 4.3 URL æå–

```python
def extract_urls(text):
    pattern = r'https?://[\w.-]+(?:/[\w.-]*)*'
    return re.findall(pattern, text)

text = 'Visit https://example.com and http://test.org'
print(extract_urls(text))
```

### 4.4 IP åœ°å€éªŒè¯

```python
def validate_ip(ip):
    pattern = r'^(\d{1,3}\.){3}\d{1,3}$'
    if not re.match(pattern, ip):
        return False
    
    # æ£€æŸ¥æ¯ä¸ªæ•°å­—æ˜¯å¦åœ¨ 0-255 èŒƒå›´å†…
    parts = ip.split('.')
    return all(0 <= int(part) <= 255 for part in parts)

print(validate_ip('192.168.1.1'))   # True
print(validate_ip('256.1.1.1'))     # False
```

### 4.5 èº«ä»½è¯å·éªŒè¯

```python
def validate_id_card(id_card):
    # 18ä½èº«ä»½è¯
    pattern = r'^\d{17}[\dXx]$'
    return re.match(pattern, id_card) is not None

print(validate_id_card('110101199003071234'))  # True
```

## 5. é«˜çº§ç‰¹æ€§

### 5.1 è´ªå©ªä¸éè´ªå©ª

```python
text = '<div>content1</div><div>content2</div>'

# è´ªå©ªåŒ¹é…ï¼ˆé»˜è®¤ï¼‰
greedy = re.search(r'<div>.*</div>', text)
print(greedy.group())  # <div>content1</div><div>content2</div>

# éè´ªå©ªåŒ¹é…
non_greedy = re.search(r'<div>.*?</div>', text)
print(non_greedy.group())  # <div>content1</div>
```

### 5.2 å‰ç»å’Œåé¡¾

```python
# æ­£å‘å‰ç» (?=...)
text = 'Python3.11'
result = re.search(r'Python(?=3)', text)
print(result.group())  # Python

# è´Ÿå‘å‰ç» (?!...)
result = re.search(r'Python(?!2)', text)
print(result.group())  # Python

# æ­£å‘åé¡¾ (?<=...)
result = re.search(r'(?<=Python)\d+', text)
print(result.group())  # 3

# è´Ÿå‘åé¡¾ (?<!...)
text = 'abc123'
result = re.search(r'(?<![a-z])\d+', '123')
print(result.group())  # 123
```

### 5.3 ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼

```python
# é¢‘ç¹ä½¿ç”¨çš„æ¨¡å¼åº”è¯¥ç¼–è¯‘
pattern = re.compile(r'\d+')

# æé«˜æ€§èƒ½
for text in ['abc123', 'def456', 'ghi789']:
    result = pattern.findall(text)
    print(result)
```

## 6. å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šæ—¥å¿—è§£æ

```python
def parse_log(log_line):
    pattern = r'(?P<ip>\d+\.\d+\.\d+\.\d+).*\[(?P<time>.*?)\].*"(?P<method>\w+)\s+(?P<url>.*?)\s+'
    
    match = re.search(pattern, log_line)
    if match:
        return match.groupdict()
    return None

log = '192.168.1.1 - - [15/Jan/2024:10:30:00] "GET /index.html HTTP/1.1"'
print(parse_log(log))
```

### æ¡ˆä¾‹2ï¼šHTML æ ‡ç­¾æ¸…ç†

```python
def remove_html_tags(html):
    pattern = r'<[^>]+>'
    return re.sub(pattern, '', html)

html = '<p>This is <b>bold</b> text</p>'
print(remove_html_tags(html))  # This is bold text
```

### æ¡ˆä¾‹3ï¼šæ•æ„Ÿä¿¡æ¯è„±æ•

```python
def mask_sensitive_info(text):
    # æ‰‹æœºå·è„±æ•
    text = re.sub(r'(\d{3})\d{4}(\d{4})', r'\1****\2', text)
    
    # èº«ä»½è¯è„±æ•
    text = re.sub(r'(\d{6})\d{8}(\d{4})', r'\1********\2', text)
    
    return text

text = 'æ‰‹æœº: 13812345678, èº«ä»½è¯: 110101199003071234'
print(mask_sensitive_info(text))
```

### æ¡ˆä¾‹4ï¼šæ–‡æœ¬æå–

```python
def extract_data(text):
    # æå–ä»·æ ¼
    prices = re.findall(r'Â¥\d+(?:\.\d{2})?', text)
    
    # æå–æ—¥æœŸ
    dates = re.findall(r'\d{4}-\d{2}-\d{2}', text)
    
    # æå–é‚®ç®±
    emails = re.findall(r'[\w.-]+@[\w.-]+\.\w+', text)
    
    return {
        'prices': prices,
        'dates': dates,
        'emails': emails
    }

text = 'ä»·æ ¼: Â¥99.99, æ—¥æœŸ: 2024-01-15, è”ç³»: user@example.com'
print(extract_data(text))
```

## 7. å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼

```python
# å¸¸è§æ¨¡å¼
patterns = {
    'æ‰‹æœºå·': r'^1[3-9]\d{9}$',
    'é‚®ç®±': r'^[\w.-]+@[\w.-]+\.\w+$',
    'URL': r'^https?://[\w.-]+(?:/[\w.-]*)*$',
    'IPåœ°å€': r'^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$',
    'æ—¥æœŸ': r'^\d{4}-\d{2}-\d{2}$',
    'æ—¶é—´': r'^\d{2}:\d{2}:\d{2}$',
    'èº«ä»½è¯': r'^\d{17}[\dXx]$',
    'é‚®æ”¿ç¼–ç ': r'^\d{6}$',
    'ä¸­æ–‡': r'^[\u4e00-\u9fa5]+$',
    'æ•°å­—': r'^\d+$',
    'å­—æ¯': r'^[a-zA-Z]+$',
    'ç”¨æˆ·å': r'^[a-zA-Z]\w{4,15}$',
    'å¯†ç ': r'^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$',
}
```

## ğŸ“ ç»ƒä¹ é¢˜

1. ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼éªŒè¯å¼ºå¯†ç ï¼ˆåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
2. æå–HTMLä¸­çš„æ‰€æœ‰é“¾æ¥
3. å®ç°ä¸€ä¸ªç®€å•çš„Markdownè§£æå™¨
4. ç¼–å†™æ‰‹æœºå·å’Œé‚®ç®±çš„æ‰¹é‡æå–å·¥å…·

---

**ä¸‹ä¸€èŠ‚ï¼š** [å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹](06-å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹.md)
