# 函数基础

## 一、函数的定义

### 1. 什么是函数？

函数是组织好的、可重复使用的、用来实现特定功能的代码块。

**优点：**
- 提高代码复用性
- 提高代码可维护性
- 提高代码可读性
- 降低代码耦合度

### 2. 函数的定义语法

```python
def 函数名(传入参数):
    函数体
    return 返回值
```

**注意事项：**
- 参数不需要，可以省略
- 返回值不需要，可以省略
- 函数名要符合标识符命名规则

**示例：**

```python
# 无参数无返回值
def say_hello():
    print("Hello, Python!")

# 调用函数
say_hello()  # 输出：Hello, Python!
```

---

## 二、函数的参数

### 1. 位置参数

按照参数定义的顺序传递参数。

```python
def greet(name, age):
    print(f"你好，我是{name}，今年{age}岁")

greet("张三", 18)  # 你好，我是张三，今年18岁
```

### 2. 关键字参数

通过 "键=值" 形式传递参数，可以不按照顺序。

```python
def user_info(name, age, gender):
    print(f"姓名：{name}，年龄：{age}，性别：{gender}")

# 关键字传参（可以不按照固定顺序）
user_info(name="小明", age=20, gender="男")
user_info(age=20, gender="男", name="小明")

# 可以和位置参数混用，位置参数必须在前
user_info("小明", age=20, gender="男")
```

**注意：** 位置参数必须在关键字参数的前面！

### 3. 默认参数（缺省参数）

为参数提供默认值，调用时可不传该参数。

```python
def user_info(name, age, gender='男'):
    print(f"姓名：{name}，年龄：{age}，性别：{gender}")

user_info('张三', 20)        # 使用默认值：男
user_info('李四', 18, '女')  # 指定值：女
```

**注意：** 默认参数必须在所有位置参数之后！

### 4. 不定长参数

#### 位置传递（*args）

传进的所有参数都会被args变量收集，合并为一个元组。

```python
def user_info(*args):
    print(args)
    print(type(args))  # <class 'tuple'>

user_info('TOM')              # ('TOM',)
user_info('TOM', 18)          # ('TOM', 18)
user_info('TOM', 18, '男')    # ('TOM', 18, '男')
```

#### 关键字传递（**kwargs）

所有的 "键=值" 会被kwargs接受，组成字典。

```python
def user_info(**kwargs):
    print(kwargs)
    print(type(kwargs))  # <class 'dict'>

user_info(name='TOM', age=18, id=110)
# {'name': 'TOM', 'age': 18, 'id': 110}
```

#### 混合使用

```python
def func(a, b, *args, **kwargs):
    print(f"a={a}, b={b}")
    print(f"args={args}")
    print(f"kwargs={kwargs}")

func(1, 2, 3, 4, 5, name='张三', age=18)
# a=1, b=2
# args=(3, 4, 5)
# kwargs={'name': '张三', 'age': 18}
```

---

## 三、函数的返回值

### 1. return语句

```python
def add(x, y):
    result = x + y
    return result

r = add(5, 3)
print(r)  # 8
```

### 2. 多个返回值

Python函数可以返回多个值，实际上是返回一个元组。

```python
def calculate(x, y):
    add_result = x + y
    sub_result = x - y
    mul_result = x * y
    return add_result, sub_result, mul_result

a, b, c = calculate(10, 5)
print(f"加法：{a}")  # 15
print(f"减法：{b}")  # 5
print(f"乘法：{c}")  # 50
```

### 3. None类型

如果函数没有return语句，实际上返回的是None。

```python
def say_hi():
    print("你好")

result = say_hi()
print(f"返回值：{result}")        # None
print(f"类型：{type(result)}")    # <class 'NoneType'>
```

**None的应用：**

```python
def check_age(age):
    if age >= 18:
        return "SUCCESS"
    else:
        return None

result = check_age(16)
# not None 表示如果不是None（即有值）
if not result:
    print("未成年，不可以进入")
```

---

## 四、函数的说明文档

通过多行注释的形式对函数进行说明解释，内容写在函数体之前。

```python
def add(x, y):
    """
    add函数可以接收2个参数，进行2数相加的功能
    :param x: 形参x表示相加的其中一个数字
    :param y: 形参y表示相加的另一个数字
    :return: 返回值是2数相加的结果
    """
    result = x + y
    return result

# 查看函数说明文档
help(add)
print(add.__doc__)
```

---

## 五、变量作用域

### 1. 局部变量

在函数内部定义的变量，只能在函数内部使用。

```python
def test():
    num = 100  # 局部变量
    print(num)

test()  # 100
# print(num)  # NameError: name 'num' is not defined
```

### 2. 全局变量

在函数外部定义的变量，可以在函数内部访问。

```python
num = 100  # 全局变量

def test():
    print(num)  # 可以访问全局变量

test()  # 100
print(num)  # 100
```

### 3. global关键字

在函数内部修改全局变量，需要使用global关键字声明。

```python
num = 200

def test_a():
    print(f"num的值是{num}")  # 可以访问

def test_b():
    global num  # 声明为全局变量
    num = 300   # 修改全局变量
    print(f"num的值是{num}")

test_a()  # 200
test_b()  # 300
print(f"num的值是{num}")  # 300（全局变量被修改）
```

---

## 六、实战案例：ATM系统

```python
# 定义全局变量
money = 5000000
name = None

# 要求客户输入姓名
name = input("请输入您的姓名：")

# 定义查询函数
def query(show_header):
    if show_header:
        print("----------查询余额----------")
    print(f"{name}您好，您的余额是{money}元")

# 定义存款函数
def saving(num):
    global money
    print("----------存款----------")
    money += num
    print(f"{name}您好，您存款{num}元成功")
    query(False)

# 定义取款函数
def withdrawal(num):
    global money
    print("----------取款----------")
    money -= num
    print(f"{name}您好，您取款{num}元成功")
    query(False)

# 定义主菜单函数
def main():
    print("---------主菜单---------")
    print(f"{name}，您好，欢迎来到银行，请选择操作：")
    print("1.查询余额")
    print("2.存款")
    print("3.取款")
    print("4.退出")
    
    while True:
        choice = input("请输入您的选择：")
        
        if choice == "1":
            query(True)
        elif choice == "2":
            num = int(input("请输入存款金额："))
            saving(num)
        elif choice == "3":
            num = int(input("请输入取款金额："))
            withdrawal(num)
        elif choice == "4":
            print("欢迎下次再来！")
            break
        else:
            print("输入有误，请重新输入")

# 启动程序
main()
```

---

## 七、函数的嵌套调用

函数内部可以调用其他函数。

```python
def func_a():
    print("这是函数A")

def func_b():
    print("这是函数B")
    func_a()  # 调用函数A

func_b()
# 输出：
# 这是函数B
# 这是函数A
```

---

## 八、实战练习

### 练习1：计算器

```python
def calculator(num1, num2, operator):
    """
    简易计算器
    :param num1: 第一个数字
    :param num2: 第二个数字
    :param operator: 运算符
    :return: 计算结果
    """
    if operator == '+':
        return num1 + num2
    elif operator == '-':
        return num1 - num2
    elif operator == '*':
        return num1 * num2
    elif operator == '/':
        if num2 != 0:
            return num1 / num2
        else:
            return "除数不能为0"
    else:
        return "无效运算符"

# 测试
print(calculator(10, 5, '+'))  # 15
print(calculator(10, 5, '-'))  # 5
print(calculator(10, 5, '*'))  # 50
print(calculator(10, 5, '/'))  # 2.0
```

### 练习2：温度转换

```python
def celsius_to_fahrenheit(celsius):
    """摄氏度转华氏度"""
    return celsius * 9 / 5 + 32

def fahrenheit_to_celsius(fahrenheit):
    """华氏度转摄氏度"""
    return (fahrenheit - 32) * 5 / 9

# 测试
print(f"0°C = {celsius_to_fahrenheit(0)}°F")
print(f"100°C = {celsius_to_fahrenheit(100)}°F")
print(f"32°F = {fahrenheit_to_celsius(32)}°C")
```

### 练习3：判断质数

```python
def is_prime(n):
    """
    判断一个数是否为质数
    :param n: 待判断的数字
    :return: True表示是质数，False表示不是
    """
    if n < 2:
        return False
    
    for i in range(2, int(n ** 0.5) + 1):
        if n % i == 0:
            return False
    
    return True

# 测试
for num in range(1, 21):
    if is_prime(num):
        print(f"{num}是质数")
```

---

## 九、知识点总结

### ✅ 核心要点

1. **函数定义**：def关键字定义函数
2. **参数类型**：位置参数、关键字参数、默认参数、不定长参数
3. **返回值**：return语句，可以返回多个值
4. **变量作用域**：局部变量、全局变量、global关键字
5. **函数文档**：使用三引号编写说明文档

### 📝 面试重点

- 位置参数和关键字参数的区别
- *args和**kwargs的使用
- 函数可以返回多个值（实际是元组）
- 局部变量和全局变量的区别
- global关键字的作用

---

**上一章：** [第01章-字典与集合](../第01章-基础编程/07-字典与集合.md)  
**下一章：** [函数进阶](02-函数进阶.md) →
