# é¢å‘å¯¹è±¡è¿›é˜¶

## ä¸€ã€ç»§æ‰¿ï¼ˆInheritanceï¼‰

### 1. ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Ÿ

ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é‡è¦ç‰¹æ€§ï¼Œå…è®¸ä¸€ä¸ªç±»ï¼ˆå­ç±»ï¼‰ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆçˆ¶ç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚

**ä¼˜ç‚¹ï¼š**
- ä»£ç å¤ç”¨
- å»ºç«‹ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»
- æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§

### 2. å•ç»§æ‰¿

```python
class Animal:
    """åŠ¨ç‰©ç±»ï¼ˆçˆ¶ç±»ï¼‰"""
    
    def __init__(self, name):
        self.name = name
    
    def eat(self):
        print(f"{self.name}æ­£åœ¨åƒä¸œè¥¿")
    
    def sleep(self):
        print(f"{self.name}æ­£åœ¨ç¡è§‰")

class Dog(Animal):
    """ç‹—ç±»ï¼ˆå­ç±»ï¼‰"""
    
    def bark(self):
        print(f"{self.name}æ­£åœ¨æ±ªæ±ªå«")

class Cat(Animal):
    """çŒ«ç±»ï¼ˆå­ç±»ï¼‰"""
    
    def meow(self):
        print(f"{self.name}æ­£åœ¨å–µå–µå«")

# åˆ›å»ºå¯¹è±¡
dog = Dog("æ—ºè´¢")
cat = Cat("å’ªå’ª")

# è°ƒç”¨ç»§æ‰¿çš„æ–¹æ³•
dog.eat()   # æ—ºè´¢æ­£åœ¨åƒä¸œè¥¿
dog.sleep() # æ—ºè´¢æ­£åœ¨ç¡è§‰
dog.bark()  # æ—ºè´¢æ­£åœ¨æ±ªæ±ªå«

cat.eat()   # å’ªå’ªæ­£åœ¨åƒä¸œè¥¿
cat.meow()  # å’ªå’ªæ­£åœ¨å–µå–µå«
```

### 3. æ–¹æ³•é‡å†™ï¼ˆOverrideï¼‰

å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚

```python
class Animal:
    def __init__(self, name):
        self.name = name
    
    def speak(self):
        print(f"{self.name}å‘å‡ºå£°éŸ³")

class Dog(Animal):
    def speak(self):
        """é‡å†™çˆ¶ç±»æ–¹æ³•"""
        print(f"{self.name}æ±ªæ±ªå«")

class Cat(Animal):
    def speak(self):
        """é‡å†™çˆ¶ç±»æ–¹æ³•"""
        print(f"{self.name}å–µå–µå«")

# æµ‹è¯•
dog = Dog("æ—ºè´¢")
cat = Cat("å’ªå’ª")

dog.speak()  # æ—ºè´¢æ±ªæ±ªå«
cat.speak()  # å’ªå’ªå–µå–µå«
```

### 4. super()å‡½æ•°

ä½¿ç”¨`super()`è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def introduce(self):
        print(f"æˆ‘æ˜¯{self.name}ï¼Œä»Šå¹´{self.age}å²")

class Student(Person):
    def __init__(self, name, age, student_id):
        # è°ƒç”¨çˆ¶ç±»çš„__init__æ–¹æ³•
        super().__init__(name, age)
        self.student_id = student_id
    
    def introduce(self):
        # è°ƒç”¨çˆ¶ç±»çš„introduceæ–¹æ³•
        super().introduce()
        print(f"æˆ‘çš„å­¦å·æ˜¯{self.student_id}")

# æµ‹è¯•
student = Student("å¼ ä¸‰", 18, "2024001")
student.introduce()
# è¾“å‡ºï¼š
# æˆ‘æ˜¯å¼ ä¸‰ï¼Œä»Šå¹´18å²
# æˆ‘çš„å­¦å·æ˜¯2024001
```

### 5. å¤šç»§æ‰¿

Pythonæ”¯æŒå¤šç»§æ‰¿ï¼Œä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚

```python
class Father:
    def __init__(self):
        self.father_name = "çˆ¶äº²"
    
    def father_method(self):
        print("è¿™æ˜¯çˆ¶äº²çš„æ–¹æ³•")

class Mother:
    def __init__(self):
        self.mother_name = "æ¯äº²"
    
    def mother_method(self):
        print("è¿™æ˜¯æ¯äº²çš„æ–¹æ³•")

class Child(Father, Mother):
    def __init__(self):
        Father.__init__(self)
        Mother.__init__(self)
        self.child_name = "å­©å­"
    
    def child_method(self):
        print("è¿™æ˜¯å­©å­çš„æ–¹æ³•")

# æµ‹è¯•
child = Child()
child.father_method()  # è¿™æ˜¯çˆ¶äº²çš„æ–¹æ³•
child.mother_method()  # è¿™æ˜¯æ¯äº²çš„æ–¹æ³•
child.child_method()   # è¿™æ˜¯å­©å­çš„æ–¹æ³•
```

### 6. æ–¹æ³•è§£æé¡ºåºï¼ˆMROï¼‰

å¤šç»§æ‰¿æ—¶ï¼ŒPythonä½¿ç”¨C3çº¿æ€§åŒ–ç®—æ³•ç¡®å®šæ–¹æ³•è§£æé¡ºåºã€‚

```python
class A:
    def method(self):
        print("Açš„æ–¹æ³•")

class B(A):
    def method(self):
        print("Bçš„æ–¹æ³•")

class C(A):
    def method(self):
        print("Cçš„æ–¹æ³•")

class D(B, C):
    pass

# æŸ¥çœ‹MRO
print(D.__mro__)
# (<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <class 'object'>)

d = D()
d.method()  # Bçš„æ–¹æ³•ï¼ˆæŒ‰ç…§MROé¡ºåºï¼‰
```

---

## äºŒã€å¤šæ€ï¼ˆPolymorphismï¼‰

### 1. ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿ

å¤šæ€æ˜¯æŒ‡åŒä¸€ä¸ªæ–¹æ³•åœ¨ä¸åŒå¯¹è±¡ä¸Šæœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚

```python
class Animal:
    def speak(self):
        pass

class Dog(Animal):
    def speak(self):
        return "æ±ªæ±ªæ±ª"

class Cat(Animal):
    def speak(self):
        return "å–µå–µå–µ"

class Duck(Animal):
    def speak(self):
        return "å˜å˜å˜"

# å¤šæ€çš„ä½“ç°
def make_animal_speak(animal):
    """è®©åŠ¨ç‰©å‘å‡ºå£°éŸ³"""
    print(animal.speak())

# åŒä¸€ä¸ªå‡½æ•°ï¼Œä¸åŒçš„å¯¹è±¡ï¼Œä¸åŒçš„ç»“æœ
dog = Dog()
cat = Cat()
duck = Duck()

make_animal_speak(dog)   # æ±ªæ±ªæ±ª
make_animal_speak(cat)   # å–µå–µå–µ
make_animal_speak(duck)  # å˜å˜å˜
```

### 2. é¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰

Pythonæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œä¸éœ€è¦æ˜¾å¼ç»§æ‰¿ï¼Œåªè¦æœ‰ç›¸åŒçš„æ–¹æ³•å°±å¯ä»¥ã€‚

```python
class Dog:
    def speak(self):
        return "æ±ªæ±ªæ±ª"

class Robot:
    def speak(self):
        return "æˆ‘æ˜¯æœºå™¨äºº"

# ä¸éœ€è¦ç»§æ‰¿åŒä¸€ä¸ªçˆ¶ç±»
def make_speak(obj):
    print(obj.speak())

dog = Dog()
robot = Robot()

make_speak(dog)    # æ±ªæ±ªæ±ª
make_speak(robot)  # æˆ‘æ˜¯æœºå™¨äºº
```

---

## ä¸‰ã€å°è£…ï¼ˆEncapsulationï¼‰

### 1. ç§æœ‰å±æ€§å’Œæ–¹æ³•

ä½¿ç”¨åŒä¸‹åˆ’çº¿`__`å®šä¹‰ç§æœ‰æˆå‘˜ã€‚

```python
class BankAccount:
    def __init__(self, owner, balance):
        self.owner = owner
        self.__balance = balance  # ç§æœ‰å±æ€§
    
    def __check_balance(self):
        """ç§æœ‰æ–¹æ³•"""
        return self.__balance > 0
    
    def deposit(self, amount):
        """å­˜æ¬¾"""
        if amount > 0:
            self.__balance += amount
            return True
        return False
    
    def withdraw(self, amount):
        """å–æ¬¾"""
        if self.__check_balance() and amount <= self.__balance:
            self.__balance -= amount
            return True
        return False
    
    def get_balance(self):
        """è·å–ä½™é¢"""
        return self.__balance

# æµ‹è¯•
account = BankAccount("å¼ ä¸‰", 1000)
print(account.get_balance())  # 1000

# æ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å±æ€§
# print(account.__balance)  # AttributeError

account.deposit(500)
print(account.get_balance())  # 1500
```

### 2. å±æ€§è£…é¥°å™¨ï¼ˆ@propertyï¼‰

ä½¿ç”¨`@property`å°†æ–¹æ³•è½¬æ¢ä¸ºå±æ€§ã€‚

```python
class Person:
    def __init__(self, name, age):
        self._name = name
        self._age = age
    
    @property
    def name(self):
        """è·å–å§“å"""
        return self._name
    
    @name.setter
    def name(self, value):
        """è®¾ç½®å§“å"""
        if isinstance(value, str):
            self._name = value
        else:
            raise ValueError("å§“åå¿…é¡»æ˜¯å­—ç¬¦ä¸²")
    
    @property
    def age(self):
        """è·å–å¹´é¾„"""
        return self._age
    
    @age.setter
    def age(self, value):
        """è®¾ç½®å¹´é¾„"""
        if 0 < value < 150:
            self._age = value
        else:
            raise ValueError("å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´")

# æµ‹è¯•
person = Person("å¼ ä¸‰", 18)

# åƒè®¿é—®å±æ€§ä¸€æ ·ä½¿ç”¨
print(person.name)  # å¼ ä¸‰
print(person.age)   # 18

# åƒè®¾ç½®å±æ€§ä¸€æ ·ä½¿ç”¨
person.name = "æå››"
person.age = 20

print(person.name)  # æå››
print(person.age)   # 20
```

---

## å››ã€å¸¸ç”¨é­”æœ¯æ–¹æ³•

### 1. è¿ç®—ç¬¦é‡è½½

#### `__add__()` - åŠ æ³•è¿ç®—ç¬¦

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __add__(self, other):
        """é‡è½½+è¿ç®—ç¬¦"""
        return Point(self.x + other.x, self.y + other.y)
    
    def __str__(self):
        return f"Point({self.x}, {self.y})"

p1 = Point(1, 2)
p2 = Point(3, 4)
p3 = p1 + p2  # è°ƒç”¨__add__æ–¹æ³•
print(p3)  # Point(4, 6)
```

#### å…¶ä»–è¿ç®—ç¬¦

```python
class Number:
    def __init__(self, value):
        self.value = value
    
    def __add__(self, other):
        """åŠ æ³•ï¼š+"""
        return Number(self.value + other.value)
    
    def __sub__(self, other):
        """å‡æ³•ï¼š-"""
        return Number(self.value - other.value)
    
    def __mul__(self, other):
        """ä¹˜æ³•ï¼š*"""
        return Number(self.value * other.value)
    
    def __truediv__(self, other):
        """é™¤æ³•ï¼š/"""
        return Number(self.value / other.value)
    
    def __eq__(self, other):
        """ç­‰äºï¼š=="""
        return self.value == other.value
    
    def __lt__(self, other):
        """å°äºï¼š<"""
        return self.value < other.value
    
    def __str__(self):
        return str(self.value)

# æµ‹è¯•
n1 = Number(10)
n2 = Number(5)

print(n1 + n2)  # 15
print(n1 - n2)  # 5
print(n1 * n2)  # 50
print(n1 / n2)  # 2.0
print(n1 == n2) # False
print(n1 > n2)  # True
```

### 2. å®¹å™¨ç›¸å…³é­”æœ¯æ–¹æ³•

```python
class MyList:
    def __init__(self):
        self.items = []
    
    def __len__(self):
        """len()å‡½æ•°"""
        return len(self.items)
    
    def __getitem__(self, index):
        """ç´¢å¼•è®¿é—®ï¼šobj[index]"""
        return self.items[index]
    
    def __setitem__(self, index, value):
        """ç´¢å¼•èµ‹å€¼ï¼šobj[index] = value"""
        self.items[index] = value
    
    def __delitem__(self, index):
        """åˆ é™¤å…ƒç´ ï¼šdel obj[index]"""
        del self.items[index]
    
    def __contains__(self, item):
        """æˆå‘˜æ£€æŸ¥ï¼šitem in obj"""
        return item in self.items
    
    def append(self, item):
        self.items.append(item)

# æµ‹è¯•
my_list = MyList()
my_list.append(1)
my_list.append(2)
my_list.append(3)

print(len(my_list))      # 3
print(my_list[0])        # 1
print(2 in my_list)      # True
my_list[0] = 10
print(my_list[0])        # 10
```

### 3. ä¸Šä¸‹æ–‡ç®¡ç†å™¨

```python
class FileManager:
    def __init__(self, filename, mode):
        self.filename = filename
        self.mode = mode
        self.file = None
    
    def __enter__(self):
        """è¿›å…¥withè¯­å¥æ—¶è°ƒç”¨"""
        print("æ‰“å¼€æ–‡ä»¶")
        self.file = open(self.filename, self.mode)
        return self.file
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        """é€€å‡ºwithè¯­å¥æ—¶è°ƒç”¨"""
        print("å…³é—­æ–‡ä»¶")
        if self.file:
            self.file.close()
        return False

# ä½¿ç”¨withè¯­å¥
with FileManager('test.txt', 'w') as f:
    f.write('Hello, Python!')
# è‡ªåŠ¨è°ƒç”¨__exit__æ–¹æ³•å…³é—­æ–‡ä»¶
```

### 4. å¯è°ƒç”¨å¯¹è±¡

```python
class Multiplier:
    def __init__(self, factor):
        self.factor = factor
    
    def __call__(self, x):
        """ä½¿å¯¹è±¡å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨"""
        return x * self.factor

# åˆ›å»ºå¯¹è±¡
times_2 = Multiplier(2)
times_3 = Multiplier(3)

# åƒå‡½æ•°ä¸€æ ·è°ƒç”¨
print(times_2(5))  # 10
print(times_3(5))  # 15
```

---

## äº”ã€æŠ½è±¡ç±»å’Œæ¥å£

### 1. æŠ½è±¡ç±»

ä½¿ç”¨`abc`æ¨¡å—å®šä¹‰æŠ½è±¡ç±»ã€‚

```python
from abc import ABC, abstractmethod

class Animal(ABC):
    """æŠ½è±¡ç±»"""
    
    def __init__(self, name):
        self.name = name
    
    @abstractmethod
    def speak(self):
        """æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°"""
        pass
    
    @abstractmethod
    def move(self):
        """æŠ½è±¡æ–¹æ³•"""
        pass

class Dog(Animal):
    def speak(self):
        return f"{self.name}æ±ªæ±ªå«"
    
    def move(self):
        return f"{self.name}åœ¨è·‘"

class Bird(Animal):
    def speak(self):
        return f"{self.name}å½å½å«"
    
    def move(self):
        return f"{self.name}åœ¨é£"

# ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡ç±»
# animal = Animal("åŠ¨ç‰©")  # TypeError

# å¯ä»¥å®ä¾‹åŒ–å­ç±»
dog = Dog("æ—ºè´¢")
print(dog.speak())  # æ—ºè´¢æ±ªæ±ªå«
print(dog.move())   # æ—ºè´¢åœ¨è·‘
```

---

## å…­ã€å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šå›¾å½¢ç±»ç»§æ‰¿ä½“ç³»

```python
from abc import ABC, abstractmethod
import math

class Shape(ABC):
    """å›¾å½¢æŠ½è±¡ç±»"""
    
    @abstractmethod
    def area(self):
        """è®¡ç®—é¢ç§¯"""
        pass
    
    @abstractmethod
    def perimeter(self):
        """è®¡ç®—å‘¨é•¿"""
        pass

class Rectangle(Shape):
    """çŸ©å½¢"""
    
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)
    
    def __str__(self):
        return f"çŸ©å½¢(å®½={self.width}, é«˜={self.height})"

class Circle(Shape):
    """åœ†å½¢"""
    
    def __init__(self, radius):
        self.radius = radius
    
    def area(self):
        return math.pi * self.radius ** 2
    
    def perimeter(self):
        return 2 * math.pi * self.radius
    
    def __str__(self):
        return f"åœ†å½¢(åŠå¾„={self.radius})"

# æµ‹è¯•
shapes = [
    Rectangle(5, 3),
    Circle(4),
    Rectangle(10, 8)
]

for shape in shapes:
    print(shape)
    print(f"é¢ç§¯ï¼š{shape.area():.2f}")
    print(f"å‘¨é•¿ï¼š{shape.perimeter():.2f}")
    print("---")
```

### æ¡ˆä¾‹2ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ

```python
class Employee:
    """å‘˜å·¥åŸºç±»"""
    
    def __init__(self, name, employee_id):
        self.name = name
        self.employee_id = employee_id
    
    def get_salary(self):
        """è·å–å·¥èµ„ï¼ˆæŠ½è±¡æ–¹æ³•ï¼‰"""
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç°æ­¤æ–¹æ³•")
    
    def __str__(self):
        return f"{self.name}({self.employee_id})"

class FullTimeEmployee(Employee):
    """å…¨èŒå‘˜å·¥"""
    
    def __init__(self, name, employee_id, monthly_salary):
        super().__init__(name, employee_id)
        self.monthly_salary = monthly_salary
    
    def get_salary(self):
        return self.monthly_salary

class PartTimeEmployee(Employee):
    """å…¼èŒå‘˜å·¥"""
    
    def __init__(self, name, employee_id, hourly_rate, hours_worked):
        super().__init__(name, employee_id)
        self.hourly_rate = hourly_rate
        self.hours_worked = hours_worked
    
    def get_salary(self):
        return self.hourly_rate * self.hours_worked

class Manager(FullTimeEmployee):
    """ç»ç†"""
    
    def __init__(self, name, employee_id, monthly_salary, bonus):
        super().__init__(name, employee_id, monthly_salary)
        self.bonus = bonus
    
    def get_salary(self):
        return self.monthly_salary + self.bonus

# æµ‹è¯•
employees = [
    FullTimeEmployee("å¼ ä¸‰", "E001", 8000),
    PartTimeEmployee("æå››", "E002", 50, 160),
    Manager("ç‹äº”", "E003", 15000, 5000)
]

print("å‘˜å·¥å·¥èµ„è¡¨ï¼š")
for emp in employees:
    print(f"{emp}ï¼š{emp.get_salary()}å…ƒ")
```

---

## ä¸ƒã€çŸ¥è¯†ç‚¹æ€»ç»“

### âœ… æ ¸å¿ƒè¦ç‚¹

1. **ç»§æ‰¿**ï¼šä»£ç å¤ç”¨ï¼Œå»ºç«‹ç±»å±‚æ¬¡å…³ç³»
2. **å¤šæ€**ï¼šåŒä¸€æ–¹æ³•åœ¨ä¸åŒå¯¹è±¡ä¸Šçš„ä¸åŒè¡¨ç°
3. **å°è£…**ï¼šéšè—å†…éƒ¨å®ç°ï¼Œæä¾›å…¬å…±æ¥å£
4. **é­”æœ¯æ–¹æ³•**ï¼šè‡ªå®šä¹‰å¯¹è±¡è¡Œä¸º
5. **æŠ½è±¡ç±»**ï¼šå®šä¹‰æ¥å£è§„èŒƒ

### ğŸ“ é¢è¯•é‡ç‚¹

- ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹
- æ–¹æ³•é‡å†™å’Œsuper()çš„ä½¿ç”¨
- å¤šç»§æ‰¿çš„MROï¼ˆæ–¹æ³•è§£æé¡ºåºï¼‰
- å¤šæ€çš„å®ç°åŸç†
- @propertyè£…é¥°å™¨çš„ä½œç”¨
- å¸¸ç”¨é­”æœ¯æ–¹æ³•åŠå…¶ä½œç”¨

---

**ä¸Šä¸€ç« ï¼š** [é¢å‘å¯¹è±¡åˆçº§](03-é¢å‘å¯¹è±¡åˆçº§.md)  
**ä¸‹ä¸€ç« ï¼š** [æ¨¡å—ä¸åŒ…](05-æ¨¡å—ä¸åŒ….md) â†’
