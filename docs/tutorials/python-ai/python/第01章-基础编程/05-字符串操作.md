# 字符串操作

## 一、字符串的定义

### 1. 三种定义方式

字符串在Python中有多种定义形式:

```python
# 1. 单引号定义法
name = '你好'

# 2. 双引号定义法
name = "你好"

# 3. 三引号定义法（支持换行）
name = """你好
Python
世界"""
```

### 2. 引号的嵌套

```python
# 在字符串内包含双引号
name = '"你好"'
print(name)  # "你好"

# 在字符串内包含单引号
name = "'你好'"
print(name)  # '你好'

# 使用转义字符\解除引号的效用
name = "\"你好\""
print(name)  # "你好"
```

### 3. 转义字符

| 转义字符 | 说明 |
|---------|------|
| \n | 换行 |
| \t | 制表符（Tab） |
| \\ | 反斜杠 |
| \' | 单引号 |
| \" | 双引号 |

```python
print("Hello\nWorld")  # 换行
print("Name:\tAge")    # 制表符
print("C:\\Users")     # 反斜杠
```

---

## 二、字符串的拼接

### 1. 使用+号拼接

```python
first_name = "张"
last_name = "三"
full_name = first_name + last_name
print(full_name)  # 张三

# 拼接多个字符串
greeting = "你好，" + "我是" + full_name
print(greeting)  # 你好，我是张三
```

**注意：** 无法和非字符串类型进行拼接！

```python
# ❌ 错误示例
age = 18
print("我今年" + age + "岁")  # TypeError

# ✅ 正确示例
print("我今年" + str(age) + "岁")
```

---

## 三、字符串格式化

### 1. %格式化

#### 基本用法

```python
name = "懿轩"
message = "你好，%s" % name
print(message)  # 你好，懿轩
```

**占位符说明：**
- `%s`：字符串
- `%d`：整数
- `%f`：浮点数

#### 多个变量格式化

```python
name = "懿轩"
age = 18
height = 175.5

message = "我是%s，今年%d岁，身高%.1fcm" % (name, age, height)
print(message)  # 我是懿轩，今年18岁，身高175.5cm
```

#### 格式化控制

**m.n格式：**
- `m`：控制宽度（很少使用）
- `.n`：控制小数点精度，会进行四舍五入

```python
num1 = 11
num2 = 11.345

print("数字11宽度限制5，结果是:%5d" % num1)  # "   11"
print("数字11.345小数精度2，结果是:%.2f" % num2)  # "11.35"
print("数字11.345宽度7精度2，结果是:%7.2f" % num2)  # "  11.35"
```

---

### 2. f-string格式化（推荐）

Python 3.6+ 支持，更简洁直观。

```python
name = "懿轩"
age = 18
price = 19.99

# f-string格式化
print(f"我是{name}，今年{age}岁")
print(f"商品价格是{price}元")

# 支持表达式
print(f"1 + 1 = {1 + 1}")
print(f"明年我{age + 1}岁")
```

---

### 3. format()方法

```python
name = "懿轩"
age = 18

# 按位置
print("我是{}，今年{}岁".format(name, age))

# 按索引
print("我是{0}，今年{1}岁，{0}很高兴认识你".format(name, age))

# 按关键字
print("我是{name}，今年{age}岁".format(name=name, age=age))
```

---

## 四、字符串的索引

### 1. 下标访问

和列表、元组一样，字符串也可以通过下标进行访问：
- 从前向后，下标从0开始
- 从后向前，下标从-1开始

```python
my_str = "hello world"

# 通过下标索引取值
print(my_str[0])   # h
print(my_str[6])   # w
print(my_str[-1])  # d
print(my_str[-3])  # r
```

**注意：** 字符串是不可变的，不能通过下标修改字符！

```python
my_str = "hello"
my_str[0] = "H"  # ❌ TypeError: 'str' object does not support item assignment
```

---

## 五、字符串的常用方法

### 1. 查找方法

#### index() - 查找子串位置

```python
my_str = "hello world"
index = my_str.index("world")
print(index)  # 6

# 如果找不到，会报错
# index = my_str.index("python")  # ValueError
```

#### find() - 查找子串位置（推荐）

```python
my_str = "hello world"
index = my_str.find("world")
print(index)  # 6

# 如果找不到，返回-1
index = my_str.find("python")
print(index)  # -1
```

#### count() - 统计出现次数

```python
my_str = "hello world hello python"
count = my_str.count("hello")
print(count)  # 2
```

---

### 2. 替换方法

#### replace() - 替换字符串

```python
my_str = "hello world"
new_str = my_str.replace("world", "python")
print(new_str)  # hello python

# 原字符串不变
print(my_str)  # hello world

# 替换所有匹配项
my_str = "hello world hello python"
new_str = my_str.replace("hello", "hi")
print(new_str)  # hi world hi python
```

---

### 3. 分割方法

#### split() - 分割字符串

```python
my_str = "hello world python"
str_list = my_str.split(" ")
print(str_list)  # ['hello', 'world', 'python']
print(type(str_list))  # <class 'list'>

# 按其他分隔符分割
date = "2025-01-18"
date_list = date.split("-")
print(date_list)  # ['2025', '01', '18']
```

---

### 4. 去除空白

#### strip() - 去除两端空白

```python
my_str = "  hello world  "
new_str = my_str.strip()
print(f"'{new_str}'")  # 'hello world'

# 去除指定字符
my_str = "###hello###"
new_str = my_str.strip("#")
print(new_str)  # hello
```

#### lstrip() / rstrip() - 去除左/右空白

```python
my_str = "  hello world  "
print(f"'{my_str.lstrip()}'")  # 'hello world  '
print(f"'{my_str.rstrip()}'")  # '  hello world'
```

---

### 5. 大小写转换

```python
my_str = "Hello World"

print(my_str.upper())      # HELLO WORLD（转大写）
print(my_str.lower())      # hello world（转小写）
print(my_str.capitalize()) # Hello world（首字母大写）
print(my_str.title())      # Hello World（每个单词首字母大写）
```

---

### 6. 判断方法

```python
# 判断是否以指定字符串开头/结尾
my_str = "hello world"
print(my_str.startswith("hello"))  # True
print(my_str.endswith("world"))    # True

# 判断是否全是字母/数字
print("abc".isalpha())   # True
print("123".isdigit())   # True
print("abc123".isalnum()) # True

# 判断是否全是空白字符
print("   ".isspace())   # True
```

---

### 7. 连接方法

#### join() - 连接字符串

```python
# 用指定字符连接列表中的字符串
words = ["hello", "world", "python"]
result = " ".join(words)
print(result)  # hello world python

result = "-".join(words)
print(result)  # hello-world-python

# 连接字符串中的每个字符
result = "*".join("hello")
print(result)  # h*e*l*l*o
```

---

## 六、字符串切片

### 1. 切片语法

```python
字符串[start:end:step]
```

- `start`：起始索引（包含），默认为0
- `end`：结束索引（不包含），默认为字符串长度
- `step`：步长，默认为1

### 2. 切片示例

```python
my_str = "hello world"

# 基本切片
print(my_str[0:5])    # hello
print(my_str[6:11])   # world
print(my_str[:5])     # hello（省略start）
print(my_str[6:])     # world（省略end）

# 负数索引
print(my_str[-5:])    # world
print(my_str[:-6])    # hello

# 步长切片
print(my_str[::2])    # hlowrd（步长为2）
print(my_str[::-1])   # dlrow olleh（反转字符串）
```

---

## 七、实战练习

### 练习1：字符串处理

```python
# 用户输入处理
user_input = input("请输入内容：")

# 去除两端空白
user_input = user_input.strip()

# 转换为小写
user_input = user_input.lower()

# 替换敏感词
user_input = user_input.replace("敏感词", "***")

print(f"处理后的内容：{user_input}")
```

### 练习2：统计字符

```python
text = "Hello World! Welcome to Python Programming."

# 统计字符数量
print(f"总字符数：{len(text)}")
print(f"字母o出现次数：{text.count('o')}")
print(f"单词数量：{len(text.split())}")

# 转换大小写
print(f"全部大写：{text.upper()}")
print(f"全部小写：{text.lower()}")
```

### 练习3：提取信息

```python
# 从邮箱中提取用户名和域名
email = "zhangsan@example.com"

# 分割邮箱
parts = email.split("@")
username = parts[0]
domain = parts[1]

print(f"用户名：{username}")
print(f"域名：{domain}")

# 或者使用索引
at_index = email.index("@")
username = email[:at_index]
domain = email[at_index+1:]

print(f"用户名：{username}")
print(f"域名：{domain}")
```

---

## 八、字符串的特点

经过学习，可以总结出字符串有如下特点:

- ✅ 可以容纳多个字符
- ✅ 数据是有序存储的（下标索引）
- ✅ 允许重复字符存在
- ❌ 不可以修改（增加或删除字符等）
- ✅ 支持for循环遍历

**注意：** 如果必须要修改，只能得到一个新的字符串！

---

## 九、知识点总结

### ✅ 核心要点

1. **字符串定义**：单引号、双引号、三引号
2. **字符串格式化**：%格式化、f-string（推荐）
3. **常用方法**：find、replace、split、strip、join
4. **字符串切片**：[start:end:step]
5. **不可变性**：字符串不能直接修改

### 📝 面试重点

- 字符串是不可变对象
- f-string vs %格式化
- 常用字符串方法的使用
- 字符串切片操作

---

**上一章：** [流程控制](04-流程控制.md)  
**下一章：** [列表与元组](06-列表与元组.md) →
