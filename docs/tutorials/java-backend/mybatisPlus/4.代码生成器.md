---
title: 代码生成器
---

# 代码生成器

## 一、代码生成器简介

### 1.1 什么是代码生成器？

**AutoGenerator** 是 MyBatis-Plus 的代码生成器，通过配置可以快速生成 Entity、Mapper、Service、Controller 等代码。

**优点：**
- ✅ 快速开发
- ✅ 统一规范
- ✅ 减少重复劳动
- ✅ 提高效率

---

## 二、快速开始

### 2.1 添加依赖

```xml
<dependencies>
    <!-- MyBatis-Plus Generator -->
    <dependency>
        <groupId>com.baomidou</groupId>
        <artifactId>mybatis-plus-generator</artifactId>
        <version>3.5.4.1</version>
    </dependency>
    
    <!-- 模板引擎（选择一个） -->
    <!-- Velocity（默认） -->
    <dependency>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity-engine-core</artifactId>
        <version>2.3</version>
    </dependency>
    
    <!-- 或 Freemarker -->
    <!--
    <dependency>
        <groupId>org.freemarker</groupId>
        <artifactId>freemarker</artifactId>
    </dependency>
    -->
    
    <!-- 或 Beetl -->
    <!--
    <dependency>
        <groupId>com.ibeetl</groupId>
        <artifactId>beetl</artifactId>
    </dependency>
    -->
</dependencies>
```

### 2.2 基本配置

```java
public class CodeGenerator {
    
    public static void main(String[] args) {
        // 数据源配置
        DataSourceConfig.Builder dataSourceConfig = new DataSourceConfig.Builder(
            "jdbc:mysql://localhost:3306/mybatis_plus",
            "root",
            "123456"
        );
        
        // 全局配置
        GlobalConfig globalConfig = new GlobalConfig.Builder()
            .outputDir(System.getProperty("user.dir") + "/src/main/java")
            .author("作者")
            .enableSwagger()  // 开启 Swagger
            .build();
        
        // 包配置
        PackageConfig packageConfig = new PackageConfig.Builder()
            .parent("com.example")
            .entity("entity")
            .mapper("mapper")
            .service("service")
            .controller("controller")
            .build();
        
        // 策略配置
        StrategyConfig strategyConfig = new StrategyConfig.Builder()
            .addInclude("user", "order")  // 需要生成的表
            .addTablePrefix("t_", "c_")   // 表前缀
            .entityBuilder()
                .enableLombok()           // 使用 Lombok
                .enableTableFieldAnnotation()  // 字段注解
            .controllerBuilder()
                .enableRestStyle()        // RestController
            .build();
        
        // 执行生成
        AutoGenerator generator = new AutoGenerator(dataSourceConfig.build());
        generator.global(globalConfig);
        generator.packageInfo(packageConfig);
        generator.strategy(strategyConfig);
        generator.execute();
    }
}
```

---

## 三、全局配置

### 3.1 GlobalConfig

```java
GlobalConfig globalConfig = new GlobalConfig.Builder()
    // 输出目录
    .outputDir(System.getProperty("user.dir") + "/src/main/java")
    
    // 作者
    .author("张三")
    
    // 是否打开输出目录
    .fileOverride()
    
    // 开启 Swagger
    .enableSwagger()
    
    // 时间策略
    .dateType(DateType.TIME_PACK)
    
    // 注释日期格式
    .commentDate("yyyy-MM-dd")
    
    .build();
```

---

## 四、数据源配置

### 4.1 DataSourceConfig

```java
DataSourceConfig.Builder dataSourceConfig = new DataSourceConfig.Builder(
    "jdbc:mysql://localhost:3306/mybatis_plus?useUnicode=true&characterEncoding=utf8",
    "root",
    "123456"
)
.databaseQueryClass(DatabaseQuery.class)  // 数据库查询类
.schema("mybatis_plus")                   // 数据库 schema
.typeConvert(new MySqlTypeConvert())      // 类型转换
.build();
```

---

## 五、包配置

### 5.1 PackageConfig

```java
PackageConfig packageConfig = new PackageConfig.Builder()
    // 父包名
    .parent("com.example")
    
    // 各层包名
    .entity("entity")
    .mapper("mapper")
    .service("service")
    .serviceImpl("service.impl")
    .controller("controller")
    .xml("mapper.xml")
    
    // 路径配置
    .pathInfo(Collections.singletonMap(
        OutputFile.xml, 
        System.getProperty("user.dir") + "/src/main/resources/mapper"
    ))
    
    .build();
```

---

## 六、策略配置

### 6.1 表配置

```java
StrategyConfig strategyConfig = new StrategyConfig.Builder()
    // 包含的表
    .addInclude("user", "order", "product")
    
    // 排除的表
    .addExclude("sys_log")
    
    // 表前缀
    .addTablePrefix("t_", "c_")
    
    // 表后缀
    .addTableSuffix("_table")
    
    // 字段前缀
    .addFieldPrefix("f_")
    
    // 字段后缀
    .addFieldSuffix("_field")
    
    .build();
```

### 6.2 Entity配置

```java
StrategyConfig strategyConfig = new StrategyConfig.Builder()
    .entityBuilder()
        // 开启 Lombok
        .enableLombok()
        
        // 开启链式模型
        .enableChainModel()
        
        // 开启字段注解
        .enableTableFieldAnnotation()
        
        // 逻辑删除字段
        .logicDeleteColumnName("deleted")
        
        // 乐观锁字段
        .versionColumnName("version")
        
        // 填充字段
        .addTableFills(new Column("create_time", FieldFill.INSERT))
        .addTableFills(new Column("update_time", FieldFill.INSERT_UPDATE))
        
        // 父类
        .superClass(BaseEntity.class)
        
        // 忽略父类字段
        .addSuperEntityColumns("id", "create_time", "update_time")
        
        // 格式化文件名
        .formatFileName("%s")
    .build();
```

### 6.3 Mapper配置

```java
StrategyConfig strategyConfig = new StrategyConfig.Builder()
    .mapperBuilder()
        // 开启 @Mapper 注解
        .enableMapperAnnotation()
        
        // 开启 BaseResultMap
        .enableBaseResultMap()
        
        // 开启 BaseColumnList
        .enableBaseColumnList()
        
        // 父类
        .superClass(BaseMapper.class)
        
        // 格式化文件名
        .formatMapperFileName("%sMapper")
        .formatXmlFileName("%sMapper")
    .build();
```

### 6.4 Service配置

```java
StrategyConfig strategyConfig = new StrategyConfig.Builder()
    .serviceBuilder()
        // 格式化文件名
        .formatServiceFileName("%sService")
        .formatServiceImplFileName("%sServiceImpl")
    .build();
```

### 6.5 Controller配置

```java
StrategyConfig strategyConfig = new StrategyConfig.Builder()
    .controllerBuilder()
        // 开启 RestController
        .enableRestStyle()
        
        // 开启驼峰转连字符
        .enableHyphenStyle()
        
        // 父类
        .superClass(BaseController.class)
        
        // 格式化文件名
        .formatFileName("%sController")
    .build();
```

---

## 七、完整示例

```java
public class CodeGenerator {
    
    public static void main(String[] args) {
        // 数据源配置
        DataSourceConfig dataSourceConfig = new DataSourceConfig.Builder(
            "jdbc:mysql://localhost:3306/mybatis_plus",
            "root",
            "123456"
        ).build();
        
        // 全局配置
        GlobalConfig globalConfig = new GlobalConfig.Builder()
            .outputDir(System.getProperty("user.dir") + "/src/main/java")
            .author("张三")
            .enableSwagger()
            .fileOverride()
            .dateType(DateType.TIME_PACK)
            .build();
        
        // 包配置
        Map<OutputFile, String> pathInfo = new HashMap<>();
        pathInfo.put(OutputFile.xml, System.getProperty("user.dir") + "/src/main/resources/mapper");
        
        PackageConfig packageConfig = new PackageConfig.Builder()
            .parent("com.example")
            .entity("entity")
            .mapper("mapper")
            .service("service")
            .serviceImpl("service.impl")
            .controller("controller")
            .pathInfo(pathInfo)
            .build();
        
        // 策略配置
        StrategyConfig strategyConfig = new StrategyConfig.Builder()
            .addInclude("user")
            .addTablePrefix("t_")
            .entityBuilder()
                .enableLombok()
                .enableTableFieldAnnotation()
                .logicDeleteColumnName("deleted")
                .addTableFills(new Column("create_time", FieldFill.INSERT))
                .addTableFills(new Column("update_time", FieldFill.INSERT_UPDATE))
            .mapperBuilder()
                .enableMapperAnnotation()
                .enableBaseResultMap()
            .serviceBuilder()
                .formatServiceFileName("%sService")
                .formatServiceImplFileName("%sServiceImpl")
            .controllerBuilder()
                .enableRestStyle()
            .build();
        
        // 模板引擎配置
        VelocityTemplateEngine templateEngine = new VelocityTemplateEngine();
        
        // 执行生成
        AutoGenerator generator = new AutoGenerator(dataSourceConfig);
        generator.global(globalConfig);
        generator.packageInfo(packageConfig);
        generator.strategy(strategyConfig);
        generator.execute(templateEngine);
    }
}
```

---

## 八、总结

✅ **本章学习内容：**
- 代码生成器简介
- 全局配置
- 数据源配置
- 包配置
- 策略配置
- 完整示例

✅ **核心要点：**
- 使用代码生成器快速开发
- 合理配置策略
- 统一代码规范

**下一章预告：** 我们将学习分页插件。
