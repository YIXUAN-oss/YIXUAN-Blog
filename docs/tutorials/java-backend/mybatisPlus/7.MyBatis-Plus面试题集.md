---
title: MyBatis-Plus面试题集
---

# MyBatis-Plus面试题集

## 一、基础概念

### 1. 什么是MyBatis-Plus？

**答：**

MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。

**核心特性：**
- 无侵入：只做增强不做改变
- 损耗小：启动即会自动注入基本 CRUD
- 强大的 CRUD 操作
- 支持 Lambda 形式调用
- 内置代码生成器
- 内置分页插件
- 支持多种数据库

**官网：** https://baomidou.com/

---

### 2. MyBatis-Plus和MyBatis的区别？

**答：**

| 特性 | MyBatis | MyBatis-Plus |
|------|---------|--------------|
| **XML文件** | 必需 | 可选 |
| **CRUD方法** | 需手写 | 自动提供 |
| **代码量** | 多 | 少 |
| **开发效率** | 中 | 高 |
| **分页** | 需插件 | 内置插件 |
| **代码生成** | 需配置 | 一键生成 |

**核心优势：**
- 减少 80% 的代码量
- 保留 MyBatis 的灵活性
- 提供强大的条件构造器

---

### 3. MyBatis-Plus会侵入MyBatis吗？

**答：**

**不会。** MyBatis-Plus 只是增强工具，不修改 MyBatis 核心功能。

**原因：**
- 通过 BaseMapper 提供通用方法
- 通过 SQL 注入器注入方法
- 不影响原有 MyBatis 功能
- 可以和 MyBatis 混用

---

## 二、CRUD接口

### 4. BaseMapper提供了哪些方法？

**答：**

**Insert：**
- `int insert(T entity)`

**Delete：**
- `int deleteById(Serializable id)`
- `int deleteBatchIds(Collection<? extends Serializable> idList)`
- `int delete(Wrapper<T> wrapper)`
- `int deleteByMap(Map<String, Object> columnMap)`

**Update：**
- `int updateById(T entity)`
- `int update(T entity, Wrapper<T> updateWrapper)`

**Select：**
- `T selectById(Serializable id)`
- `List<T> selectBatchIds(Collection<? extends Serializable> idList)`
- `List<T> selectList(Wrapper<T> queryWrapper)`
- `Long selectCount(Wrapper<T> queryWrapper)`
- `IPage<T> selectPage(IPage<T> page, Wrapper<T> queryWrapper)`

---

### 5. Service层和Mapper层有什么区别？

**答：**

**Mapper层（BaseMapper）：**
- 基础 CRUD 方法
- 单表操作
- 方法少

**Service层（IService）：**
- 更多 CRUD 方法
- 批量操作
- 链式调用
- 更高级的功能

**示例：**
```java
// Mapper层
userMapper.insert(user);

// Service层
userService.save(user);              // 保存
userService.saveBatch(users);        // 批量保存
userService.saveOrUpdate(user);      // 保存或更新
```

---

## 三、条件构造器

### 6. Wrapper有哪几种？

**答：**

| 类型 | 说明 | 推荐度 |
|------|------|--------|
| QueryWrapper | 普通查询 | ★★★ |
| UpdateWrapper | 普通更新 | ★★★ |
| LambdaQueryWrapper | Lambda查询 | ★★★★★ |
| LambdaUpdateWrapper | Lambda更新 | ★★★★★ |

**推荐使用 Lambda 方式：**
```java
// 普通方式
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.eq("username", "张三");

// Lambda方式（推荐）
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getUsername, "张三");
```

**Lambda 优点：**
- 类型安全
- 编译期检查
- 重构友好

---

### 7. 如何实现动态条件查询？

**答：**

**使用 condition 参数：**
```java
String username = "张三";
Integer minAge = 20;
Integer maxAge = null;

LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(username != null, User::getUsername, username)
       .ge(minAge != null, User::getAge, minAge)
       .le(maxAge != null, User::getAge, maxAge);

// 只会添加非null的条件
```

**实战案例：**
```java
public List<User> search(String username, Integer minAge, Integer maxAge) {
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    wrapper.like(StringUtils.isNotBlank(username), User::getUsername, username)
           .ge(minAge != null, User::getAge, minAge)
           .le(maxAge != null, User::getAge, maxAge)
           .orderByDesc(User::getCreateTime);
    
    return userMapper.selectList(wrapper);
}
```

---

## 四、分页插件

### 8. 如何使用分页插件？

**答：**

**1. 配置插件**
```java
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
    return interceptor;
}
```

**2. 使用分页**
```java
Page<User> page = new Page<>(1, 10);  // 第1页，每页10条
userMapper.selectPage(page, null);

List<User> records = page.getRecords();  // 当前页数据
long total = page.getTotal();            // 总记录数
```

---

### 9. 如何优化分页性能？

**答：**

**1. 优化 COUNT 查询**
```java
Page<User> page = new Page<>(1, 10);
page.setOptimizeCountSql(true);  // 移除 ORDER BY
```

**2. 不查询总数**
```java
Page<User> page = new Page<>(1, 10);
page.setSearchCount(false);  // 不查询总数
```

**3. 手动设置总数**
```java
// 第一次查询总数
Page<User> page = new Page<>(1, 10);
userMapper.selectPage(page, null);
long total = page.getTotal();

// 后续翻页不再查询总数
Page<User> page2 = new Page<>(2, 10);
page2.setSearchCount(false);
page2.setTotal(total);
```

---

## 五、高级功能

### 10. 什么是逻辑删除？如何配置？

**答：**

**逻辑删除：** 删除数据时不真正删除，而是标记为已删除。

**配置：**
```yaml
mybatis-plus:
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
```

**实体类：**
```java
@TableLogic
private Integer deleted;
```

**执行删除：**
```java
userMapper.deleteById(1L);
// 实际SQL：UPDATE user SET deleted=1 WHERE id=1
```

---

### 11. 什么是乐观锁？如何使用？

**答：**

**乐观锁：** 通过版本号机制，解决并发更新问题。

**配置插件：**
```java
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());
    return interceptor;
}
```

**实体类：**
```java
@Version
private Integer version;
```

**使用：**
```java
// 查询
User user = userMapper.selectById(1L);  // version=1

// 更新
user.setStock(90);
userMapper.updateById(user);
// SQL: UPDATE user SET stock=90, version=2 WHERE id=1 AND version=1
```

---

### 12. 如何实现自动填充？

**答：**

**1. 实体类配置**
```java
@TableField(fill = FieldFill.INSERT)
private Date createTime;

@TableField(fill = FieldFill.INSERT_UPDATE)
private Date updateTime;
```

**2. 创建处理器**
```java
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    
    @Override
    public void insertFill(MetaObject metaObject) {
        this.strictInsertFill(metaObject, "createTime", Date.class, new Date());
        this.strictInsertFill(metaObject, "updateTime", Date.class, new Date());
    }
    
    @Override
    public void updateFill(MetaObject metaObject) {
        this.strictUpdateFill(metaObject, "updateTime", Date.class, new Date());
    }
}
```

---

## 六、代码生成器

### 13. 如何使用代码生成器？

**答：**

**添加依赖：**
```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-generator</artifactId>
    <version>3.5.4.1</version>
</dependency>
```

**配置和执行：**
```java
DataSourceConfig dataSourceConfig = new DataSourceConfig.Builder(
    "jdbc:mysql://localhost:3306/mybatis_plus",
    "root",
    "123456"
).build();

GlobalConfig globalConfig = new GlobalConfig.Builder()
    .outputDir(System.getProperty("user.dir") + "/src/main/java")
    .author("作者")
    .enableSwagger()
    .build();

AutoGenerator generator = new AutoGenerator(dataSourceConfig);
generator.global(globalConfig);
generator.execute();
```

---

## 七、实战经验

### 14. MyBatis-Plus如何防止SQL注入？

**答：**

**MyBatis-Plus 使用预编译：**
```java
// Wrapper 自动使用预编译
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getUsername, userInput);  // 自动预编译
```

**注意事项：**
- Wrapper 默认安全
- 避免使用字符串拼接
- 动态列名需要白名单校验

---

### 15. MyBatis-Plus和JPA的区别？

**答：**

| 特性 | MyBatis-Plus | JPA |
|------|--------------|-----|
| **类型** | 半自动ORM | 全自动ORM |
| **SQL控制** | 完全控制 | 自动生成 |
| **学习曲线** | 平缓 | 陡峭 |
| **性能优化** | 容易 | 困难 |
| **复杂查询** | 擅长 | 较弱 |

**选择建议：**
- 需要 SQL 优化 → MyBatis-Plus
- 简单 CRUD → JPA

---

## 八、总结

### 高频考点

✅ **必须掌握：**
- MyBatis-Plus 核心特性
- BaseMapper 和 IService
- 条件构造器（Lambda 方式）
- 分页插件使用
- 逻辑删除
- 乐观锁

✅ **加分项：**
- 代码生成器
- 性能优化
- 自定义通用方法
- 多租户

### 面试技巧

1. **对比说明** - MyBatis-Plus vs MyBatis
2. **举例说明** - 代码示例
3. **性能优化** - 分页优化
4. **项目经验** - 实际使用场景

---

**恭喜你完成 MyBatis-Plus 学习！🎉**
