# Java IOæµä¸æ–‡ä»¶æ“ä½œ

> **æœ¬ç« é‡ç‚¹ï¼š** å­—èŠ‚æµã€å­—ç¬¦æµã€ç¼“å†²æµã€å¯¹è±¡æµã€Propertiesé…ç½®æ–‡ä»¶
>
> **é¢è¯•é¢‘ç‡ï¼š** â­â­â­â­â­

---

## ç›®å½•

- [ä¸€ã€æ–‡ä»¶åŸºç¡€](#ä¸€æ–‡ä»¶åŸºç¡€)
- [äºŒã€å¸¸ç”¨æ–‡ä»¶æ“ä½œ](#äºŒå¸¸ç”¨æ–‡ä»¶æ“ä½œ)
- [ä¸‰ã€IOæµåŸç†](#ä¸‰ioæµåŸç†)
- [å››ã€å­—èŠ‚æµä¸å­—ç¬¦æµ](#å››å­—èŠ‚æµä¸å­—ç¬¦æµ)
- [äº”ã€ç¼“å†²æµä¸å¯¹è±¡æµ](#äº”ç¼“å†²æµä¸å¯¹è±¡æµ)
- [å…­ã€å…¶ä»–å¸¸ç”¨æµ](#å…­å…¶ä»–å¸¸ç”¨æµ)
- [ä¸ƒã€é¢è¯•å¸¸è§é—®é¢˜](#ä¸ƒé¢è¯•å¸¸è§é—®é¢˜)

---

## ä¸€ã€æ–‡ä»¶åŸºç¡€

### 1.1 æ–‡ä»¶çš„æ¦‚å¿µ

**æ–‡ä»¶ï¼š** ä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼Œå¯ä»¥æ˜¯æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚

**æ–‡ä»¶æµï¼š** æ–‡ä»¶åœ¨ç¨‹åºä¸­æ˜¯ä»¥æµçš„å½¢å¼æ¥æ“ä½œçš„ã€‚

```
æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰ â†’ è¾“å…¥æµ â†’ ç¨‹åº â†’ è¾“å‡ºæµ â†’ ç›®çš„åœ°ï¼ˆæ–‡ä»¶ï¼‰
```

**æµçš„åˆ†ç±»ï¼š**

| åˆ†ç±»ç»´åº¦   | ç±»å‹   | è¯´æ˜                           |
| ---------- | ------ | ------------------------------ |
| **æŒ‰æ–¹å‘** | è¾“å…¥æµ | è¯»å–æ•°æ®åˆ°ç¨‹åº                 |
|            | è¾“å‡ºæµ | ä»ç¨‹åºå†™å‡ºæ•°æ®                 |
| **æŒ‰å•ä½** | å­—èŠ‚æµ | å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ç­‰ï¼‰ |
|            | å­—ç¬¦æµ | å¤„ç†æ–‡æœ¬æ–‡ä»¶                   |
| **æŒ‰è§’è‰²** | èŠ‚ç‚¹æµ | ç›´æ¥æ“ä½œæ–‡ä»¶                   |
|            | å¤„ç†æµ | åŒ…è£…èŠ‚ç‚¹æµï¼Œæä¾›æ›´å¤šåŠŸèƒ½       |

---

## äºŒã€å¸¸ç”¨æ–‡ä»¶æ“ä½œ

### 2.1 Fileç±»ç®€ä»‹

**Fileç±»ï¼š** ä»£è¡¨æ–‡ä»¶å’Œç›®å½•è·¯å¾„åçš„æŠ½è±¡è¡¨ç¤ºã€‚

**ä¸‰ç§æ„é€ æ–¹æ³•ï¼š**

| æ„é€ æ–¹æ³•                            | è¯´æ˜                  | ç¤ºä¾‹                               |
| ----------------------------------- | --------------------- | ---------------------------------- |
| `File(String pathname)`             | æ ¹æ®è·¯å¾„æ„å»º          | `new File("e:\\news1.txt")`        |
| `File(File parent, String child)`   | æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶+å­è·¯å¾„ | `new File(file, "news2.txt")`      |
| `File(String parent, String child)` | æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„     | `new File("e:\\dir", "news3.txt")` |

### 2.2 åˆ›å»ºæ–‡ä»¶

```java
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.IOException;

public class Main{
    public static void main(String[] args) {

    }

    //æ–¹å¼ä¸€ï¼šnew File(String pathname)
    //è¿™æ˜¯ä¸€ä¸ªæ–°å·¥ç¨‹éœ€è¦å¼•å…¥ä¸€ä¸‹ï¼Œ@Testï¼Œçº¢è‰²ç¯ç‚¹ç¬¬äºŒä¸ªï¼Œç¨ç­‰
    @Test
    public void create01(){
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news1.txt";
        File file = new File(filePath);

        try {
            file.createNewFile();
            System.out.println("æ–‡ä»¶åˆ›å»ºæˆåŠŸ");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    //æ–¹å¼äºŒï¼šnew File(File parent,String child)
    //E:\IDEA code JAVA\wenjian\news2.txt
    @Test
    public void create02(){
        //æ„å»ºçˆ¶ç›®å½•æ–‡ä»¶
        File parentfile = new File("E:\\IDEA code JAVA\\wenjian");
        //æ„å»ºå­è·¯å¾„
        String filePath = "news2.txt";
        File file = new File(parentfile, filePath);

        //è¿™é‡Œæ˜¯åˆ›å»ºæ–‡ä»¶
        try {
            file.createNewFile();
            System.out.println("æ–‡ä»¶åˆ›å»ºæˆåŠŸ");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    //æ–¹å¼ä¸‰ï¼šnew File(String parent,String child)
    @Test
    public void create03(){
        String parentPath = "E:\\IDEA code JAVA\\wenjian";
        String filePath = "news2.txt";
        File file = new File(parentPath, filePath);

        //è¿™é‡Œæ˜¯åˆ›å»ºæ–‡ä»¶
        try {
            file.createNewFile();
            System.out.println("æ–‡ä»¶åˆ›å»ºæˆåŠŸ");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```



### 2.3 è·å–æ–‡ä»¶ä¿¡æ¯

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                | è¯´æ˜                 | è¿”å›ç±»å‹ |
| ------------------- | -------------------- | -------- |
| `getName()`         | è·å–æ–‡ä»¶å           | String   |
| `getAbsolutePath()` | è·å–ç»å¯¹è·¯å¾„         | String   |
| `getParent()`       | è·å–çˆ¶ç›®å½•           | String   |
| `length()`          | è·å–æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ | long     |
| `exists()`          | åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨     | boolean  |
| `isFile()`          | åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶       | boolean  |
| `isDirectory()`     | åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•       | boolean  |

```java
//è·å–æ–‡ä»¶çš„ä¿¡æ¯
@Test
public void info(){
//å…ˆåˆ›å»ºæ–‡ä»¶å¯¹è±¡
File file = new File("e:\\news1.txt");

    //è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”ä¿¡æ¯
    //getNameã€getAbsolutePathã€getParentã€lengthã€existsã€isFileã€isDirectory
    System.out.println("æ–‡ä»¶ç»å¯¹è·¯å¾„="+ file.getAbsolutePath());
    System.out.println("æ–‡ä»¶åå­—="+ file.getName());
    System.out.println("æ–‡ä»¶çˆ¶çº§ç›®å½•="+ file.getParent());
    System.out.println("æ–‡ä»¶å¤§å°(å­—èŠ‚)="+ file.length());
    System.out.println("æ–‡ä»¶æ˜¯å¦å­˜åœ¨="+ file.exists());
    System.out.println("æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶="+ file.isFile());
    System.out.println("æ˜¯ä¸æ˜¯ä¸€ä¸ªç›®å½•="+ file.isDirectory());
}
```



### 2.4 ç›®å½•æ“ä½œå’Œæ–‡ä»¶åˆ é™¤

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•       | è¯´æ˜                 | æ³¨æ„äº‹é¡¹       |
| ---------- | -------------------- | -------------- |
| `mkdir()`  | åˆ›å»ºä¸€çº§ç›®å½•         | çˆ¶ç›®å½•å¿…é¡»å­˜åœ¨ |
| `mkdirs()` | åˆ›å»ºå¤šçº§ç›®å½•ï¼ˆæ¨èï¼‰ | è‡ªåŠ¨åˆ›å»ºçˆ¶ç›®å½• |
| `delete()` | åˆ é™¤æ–‡ä»¶æˆ–ç©ºç›®å½•     | ç›®å½•å¿…é¡»ä¸ºç©º   |

**é‡è¦æç¤ºï¼š**

- âš ï¸ åœ¨Javaä¸­ï¼Œç›®å½•ä¹Ÿè¢«å½“åšæ–‡ä»¶
- âš ï¸ `delete()`åªèƒ½åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶
- âš ï¸ åˆ é™¤å‰å»ºè®®å…ˆåˆ¤æ–­`exists()`

```java
//åœ¨javaç¼–ç¨‹ä¸­ï¼Œç›®å½•ä¹Ÿè¢«å½“æˆæ–‡ä»¶ delete åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {

    }

    //æŸ¥çœ‹E:\IDEA code JAVA\wenjian\news1.txtæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±åˆ é™¤
    @Test
    public void m01() {
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news1.txt";
        File file = new File(filePath);

        if (file.exists()) {
            if (file.delete()) {
                System.out.println(filePath + "åˆ é™¤æˆåŠŸ");
            } else {
                System.out.println(filePath + "åˆ é™¤å¤±è´¥");
            }
        } else {
            System.out.println("è¯¥æ–‡ä»¶ä¸å­˜åœ¨");
        }
    }
}
```

```java
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {
        
    }
    
    //åˆ›å»ºç›®å½• mkdir åˆ›å»ºä¸€çº§ç›®å½•ã€mkdirs åˆ›å»ºå¤šçº§ç›®å½•
    @Test
    public void m01() {
       String directoryPath = "E:\\demo";
       File file = new File(directoryPath);

       if(file.exists()){
           System.out.println(directoryPath + "ç›®å½•å­˜åœ¨");
       }else{
           if(file.mkdir()){
               System.out.println(directoryPath + "ç›®å½•åˆ›å»ºæˆåŠŸ");
           }else{
               System.out.println(directoryPath + "ç›®å½•åˆ›å»ºå¤±è´¥");
           }
       }
    }
}
```

```java
String directoryPath = "E:\\demo\\a\\b\\c";
ç”¨file.mkdirs()
```

---

## ä¸‰ã€IOæµåŸç†

### 3.1 IOæµåŸç†

**IOæµï¼ˆInput/Output Streamï¼‰ï¼š** ç”¨äºå¤„ç†æ•°æ®ä¼ è¾“ã€‚

**åŸç†ï¼š**

```
è¾“å…¥ï¼šæ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰ â†’ InputStream/Reader â†’ ç¨‹åºï¼ˆå†…å­˜ï¼‰
è¾“å‡ºï¼šç¨‹åºï¼ˆå†…å­˜ï¼‰ â†’ OutputStream/Writer â†’ ç›®çš„åœ°ï¼ˆæ–‡ä»¶ï¼‰
```

**ç‰¹ç‚¹ï¼š**

- ğŸ“– IOæµä»¥æµçš„æ–¹å¼è¿›è¡Œæ•°æ®ä¼ è¾“
- ğŸ“– å•å‘ä¼ è¾“ï¼šè¾“å…¥æµåªè¯»ï¼Œè¾“å‡ºæµåªå†™
- ğŸ“– å…ˆè¿›å…ˆå‡ºåŸåˆ™

### 3.2 æµçš„ä½“ç³»ç»“æ„

**Java IOæµå››å¤§æŠ½è±¡åŸºç±»ï¼š**

| ç±»å‹       | å­—èŠ‚æµ       | å­—ç¬¦æµ |
| ---------- | ------------ | ------ |
| **è¾“å…¥æµ** | InputStream  | Reader |
| **è¾“å‡ºæµ** | OutputStream | Writer |

**IOæµä½“ç³»å›¾ï¼š**

```
å­—èŠ‚æµï¼š
â”œâ”€ InputStream (æŠ½è±¡ç±»)
â”‚  â”œâ”€ FileInputStream        (æ–‡ä»¶)
â”‚  â”œâ”€ BufferedInputStream    (ç¼“å†²)
â”‚  â””â”€ ObjectInputStream      (å¯¹è±¡)
â””â”€ OutputStream (æŠ½è±¡ç±»)
   â”œâ”€ FileOutputStream       (æ–‡ä»¶)
   â”œâ”€ BufferedOutputStream   (ç¼“å†²)
   â””â”€ ObjectOutputStream     (å¯¹è±¡)

å­—ç¬¦æµï¼š
â”œâ”€ Reader (æŠ½è±¡ç±»)
â”‚  â”œâ”€ FileReader            (æ–‡ä»¶)
â”‚  â”œâ”€ BufferedReader        (ç¼“å†²)
â”‚  â””â”€ InputStreamReader     (è½¬æ¢)
â””â”€ Writer (æŠ½è±¡ç±»)
   â”œâ”€ FileWriter            (æ–‡ä»¶)
   â”œâ”€ BufferedWriter        (ç¼“å†²)
   â””â”€ OutputStreamWriter    (è½¬æ¢)
```

### 3.3 å­—èŠ‚æµ vs å­—ç¬¦æµ

**å¯¹æ¯”ï¼š**

| ç‰¹æ€§         | å­—èŠ‚æµ                   | å­—ç¬¦æµ               |
| ------------ | ------------------------ | -------------------- |
| **åŸºæœ¬å•ä½** | å­—èŠ‚ï¼ˆbyteï¼‰             | å­—ç¬¦ï¼ˆcharï¼‰         |
| **é€‚ç”¨åœºæ™¯** | äºŒè¿›åˆ¶æ–‡ä»¶               | æ–‡æœ¬æ–‡ä»¶             |
| **å…¸å‹æ–‡ä»¶** | å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€exe    | txtã€javaã€htmlã€xml |
| **åŸºç±»**     | InputStream/OutputStream | Reader/Writer        |
| **ç¼–ç é—®é¢˜** | æ— éœ€è€ƒè™‘                 | éœ€è¦è€ƒè™‘å­—ç¬¦ç¼–ç      |
| **æ•ˆç‡**     | ä¸€èˆ¬                     | æ–‡æœ¬å¤„ç†æ•ˆç‡æ›´é«˜     |

**é€‰æ‹©å»ºè®®ï¼š**

- âœ… **å­—èŠ‚æµ**ï¼šå¤„ç†éæ–‡æœ¬æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰
- âœ… **å­—ç¬¦æµ**ï¼šå¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼ˆtxtã€javaã€xmlç­‰ï¼‰

### 3.4 èŠ‚ç‚¹æµ vs å¤„ç†æµ

**èŠ‚ç‚¹æµï¼ˆNode Streamï¼‰ï¼š** ç›´æ¥æ“ä½œæ•°æ®æº

| ç±»å‹     | å­—èŠ‚æµ                                     | å­—ç¬¦æµ                          |
| -------- | ------------------------------------------ | ------------------------------- |
| **æ–‡ä»¶** | FileInputStream/FileOutputStream           | FileReader/FileWriter           |
| **æ•°ç»„** | ByteArrayInputStream/ByteArrayOutputStream | CharArrayReader/CharArrayWriter |
| **ç®¡é“** | PipedInputStream/PipedOutputStream         | PipedReader/PipedWriter         |

**å¤„ç†æµï¼ˆWrapper Streamï¼‰ï¼š** åŒ…è£…èŠ‚ç‚¹æµï¼Œæä¾›æ›´å¤šåŠŸèƒ½

| åŠŸèƒ½     | å­—èŠ‚æµ                                   | å­—ç¬¦æµ                               |
| -------- | ---------------------------------------- | ------------------------------------ |
| **ç¼“å†²** | BufferedInputStream/BufferedOutputStream | BufferedReader/BufferedWriter        |
| **å¯¹è±¡** | ObjectInputStream/ObjectOutputStream     | -                                    |
| **è½¬æ¢** | -                                        | InputStreamReader/OutputStreamWriter |
| **æ‰“å°** | PrintStream                              | PrintWriter                          |

**å¤„ç†æµçš„ä¼˜ç‚¹ï¼š**

1. âœ… æé«˜æ€§èƒ½ï¼ˆç¼“å†²ï¼‰
2. âœ… å¢å¼ºåŠŸèƒ½ï¼ˆæŒ‰è¡Œè¯»å–ã€åºåˆ—åŒ–ç­‰ï¼‰
3. âœ… ç®€åŒ–æ“ä½œï¼ˆè£…é¥°è€…æ¨¡å¼ï¼‰





---

## å››ã€å­—èŠ‚æµä¸å­—ç¬¦æµ

### 4.1 æ–‡ä»¶å­—èŠ‚æµ

#### FileInputStreamï¼ˆå­—èŠ‚è¾“å…¥æµï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                 | è¯´æ˜               |
| -------------------- | ------------------ |
| `int read()`         | è¯»å–ä¸€ä¸ªå­—èŠ‚       |
| `int read(byte[] b)` | è¯»å–å¤šä¸ªå­—èŠ‚åˆ°æ•°ç»„ |
| `void close()`       | å…³é—­æµ             |

**ä½¿ç”¨æ­¥éª¤ï¼š**

1. åˆ›å»ºFileInputStreamå¯¹è±¡
2. è¯»å–æ•°æ®
3. å…³é—­æµï¼ˆé‡Šæ”¾èµ„æºï¼‰

```java
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {

    }

    //è¯»å–æ–‡ä»¶
    @Test
    public void readFile01() {
       String filePath = "E:\\IDEA code JAVA\\wenjian\\news3.txt";

       int read = 0;
        FileInputStream fileInputStream = null;
        try{
           //åˆ›å»º FileInputStream å¯¹è±¡ï¼Œç”¨äºè¯»å–æ–‡ä»¶
            fileInputStream = new FileInputStream(filePath);

           //ä»è¯¥æ–¹æ³•ä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰è¾“å…¥å¯ç”¨ï¼Œæ­¤æ–¹æ³•å°†é˜»æ­¢
           //å¦‚ä½•è¿”å›-1ï¼Œè¡¨ç¤ºè¯»å–å®Œæ¯•
           while((read = fileInputStream.read()) != -1){
               System.out.print((char)read);
           }
       }catch(IOException e){
           e.printStackTrace();
        }finally {
           //å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº
            try {
                fileInputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```

```java
import org.junit.jupiter.api.Test;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {
    }

    @Test
    //ä½¿ç”¨ read (byte[] b) è¯»å–æ–‡ä»¶ï¼Œæé«˜æ•ˆç‡
    public void readFile02() {
        String filePath = "D:\\Java IDea Code\\wenjian\\news3.txt";
        byte[] buffer = new byte[8];//ä¸€æ¬¡è¯»å–8ä¸ªå­—èŠ‚
        int readlen = 0;
        FileInputStream fileInputStream = null;

        try{
            //åˆ›å»º FileInputStream å¯¹è±¡ ç”¨äºè¯»å–æ–‡ä»¶
            fileInputStream = new FileInputStream(filePath);

            //ä»è¯¥æ–¹æ³•è¯»å–æœ€å¤šb.length å­—èŠ‚çš„æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ã€‚
            //å¦‚æœè¿”å›-1ï¼Œè¡¨ç¤ºè¯»å–å®Œæ¯•ã€‚
            //å¦‚æœè¯»å–æ­£å¸¸ï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚
            while((readlen = fileInputStream.read(buffer)) != -1){
                System.out.print(new String (buffer, 0, readlen));//æ˜¾ç¤º
            }
        }catch(IOException e){
            e.printStackTrace();
        }finally{
            //å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº
            try{
                fileInputStream.close();
            }catch(IOException e){
                e.printStackTrace();
            }
        }
    }
}
```



#### FileOutputStreamï¼ˆå­—èŠ‚è¾“å‡ºæµï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                                | è¯´æ˜                 |
| ----------------------------------- | -------------------- |
| `write(int b)`                      | å†™å…¥ä¸€ä¸ªå­—èŠ‚         |
| `write(byte[] b)`                   | å†™å…¥å­—èŠ‚æ•°ç»„         |
| `write(byte[] b, int off, int len)` | å†™å…¥å­—èŠ‚æ•°ç»„çš„ä¸€éƒ¨åˆ† |
| `close()`                           | å…³é—­æµ               |

**ä¸¤ç§æ¨¡å¼ï¼š**

- `new FileOutputStream(path)` - è¦†ç›–æ¨¡å¼
- `new FileOutputStream(path, true)` - è¿½åŠ æ¨¡å¼

```java
import org.junit.jupiter.api.Test;

import java.io.*;

public class Main {
    public static void main(String[] args) {

    }

    //æ¼”ç¤ºä½¿ç”¨FileOutputStreamå°†æ•°æ®å†™åˆ°æ–‡ä»¶ä¸­
    //å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶
    @Test
    public void writeFile() {
        //åˆ›å»ºFileOutputStreamå¯¹è±¡
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news4.txt";
        FileOutputStream fileOutputStream = null;

        try {
            //new FileOutputStream(filePath)       åˆ›å»ºæ–¹å¼ï¼Œå½“å†™å…¥å†…å®¹æ—¶ï¼Œä¼šè¦†ç›–åŸæ¥çš„å†…å®¹
            fileOutputStream = new FileOutputStream(filePath);
            //new FileOutputStream(filePathï¼Œtrue) åˆ›å»ºæ–¹å¼ï¼Œå½“å†™å…¥å†…å®¹æ—¶ï¼Œä¼šè¿½åŠ æ–‡ä»¶åé¢
            fileOutputStream = new FileOutputStream(filePath,true);
            //å†™å…¥ä¸€ä¸ªå­—èŠ‚

            fileOutputStream.write('H');

            //å†™å…¥å­—ç¬¦ä¸²
            String str = "hello world";

            //str.getBytes() å¯ä»¥æŠŠå­—ç¬¦ä¸²->å­—èŠ‚æ•°ç»„
            fileOutputStream.write(str.getBytes());

            //write(byte[] b,int off,int len)å°† len å­—èŠ‚ä»ä½äºåç§»é‡ off çš„æŒ‡å®šå­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ
            fileOutputStream.write(str.getBytes(), 0, str.length());

        } catch (IOException e) {
            e.printStackTrace();
        }finally {
            try {
                fileOutputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```

#### æ–‡ä»¶æ‹·è´

```java
import org.junit.jupiter.api.Test;

import java.io.*;

public class Main {
    public static void main(String[] args) {

    }

    @Test
    public void writeFile() {
        //æ‹·è´æ–‡ä»¶ å°†news4æ‹·è´åˆ°new5æ–‡ä»¶ä¸­

        String srcfilePath = "E:\\IDEA code JAVA\\wenjian\\news4.txt";
        String destfilePath = "E:\\IDEA code JAVA\\wenjian\\news5.txt";

        FileInputStream fileInputStream = null;
        FileOutputStream fileOutputStream = null;

        try {
            fileInputStream = new FileInputStream(srcfilePath);
            fileOutputStream = new FileOutputStream(destfilePath);
            byte[] buffer = new byte[1024];
            int readLen = 0;
            while ((readLen = fileInputStream.read(buffer)) != -1) {
                //ä¸€è¾¹å†™ä¸€è¾¹è¯»
                fileOutputStream.write(buffer, 0, readLen);
            }
            System.out.println("æ‹·è´æˆåŠŸ");
        } catch (IOException e) {
         e.printStackTrace();
        } finally{
            try {
                //å…³é—­è¾“å‡ºæµå’Œè¾“å…¥æµ é‡Šæ”¾èµ„æº
                if(fileInputStream != null){
                    fileInputStream.close();
                }

                if(fileOutputStream != null){
                    fileOutputStream.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }
}
```

### 4.2 æ–‡ä»¶å­—ç¬¦æµ

#### FileReaderï¼ˆå­—ç¬¦è¾“å…¥æµï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                    | è¯´æ˜           |
| ----------------------- | -------------- |
| `int read()`            | è¯»å–å•ä¸ªå­—ç¬¦   |
| `int read(char[] cbuf)` | è¯»å–å­—ç¬¦åˆ°æ•°ç»„ |
| `void close()`          | å…³é—­æµ         |

**è¾…åŠ©æ–¹æ³•ï¼š**

- `new String(char[])` - å°†char[]è½¬æ¢æˆString
- `new String(char[], off, len)` - è½¬æ¢char[]çš„æŒ‡å®šéƒ¨åˆ†

**ç‰¹ç‚¹ï¼š**

- â­ ä¸“é—¨å¤„ç†æ–‡æœ¬æ–‡ä»¶
- â­ è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç 
- â­ æ¯”å­—èŠ‚æµæ›´æ–¹ä¾¿å¤„ç†æ–‡æœ¬



```java
import java.io.FileReader;
import java.io.IOException;

//å•ä¸ªå­—ç¬¦è¯»å–æ–‡ä»¶
public class Main {
    public static void main(String[] args) {
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news4.txt";
        FileReader fileReader = null;
        
        int data = ' ';
       
        try {
            fileReader  = new FileReader(filePath);
            //å¾ªç¯è¯»å–ï¼Œä½¿ç”¨read
            while((data = fileReader.read()) != -1){
                System.out.print((char)data);
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        } finally {
            try {
                if(fileReader != null){
                    fileReader.close();
                }
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }

    }
}

//å­—ç¬¦æ•°ç»„è¯»å–æ–‡ä»¶
import java.io.FileReader;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news4.txt";
        FileReader fileReader = null;

        int readLen = 0;
        char[] buf = new char[1024];

        try {
            fileReader  = new FileReader(filePath);
            //å¾ªç¯è¯»å–ï¼Œä½¿ç”¨read
            while((readLen = fileReader.read(buf)) != -1){
                System.out.print(new String(buf, 0, readLen));
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        } finally {
            try {
                if(fileReader != null){
                    fileReader.close();
                }
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }

    }
}
```



#### FileWriterï¼ˆå­—ç¬¦è¾“å‡ºæµï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                                   | è¯´æ˜               |
| -------------------------------------- | ------------------ |
| `write(int c)`                         | å†™å…¥å•ä¸ªå­—ç¬¦       |
| `write(char[] cbuf)`                   | å†™å…¥å­—ç¬¦æ•°ç»„       |
| `write(char[] cbuf, int off, int len)` | å†™å…¥æ•°ç»„çš„ä¸€éƒ¨åˆ†   |
| `write(String str)`                    | å†™å…¥å­—ç¬¦ä¸²         |
| `write(String str, int off, int len)`  | å†™å…¥å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ† |
| `flush()`                              | åˆ·æ–°ç¼“å†²åŒº         |
| `close()`                              | å…³é—­æµ             |

**ä¸¤ç§æ¨¡å¼ï¼š**

- `new FileWriter(path)` - è¦†ç›–æ¨¡å¼
- `new FileWriter(path, true)` - è¿½åŠ æ¨¡å¼

**âš ï¸ é‡è¦æç¤ºï¼š**

- FileWriterä½¿ç”¨åï¼Œå¿…é¡»è¦**å…³é—­(close)æˆ–åˆ·æ–°(flush)**
- å¦åˆ™æ•°æ®ä¸ä¼šå†™å…¥æ–‡ä»¶ï¼

```java
import java.io.FileWriter;
import java.io.IOException;

public class Main {
    public static void main(String[] args) {
        String filePath = "E:\\IDEA code JAVA\\wenjian\\news1.txt";
        FileWriter fileWriter = null;

        char[] chars = {'a','b','c','d','e','f','g','h'};
        try {
            fileWriter = new FileWriter(filePath);//è¿™é‡Œæ˜¯è¦†ç›–å†™å…¥
            //3)write(int):å†™å…¥å•ä¸ªå­—ç¬¦
            fileWriter.write('H');

            //4)write(char[]):å†™å…¥æŒ‡å®šæ•°ç»„
            fileWriter.write(chars);
            
            //5)write(char[],off,len):å†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†
            fileWriter.write("æœ¨é»‘è”ç›Ÿ".toCharArray(),0,3);
            
            //6)write(string):å†™å…¥æ•´ä¸ªå­—ç¬¦ä¸²
            fileWriter.write("ä½ å¥½åŒ—äº¬");
            
            //7)write(string,off,len):å†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†,ä»0å¼€å§‹å†™å…¥2ä¸ªå­—ç¬¦
            fileWriter.write("ä¸Šæµ·å¤©æ´¥",0,2);
            
            //*æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨å¾ªç¯
        } catch (IOException e) {
            throw new RuntimeException(e);
        } finally {
            //FileWriterä½¿ç”¨åï¼Œå¿…é¡»è¦å…³é—­(close)æˆ–åˆ·æ–°(flush)
            try {
                fileWriter.close();
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }
}
```



---

## äº”ã€èŠ‚ç‚¹æµå’Œå¤„ç†æµ

### 5.1 èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„æ¦‚å¿µ

**èŠ‚ç‚¹æµï¼ˆNode Streamï¼‰ï¼š** ç›´æ¥ä»æ•°æ®æºè¯»å†™æ•°æ®çš„æµ

**å¤„ç†æµï¼ˆWrapper Streamï¼‰ï¼š** åŒ…è£…èŠ‚ç‚¹æµï¼Œæä¾›æ›´å¼ºå¤§çš„åŠŸèƒ½

**å¯¹æ¯”ï¼š**

| ç‰¹æ€§     | èŠ‚ç‚¹æµ                      | å¤„ç†æµ                                               |
| -------- | --------------------------- | ---------------------------------------------------- |
| **å®šä¹‰** | ç›´æ¥è¿æ¥æ•°æ®æº              | åŒ…è£…å…¶ä»–æµ                                           |
| **åŠŸèƒ½** | åŸºæœ¬çš„è¯»å†™æ“ä½œ              | å¢å¼ºåŠŸèƒ½ï¼ˆç¼“å†²ã€è½¬æ¢ç­‰ï¼‰                             |
| **æ•ˆç‡** | ä¸€èˆ¬                        | æ›´é«˜                                                 |
| **ç¤ºä¾‹** | FileInputStreamã€FileReader | BufferedInputStreamã€BufferedReader                  |
| **ä½¿ç”¨** | `new FileInputStream(file)` | `new BufferedInputStream(new FileInputStream(file))` |

**èŠ‚ç‚¹æµä¸€è§ˆè¡¨ï¼š**

| åˆ†ç±»       | å­—èŠ‚æµ                                     | å­—ç¬¦æµ                          |
| ---------- | ------------------------------------------ | ------------------------------- |
| **æ–‡ä»¶**   | FileInputStream/FileOutputStream           | FileReader/FileWriter           |
| **æ•°ç»„**   | ByteArrayInputStream/ByteArrayOutputStream | CharArrayReader/CharArrayWriter |
| **ç®¡é“**   | PipedInputStream/PipedOutputStream         | PipedReader/PipedWriter         |
| **å­—ç¬¦ä¸²** | -                                          | StringReader/StringWriter       |

**å¤„ç†æµä¸€è§ˆè¡¨ï¼š**

| åˆ†ç±»     | å­—èŠ‚æµ                                   | å­—ç¬¦æµ                               | åŠŸèƒ½          |
| -------- | ---------------------------------------- | ------------------------------------ | ------------- |
| **ç¼“å†²** | BufferedInputStream/BufferedOutputStream | BufferedReader/BufferedWriter        | æé«˜æ•ˆç‡      |
| **è½¬æ¢** | -                                        | InputStreamReader/OutputStreamWriter | å­—èŠ‚æµâ†”å­—ç¬¦æµ |
| **å¯¹è±¡** | ObjectInputStream/ObjectOutputStream     | -                                    | åºåˆ—åŒ–        |
| **æ•°æ®** | DataInputStream/DataOutputStream         | -                                    | è¯»å†™åŸºæœ¬ç±»å‹  |
| **æ‰“å°** | PrintStream                              | PrintWriter                          | ä¾¿æ·è¾“å‡º      |

**å¤„ç†æµçš„ä¼˜åŠ¿ï¼š**

1. âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šé€šè¿‡ç¼“å†²å‡å°‘IOæ¬¡æ•°
2. âœ… **åŠŸèƒ½å¢å¼º**ï¼šæä¾›æ›´å¤šä¾¿æ·æ–¹æ³•ï¼ˆreadLineã€åºåˆ—åŒ–ç­‰ï¼‰
3. âœ… **ç»Ÿä¸€æ¥å£**ï¼šè£…é¥°è€…æ¨¡å¼ï¼Œå¯ä»¥çµæ´»ç»„åˆ
4. âœ… **ç®€åŒ–æ“ä½œ**ï¼šæ›´æ˜“ç”¨çš„API

**ä½¿ç”¨å»ºè®®ï¼š**

- â­ å®é™…å¼€å‘ä¸­æ¨èä½¿ç”¨å¤„ç†æµ
- â­ å¤„ç†æµå¯ä»¥å¤šå±‚åŒ…è£…
- â­ å…³é—­æœ€å¤–å±‚çš„å¤„ç†æµå³å¯

### 5.2 ç¼“å†²æµï¼ˆBuffered Streamï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦ç¼“å†²æµï¼Ÿ**

- æé«˜IOæ•ˆç‡ï¼Œå‡å°‘ç£ç›˜è®¿é—®æ¬¡æ•°
- å†…ç½®ç¼“å†²åŒºï¼Œæ‰¹é‡è¯»å†™æ•°æ®
- æ€§èƒ½å¯æå‡å‡ ç™¾å€

**å››ä¸ªç¼“å†²æµç±»ï¼š**

| ç±»å‹     | å­—èŠ‚ç¼“å†²æµ           | å­—ç¬¦ç¼“å†²æµ     |
| -------- | -------------------- | -------------- |
| **è¾“å…¥** | BufferedInputStream  | BufferedReader |
| **è¾“å‡º** | BufferedOutputStream | BufferedWriter |

**ç‰¹ç‚¹ï¼š**

- â­ æé«˜æ•ˆç‡ï¼ˆ8KBé»˜è®¤ç¼“å†²åŒºï¼‰
- â­ æä¾›é¢å¤–æ–¹æ³•ï¼ˆå¦‚readLine()ã€newLine()ï¼‰
- â­ å…³é—­å¤–å±‚æµä¼šè‡ªåŠ¨å…³é—­å†…å±‚æµ

**ç¼“å†²åŸç†ï¼š**

```
ä¸ä½¿ç”¨ç¼“å†²ï¼šæ¯æ¬¡read()éƒ½è®¿é—®ç£ç›˜ â†’ 1000æ¬¡IOæ“ä½œ
ä½¿ç”¨ç¼“å†²ï¼šä¸€æ¬¡è¯»å–8KBåˆ°å†…å­˜ â†’ çº¦2æ¬¡IOæ“ä½œ
æ€§èƒ½æå‡ï¼š500å€ï¼
```

#### BufferedReader å’Œ BufferedWriter

```java
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

/**
* æ¼”ç¤º BufferedReader ä½¿ç”¨
*/

public class BufferedReader_ {
    public static void main(String[] args) throws Exception {
        String filePath = "e:\\a.java";
        //åˆ›å»º bufferedReader
        BufferedReader bufferedReader = new BufferedReader(new FileReader(filePath));

        //è¯»å–
        String line; //æŒ‰è¡Œè¯»å–, æ•ˆç‡é«˜
        
        //è¯´æ˜
        //1. bufferedReader.readLine() æ˜¯æŒ‰è¡Œè¯»å–æ–‡ä»¶
        //2. å½“è¿”å› null æ—¶ï¼Œè¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•
        while ((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }
        
        //å…³é—­æµ, è¿™é‡Œæ³¨æ„ï¼Œåªéœ€è¦å…³é—­ BufferedReader ï¼Œå› ä¸ºåº•å±‚ä¼šè‡ªåŠ¨çš„å»å…³é—­ èŠ‚ç‚¹æµ
        //FileReaderã€‚
        /*public void close() throws IOException {
            synchronized (lock) {
                if (in == null)
                    return;
                try {
                    in.close();//in å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„ new FileReader(filePath), å…³é—­äº†. 
                } finally {
                    in = null;
                    cb = null;
                }
            }
        }*/
        bufferedReader.close();
    }
}

```

> ä½¿ç”¨BufferedWriter â€œå°†helloï¼Œæ‡¿è½©ï¼â€ï¼Œå†™å…¥åˆ°æ–‡ä»¶ä¸­
> BufferedWriter.java

```java
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
/**
 * æ¼”ç¤º BufferedWriter çš„ä½¿ç”¨
 */
public class BufferedWriter_ {
    public static void main(String[] args) throws IOException {
        String filePath = "e:\\ok.txt";
        //åˆ›å»º BufferedWriter
        //è¯´æ˜:
        //1. new FileWriter(filePath, true) è¡¨ç¤ºä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥
        //2. new FileWriter(filePath) , è¡¨ç¤ºä»¥è¦†ç›–çš„æ–¹å¼å†™å…¥
        BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(filePath));
        bufferedWriter.write("hello, æ‡¿è½©!");
        bufferedWriter.newLine();//æ’å…¥ä¸€ä¸ªå’Œç³»ç»Ÿç›¸å…³çš„æ¢è¡Œ
        bufferedWriter.write("hello2, æ‡¿è½©!");
        bufferedWriter.newLine();
        bufferedWriter.write("hello3, æ‡¿è½©!");
        bufferedWriter.newLine();
        
        //è¯´æ˜ï¼šå…³é—­å¤–å±‚æµå³å¯ ï¼Œ ä¼ å…¥çš„ new FileWriter(filePath) ,ä¼šåœ¨åº•å±‚å…³é—­
        bufferedWriter.close();
    }
}
```

> ç»¼åˆä½¿ç”¨BufferedReader å’Œ BufferedWriter å®Œæˆ æ–‡æœ¬æ–‡ä»¶æ‹·è´ï¼Œæ³¨æ„æ–‡ä»¶ç¼–ç  
>
> BufferedCopy_.java

```java
import java.io.*;

public class BufferedCopy_ {
    public static void main(String[] args) {
        //è¯´æ˜
        //1. BufferedReader å’Œ BufferedWriter æ˜¯å®‰è£…å­—ç¬¦æ“ä½œ
        //2. ä¸è¦å»æ“ä½œ äºŒè¿›åˆ¶æ–‡ä»¶[å£°éŸ³ï¼Œè§†é¢‘ï¼Œdoc, pdf ], å¯èƒ½é€ æˆæ–‡ä»¶æŸå
        //BufferedInputStream
        //BufferedOutputStream
        String srcFilePath = "e:\\a.java";
        String destFilePath = "e:\\a2.java";
        // String srcFilePath = "e:\\0245_æ‡¿è½©é›¶åŸºç¡€å­¦ Java_å¼•å‡º this.avi";
        // String destFilePath = "e:\\a2 æ‡¿è½©.avi";
        BufferedReader br = null;
        BufferedWriter bw = null;
        String line;
        try {
            br = new BufferedReader(new FileReader(srcFilePath));
            bw = new BufferedWriter(new FileWriter(destFilePath));
        //è¯´æ˜: readLine è¯»å–ä¸€è¡Œå†…å®¹ï¼Œä½†æ˜¯æ²¡æœ‰æ¢è¡Œ
            while ((line = br.readLine()) != null) {
        //æ¯è¯»å–ä¸€è¡Œï¼Œå°±å†™å…¥
                bw.write(line);
        //æ’å…¥ä¸€ä¸ªæ¢è¡Œ
                bw.newLine();
            }
            System.out.println("æ‹·è´å®Œæ¯•...");
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            //å…³é—­æµ
            try {
                if(br != null) {
                    br.close();
                }
                if(bw != null) {
                    bw.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```



#### BufferedInputStream å’Œ BufferedOutputStream

**å­—èŠ‚ç¼“å†²æµï¼š** ç”¨äºæé«˜å­—èŠ‚æµçš„è¯»å†™æ•ˆç‡

**ç‰¹ç‚¹ï¼š**

- ğŸ“¦ å†…ç½®8KBç¼“å†²åŒº
- ğŸ“¦ å‡å°‘ç£ç›˜è®¿é—®æ¬¡æ•°
- ğŸ“¦ é€‚åˆå¤„ç†å¤§æ–‡ä»¶

**ä½¿ç”¨æ–¹å¼ï¼š**

```java
// åŒ…è£…FileInputStream
BufferedInputStream bis = new BufferedInputStream(new FileInputStream("file.dat"));

// åŒ…è£…FileOutputStream
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("file.dat"));
```



```java
import java.io.*;
/**
 * æ¼”ç¤ºä½¿ç”¨ BufferedOutputStream å’Œ BufferedInputStream ä½¿ç”¨
 * ä½¿ç”¨ä»–ä»¬ï¼Œå¯ä»¥å®ŒæˆäºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´. * æ€è€ƒï¼šå­—èŠ‚æµå¯ä»¥æ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥æ“ä½œæ–‡æœ¬æ–‡ä»¶å—ï¼Ÿå½“ç„¶å¯ä»¥
 */
public class BufferedCopy02 {
    public static void main(String[] args) {
        // String srcFilePath = "e:\\Koala.jpg";
        // String destFilePath = "e:\\hsp.jpg";
        // String srcFilePath = "e:\\0245_æ‡¿è½©é›¶åŸºç¡€å­¦ Java_å¼•å‡º this.avi";
        // String destFilePath = "e:\\hsp.avi";
        String srcFilePath = "e:\\a.java";
        String destFilePath = "e:\\a3.java";
        //åˆ›å»º BufferedOutputStream å¯¹è±¡ BufferedInputStream å¯¹è±¡
        BufferedInputStream bis = null;
        BufferedOutputStream bos = null;
        try {
            //å› ä¸º FileInputStream æ˜¯ InputStream å­ç±»
            bis = new BufferedInputStream(new FileInputStream(srcFilePath));
            bos = new BufferedOutputStream(new FileOutputStream(destFilePath));
            //å¾ªç¯çš„è¯»å–æ–‡ä»¶ï¼Œå¹¶å†™å…¥åˆ° destFilePath
            byte[] buff = new byte[1024];
            int readLen = 0;
            //å½“è¿”å› -1 æ—¶ï¼Œå°±è¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•
            while ((readLen = bis.read(buff)) != -1) {
                bos.write(buff, 0, readLen);
            }
            System.out.println("æ–‡ä»¶æ‹·è´å®Œæ¯•~~~");
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            //å…³é—­æµ , å…³é—­å¤–å±‚çš„å¤„ç†æµå³å¯ï¼Œåº•å±‚ä¼šå»å…³é—­èŠ‚ç‚¹æµ
            try {
                if(bis != null) {
                    bis.close();
                }
                if(bos != null) {
                    bos.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```

---

### 5.3 å¯¹è±¡æµï¼ˆObject Streamï¼‰

**å¯¹è±¡æµï¼š** ç”¨äºå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼ˆå¤„ç†æµçš„ä¸€ç§ï¼‰

**æ ¸å¿ƒæ¦‚å¿µï¼š**

| æ¦‚å¿µ                 | è¯´æ˜                                       |
| -------------------- | ------------------------------------------ |
| **åºåˆ—åŒ–**           | å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµï¼ˆä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œä¼ è¾“ï¼‰ |
| **ååºåˆ—åŒ–**         | å°†å­—èŠ‚æµè¿˜åŸä¸ºå¯¹è±¡                         |
| **Serializable**     | æ ‡è®°æ¥å£ï¼Œè¡¨ç¤ºè¯¥ç±»å¯ä»¥åºåˆ—åŒ–               |
| **serialVersionUID** | åºåˆ—åŒ–ç‰ˆæœ¬å·ï¼Œç”¨äºç‰ˆæœ¬æ§åˆ¶                 |

**ä¸¤ä¸ªå¯¹è±¡æµç±»ï¼š**

| ç±»                   | åŠŸèƒ½                 | ç»§æ‰¿å…³ç³»         |
| -------------------- | -------------------- | ---------------- |
| `ObjectOutputStream` | åºåˆ—åŒ–å¯¹è±¡åˆ°å­—èŠ‚æµ   | ç»§æ‰¿OutputStream |
| `ObjectInputStream`  | ååºåˆ—åŒ–å­—èŠ‚æµä¸ºå¯¹è±¡ | ç»§æ‰¿InputStream  |

**åºåˆ—åŒ–è¦æ±‚ï¼š**

1. â­ ç±»å¿…é¡»å®ç°Serializableæ¥å£ï¼ˆæ ‡è®°æ¥å£ï¼‰
2. â­ ç±»çš„æ‰€æœ‰å±æ€§éƒ½å¿…é¡»å¯åºåˆ—åŒ–ï¼ˆæˆ–ç”¨transientä¿®é¥°ï¼‰
3. â­ é™æ€å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼ˆå±äºç±»ï¼Œä¸å±äºå¯¹è±¡ï¼‰
4. â­ å»ºè®®å£°æ˜serialVersionUIDï¼ˆé˜²æ­¢ç‰ˆæœ¬å†²çªï¼‰

**transientå…³é”®å­—ï¼š**

```java
class User implements Serializable {
    private String username;
    private transient String password;  // ä¸ä¼šè¢«åºåˆ—åŒ–
    private static String company;      // é™æ€å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–
}
```

**åº”ç”¨åœºæ™¯ï¼š**

- ğŸ’¾ ä¿å­˜å¯¹è±¡åˆ°æ–‡ä»¶ï¼ˆæ¸¸æˆå­˜æ¡£ã€ç¼“å­˜ï¼‰
- ğŸŒ ç½‘ç»œä¼ è¾“å¯¹è±¡ï¼ˆRMIã€Socketé€šä¿¡ï¼‰
- ğŸ“¦ å¯¹è±¡æŒä¹…åŒ–ï¼ˆæ•°æ®åº“å­˜å‚¨ï¼‰
- ğŸ“‹ æ·±æ‹·è´å¯¹è±¡

#### ObjectOutputStreamï¼ˆåºåˆ—åŒ–ï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                      | è¯´æ˜        |
| ------------------------- | ----------- |
| `writeObject(Object obj)` | åºåˆ—åŒ–å¯¹è±¡  |
| `writeInt(int v)`         | å†™å…¥int     |
| `writeBoolean(boolean v)` | å†™å…¥boolean |
| `writeUTF(String str)`    | å†™å…¥å­—ç¬¦ä¸²  |
| `close()`                 | å…³é—­æµ      |

**ç¤ºä¾‹ä»£ç ï¼š**

```java
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

/**
 * æ¼”ç¤º ObjectOutputStream çš„ä½¿ç”¨, å®Œæˆæ•°æ®çš„åºåˆ—åŒ–
 */
public class ObjectOutStream_ {
    public static void main(String[] args) throws Exception {
        String filePath = "e:\\data.dat";
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(filePath));
        
        // åºåˆ—åŒ–åŸºæœ¬ç±»å‹
        oos.writeInt(100);
        oos.writeBoolean(true);
        oos.writeChar('a');
        oos.writeDouble(9.5);
        oos.writeUTF("æ‡¿è½©");
        
        // åºåˆ—åŒ–å¯¹è±¡
        oos.writeObject(new Dog("æ—ºè´¢", 10));
        oos.close();
        System.out.println("åºåˆ—åŒ–å®Œæˆ");
    }
}

// Dogç±»å¿…é¡»å®ç°Serializable
class Dog implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private int age;
    
    public Dog(String name, int age) {
        this.name = name;
        this.age = age;
    }
}
```

#### ObjectInputStreamï¼ˆååºåˆ—åŒ–ï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•            | è¯´æ˜         |
| --------------- | ------------ |
| `readObject()`  | ååºåˆ—åŒ–å¯¹è±¡ |
| `readInt()`     | è¯»å–int      |
| `readBoolean()` | è¯»å–boolean  |
| `readUTF()`     | è¯»å–å­—ç¬¦ä¸²   |
| `close()`       | å…³é—­æµ       |

**ç¤ºä¾‹ä»£ç ï¼š**

```java
import java.io.FileInputStream;
import java.io.ObjectInputStream;

/**
 * æ¼”ç¤º ObjectInputStream çš„ä½¿ç”¨, å®Œæˆæ•°æ®çš„ååºåˆ—åŒ–
 */
public class ObjectInputStream_ {
    public static void main(String[] args) throws Exception {
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("e:\\data.dat"));
        
        // ååºåˆ—åŒ–ï¼Œè¯»å–é¡ºåºå¿…é¡»ä¸å†™å…¥é¡ºåºä¸€è‡´
        System.out.println(ois.readInt());      // 100
        System.out.println(ois.readBoolean());  // true
        System.out.println(ois.readChar());     // a
        System.out.println(ois.readDouble());   // 9.5
        System.out.println(ois.readUTF());      // æ‡¿è½©
        
        // ååºåˆ—åŒ–å¯¹è±¡
        Dog dog = (Dog) ois.readObject();
        System.out.println(dog);
        
        ois.close();
        System.out.println("ååºåˆ—åŒ–å®Œæˆ");
    }
}
```

**å…³é”®ç‚¹æ€»ç»“ï¼š**

- âœ… è¯»å–é¡ºåºå¿…é¡»ä¸å†™å…¥é¡ºåºä¸€è‡´
- âœ… å¯¹è±¡å¿…é¡»å®ç°Serializableæ¥å£
- âœ… å»ºè®®æ·»åŠ serialVersionUID
- âœ… å¯ä»¥åºåˆ—åŒ–å¤šä¸ªå¯¹è±¡åˆ°åŒä¸€ä¸ªæ–‡ä»¶

**æ³¨æ„äº‹é¡¹ï¼š**

- âš ï¸ åºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œä¸åŒ…æ‹¬æ–¹æ³•
- âš ï¸ çˆ¶ç±»ä¹Ÿè¦å®ç°Serializableï¼Œå¦åˆ™çˆ¶ç±»å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–
- âš ï¸ ä¿®æ”¹ç±»ç»“æ„åï¼ŒserialVersionUIDè¦ä¿æŒä¸€è‡´
- âš ï¸ ååºåˆ—åŒ–ä¸ä¼šè°ƒç”¨æ„é€ æ–¹æ³•



---

## å…­ã€å…¶ä»–å¸¸ç”¨æµ

### 6.1 æ ‡å‡†è¾“å…¥è¾“å‡ºæµ

**Javaæä¾›çš„æ ‡å‡†æµï¼š**

| æµ           | ç±»å‹        | è¯´æ˜                 |
| ------------ | ----------- | -------------------- |
| `System.in`  | InputStream | æ ‡å‡†è¾“å…¥æµï¼ˆé”®ç›˜ï¼‰   |
| `System.out` | PrintStream | æ ‡å‡†è¾“å‡ºæµï¼ˆæ§åˆ¶å°ï¼‰ |
| `System.err` | PrintStream | æ ‡å‡†é”™è¯¯æµï¼ˆæ§åˆ¶å°ï¼‰ |

**ç¤ºä¾‹ï¼š**

```java
// ä»é”®ç›˜è¯»å–è¾“å…¥
Scanner scanner = new Scanner(System.in);
String input = scanner.nextLine();

// è¾“å‡ºåˆ°æ§åˆ¶å°
System.out.println("Hello World");

// é‡å®šå‘è¾“å‡ºåˆ°æ–‡ä»¶
System.setOut(new PrintStream("output.txt"));
System.out.println("è¾“å‡ºåˆ°æ–‡ä»¶");
```

### 6.2 è½¬æ¢æµï¼ˆInputStreamReader/OutputStreamWriterï¼‰

**ä½œç”¨ï¼š** å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„æ¡¥æ¢ï¼Œå¯ä»¥æŒ‡å®šå­—ç¬¦ç¼–ç 

**ä¸ºä»€ä¹ˆéœ€è¦è½¬æ¢æµï¼Ÿ**

- è§£å†³å­—ç¬¦ç¼–ç é—®é¢˜ï¼ˆGBKã€UTF-8ç­‰ï¼‰
- å­—èŠ‚æµâ†’å­—ç¬¦æµè½¬æ¢

**ä¸¤ä¸ªè½¬æ¢æµï¼š**

| ç±»                   | åŠŸèƒ½                  | ç”¨é€”           |
| -------------------- | --------------------- | -------------- |
| `InputStreamReader`  | å­—èŠ‚è¾“å…¥æµâ†’å­—ç¬¦è¾“å…¥æµ | è¯»å–æ—¶æŒ‡å®šç¼–ç  |
| `OutputStreamWriter` | å­—ç¬¦è¾“å‡ºæµâ†’å­—èŠ‚è¾“å‡ºæµ | å†™å…¥æ—¶æŒ‡å®šç¼–ç  |

**ä¹±ç é—®é¢˜ç¤ºä¾‹ï¼š**

```java
import java.io.*;
/**
 * çœ‹ä¸€ä¸ªä¸­æ–‡ä¹±ç é—®é¢˜
 */
public class CodeQuestion {
    public static void main(String[] args) throws IOException {
        //è¯»å– e:\\a.txt æ–‡ä»¶åˆ°ç¨‹åº
        //æ€è·¯
        //1. åˆ›å»ºå­—ç¬¦è¾“å…¥æµ BufferedReader [å¤„ç†æµ]
        //2. ä½¿ç”¨ BufferedReader å¯¹è±¡è¯»å– a.txt
        //3. é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯»å–æ–‡ä»¶æ˜¯æŒ‰ç…§ utf-8 ç¼–ç 
        String filePath = "e:\\a.txt";
        BufferedReader br = new BufferedReader(new FileReader(filePath));
        String s = br.readLine();
        System.out.println("è¯»å–åˆ°çš„å†…å®¹: " + s);
        br.close();
        //InputStreamReader
        //OutputStreamWriter
    }
}
```



**è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨è½¬æ¢æµæŒ‡å®šç¼–ç **

```java
import java.io.*;
/**
 * æ¼”ç¤ºä½¿ç”¨ InputStreamReader è½¬æ¢æµè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
 * å°†å­—èŠ‚æµ FileInputStream è½¬æˆå­—ç¬¦æµ InputStreamReader, æŒ‡å®šç¼–ç  gbk/utf-8
 */
public class InputStreamReader_ {
    public static void main(String[] args) throws IOException {
        String filePath = "e:\\a.txt";
        //è§£è¯»
        //1. æŠŠ FileInputStream è½¬æˆ InputStreamReader
        //2. æŒ‡å®šç¼–ç  gbk
        //InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath), "gbk");
        //3. æŠŠ InputStreamReader ä¼ å…¥ BufferedReader
        //BufferedReader br = new BufferedReader(isr);
        //å°† 2 å’Œ 3 åˆåœ¨ä¸€èµ·
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(filePath), "gbk"));
        //4. è¯»å–
        String s = br.readLine();
        System.out.println("è¯»å–å†…å®¹=" + s);
        //5. å…³é—­å¤–å±‚æµ
        br.close();
    }
}
```



**OutputStreamWriterç¤ºä¾‹ï¼š**

```java
// 1.åˆ›å»ºæµå¯¹è±¡ï¼ŒæŒ‡å®šGBKç¼–ç 
OutputStreamWriter osw = new OutputStreamWriter(
    new FileOutputStream("d:\\a.txt"), "GBK"
);
// 2.å†™å…¥
osw.write("hello,æ‡¿è½©~");
// 3.å…³é—­
osw.close();
System.out.println("ä¿å­˜æˆåŠŸ~");
```

### 6.3 æ‰“å°æµï¼ˆPrintStream/PrintWriterï¼‰

**ç‰¹ç‚¹ï¼š**

- â­ åªæœ‰è¾“å‡ºæµï¼Œæ²¡æœ‰è¾“å…¥æµ
- â­ ä¸ä¼šæŠ›å‡ºIOException
- â­ è‡ªåŠ¨flush
- â­ å¯ä»¥ç›´æ¥è¾“å‡ºå„ç§æ•°æ®ç±»å‹

**ä¸¤ä¸ªæ‰“å°æµï¼š**

| ç±»            | ç±»å‹       | è¯´æ˜                      |
| ------------- | ---------- | ------------------------- |
| `PrintStream` | å­—èŠ‚æ‰“å°æµ | System.outå°±æ˜¯PrintStream |
| `PrintWriter` | å­—ç¬¦æ‰“å°æµ | æ¨èä½¿ç”¨                  |

**å¸¸ç”¨æ–¹æ³•ï¼š**

- `print()` - è¾“å‡ºä¸æ¢è¡Œ
- `println()` - è¾“å‡ºå¹¶æ¢è¡Œ
- `printf()` - æ ¼å¼åŒ–è¾“å‡º

```java
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
/**
 * æ¼”ç¤º PrintWriter ä½¿ç”¨æ–¹å¼
 */
public class PrintWriter_ {
    public static void main(String[] args) throws IOException {
        //PrintWriter printWriter = new PrintWriter(System.out);
        PrintWriter printWriter = new PrintWriter(new FileWriter("e:\\f2.txt"));
        printWriter.print("hi, åŒ—äº¬ä½ å¥½~~~~");
        printWriter.close();//flush + å…³é—­æµ, æ‰ä¼šå°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶..
    }
}
```

```java
import java.io.IOException;
import java.io.PrintStream;

/**
 * æ¼”ç¤º PrintStream ï¼ˆå­—èŠ‚æ‰“å°æµ/è¾“å‡ºæµï¼‰
 */
public class PrintStream_ {
    public static void main(String[] args) throws IOException {
        PrintStream out = System.out;
        //åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒPrintStream è¾“å‡ºæ•°æ®çš„ä½ç½®æ˜¯ æ ‡å‡†è¾“å‡ºï¼Œå³æ˜¾ç¤ºå™¨
        /*
        public void print(String s) {
            if (s == null) {
                s = "null";
            }
            write(s);
        }
        */
        out.print("john, hello");
        //å› ä¸º print åº•å±‚ä½¿ç”¨çš„æ˜¯ write , æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ write è¿›è¡Œæ‰“å°/è¾“å‡º
        out.write("æ‡¿è½©,ä½ å¥½".getBytes());
        out.close();
        //æˆ‘ä»¬å¯ä»¥å»ä¿®æ”¹æ‰“å°æµè¾“å‡ºçš„ä½ç½®/è®¾å¤‡
        //1. è¾“å‡ºä¿®æ”¹æˆåˆ° "e:\\f1.txt"
        //2. "hello, æ‡¿è½©~" å°±ä¼šè¾“å‡ºåˆ° e:\f1.txt
        //3.  public static void setOut(PrintStream out) {
        // checkIO();
        // setOut0(out); // native æ–¹æ³•ï¼Œä¿®æ”¹äº† out
        // }
        System.setOut(new PrintStream("e:\\f1.txt"));
        System.out.println("hello, æ‡¿è½©~");
    }
}
```

### 6.4 Propertiesç±»

**Propertiesç±»ï¼š** ä¸“é—¨ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶çš„ç±»

**é…ç½®æ–‡ä»¶æ ¼å¼ï¼š**

```properties
# é”®å€¼å¯¹å½¢å¼
key=value
username=admin
password=123456
```

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                                           | è¯´æ˜                   |
| ---------------------------------------------- | ---------------------- |
| `load(InputStream)`                            | åŠ è½½é…ç½®æ–‡ä»¶           |
| `load(Reader)`                                 | åŠ è½½é…ç½®æ–‡ä»¶           |
| `getProperty(String key)`                      | è·å–å±æ€§å€¼             |
| `getProperty(String key, String defaultValue)` | è·å–å±æ€§å€¼ï¼ˆå¸¦é»˜è®¤å€¼ï¼‰ |
| `setProperty(String key, String value)`        | è®¾ç½®å±æ€§å€¼             |
| `store(OutputStream, String comments)`         | ä¿å­˜åˆ°æ–‡ä»¶             |
| `list(PrintStream)`                            | æ‰“å°æ‰€æœ‰å±æ€§           |

**ç‰¹ç‚¹ï¼š**

- ğŸ“ é”®å€¼å¯¹å­˜å‚¨
- ğŸ“ æŒä¹…åŒ–é…ç½®ä¿¡æ¯
- ğŸ“ çˆ¶ç±»æ˜¯Hashtable

```java
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class Properties01 {
    public static void main(String[] args) throws IOException {
		//è¯»å– mysql.properties æ–‡ä»¶ï¼Œå¹¶å¾—åˆ° ip, user å’Œ pwd
        BufferedReader br = new BufferedReader(new FileReader("src\\mysql.properties"));
        String line = "";
        while ((line = br.readLine()) != null) { //å¾ªç¯è¯»å–
            String[] split = line.split("=");
			//å¦‚æœæˆ‘ä»¬è¦æ±‚æŒ‡å®šçš„ ip å€¼
            if("ip".equals(split[0])) {
                System.out.println(split[0] + "å€¼æ˜¯: " + split[1]);
            }
        }
        br.close();
    }
}
```

**è¯»å–é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š**

```java
import java.io.FileReader;
import java.io.IOException;
import java.util.Properties;

public class Properties02 {
    public static void main(String[] args) throws IOException {
        //ä½¿ç”¨ Properties ç±»æ¥è¯»å– mysql.properties æ–‡ä»¶
        //1. åˆ›å»º Properties å¯¹è±¡
        Properties properties = new Properties();
        //2. åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶
        properties.load(new FileReader("src\\mysql.properties"));
        //3. æŠŠ k-v æ˜¾ç¤ºæ§åˆ¶å°
        properties.list(System.out);
        //4. æ ¹æ® key è·å–å¯¹åº”çš„å€¼
        String user = properties.getProperty("user");
        String pwd = properties.getProperty("pwd");
        System.out.println("ç”¨æˆ·å=" + user);
        System.out.println("å¯†ç æ˜¯=" + pwd);
    }
}
```

```Java
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;

public class Properties03 {
    public static void main(String[] args) throws IOException {
        //ä½¿ç”¨ Properties ç±»æ¥åˆ›å»º é…ç½®æ–‡ä»¶, ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹
        Properties properties = new Properties();
        //åˆ›å»ºæˆ–ä¿®æ”¹
        properties.setProperty("charset", "utf8");
        properties.setProperty("user", "æ±¤å§†"); 
        properties.setProperty("pwd", "888888");
        //ä¿å­˜åˆ°æ–‡ä»¶
        properties.store(new FileOutputStream("src\\mysql2.properties"), null);
        System.out.println("ä¿å­˜é…ç½®æ–‡ä»¶æˆåŠŸ~");
    }
}
```

---

## ä¸ƒã€é¢è¯•å¸¸è§é—®é¢˜

### Q1: å­—èŠ‚æµå’Œå­—ç¬¦æµçš„åŒºåˆ«ï¼Ÿ

**ç­”æ¡ˆï¼š**

| ç‰¹æ€§         | å­—èŠ‚æµ                   | å­—ç¬¦æµ             |
| ------------ | ------------------------ | ------------------ |
| **åŸºæœ¬å•ä½** | å­—èŠ‚ï¼ˆbyteï¼Œ8ä½ï¼‰        | å­—ç¬¦ï¼ˆcharï¼Œ16ä½ï¼‰ |
| **åŸºç±»**     | InputStream/OutputStream | Reader/Writer      |
| **é€‚ç”¨åœºæ™¯** | æ‰€æœ‰æ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶ï¼‰       | æ–‡æœ¬æ–‡ä»¶           |
| **ç¼–ç å¤„ç†** | ä¸å¤„ç†                   | è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç    |
| **å…¸å‹åº”ç”¨** | å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘         | txtã€javaã€xml     |

**é€‰æ‹©åŸåˆ™ï¼š**

- å¤„ç†æ–‡æœ¬æ–‡ä»¶ â†’ å­—ç¬¦æµ
- å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ â†’ å­—èŠ‚æµ

---

### Q2: ä»€ä¹ˆæ˜¯èŠ‚ç‚¹æµå’Œå¤„ç†æµï¼Ÿ

**ç­”æ¡ˆï¼š**

| ç±»å‹     | èŠ‚ç‚¹æµ                      | å¤„ç†æµ                                               |
| -------- | --------------------------- | ---------------------------------------------------- |
| **å®šä¹‰** | ç›´æ¥æ“ä½œæ•°æ®æº              | åŒ…è£…èŠ‚ç‚¹æµ                                           |
| **ç¤ºä¾‹** | FileInputStream             | BufferedInputStream                                  |
| **åŠŸèƒ½** | åŸºæœ¬è¯»å†™                    | å¢å¼ºåŠŸèƒ½ï¼ˆç¼“å†²ã€è½¬æ¢ç­‰ï¼‰                             |
| **ä½¿ç”¨** | `new FileInputStream(file)` | `new BufferedInputStream(new FileInputStream(file))` |

**å¤„ç†æµçš„ä¼˜åŠ¿ï¼š**

1. âœ… æé«˜æ€§èƒ½ï¼ˆç¼“å†²æœºåˆ¶ï¼‰
2. âœ… å¢å¼ºåŠŸèƒ½ï¼ˆreadLineã€åºåˆ—åŒ–ç­‰ï¼‰
3. âœ… ç»Ÿä¸€æ¥å£ï¼ˆè£…é¥°è€…æ¨¡å¼ï¼‰

---

### Q3: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å†²æµï¼Ÿ

**ç­”æ¡ˆï¼š**

**åŸå› ï¼š** æé«˜IOæ•ˆç‡

**å¯¹æ¯”ï¼š**

```java
// âŒ ä½æ•ˆï¼šæ¯æ¬¡è¯»å–1ä¸ªå­—èŠ‚
FileInputStream fis = new FileInputStream("file.txt");
int data;
while ((data = fis.read()) != -1) {
    // æ¯æ¬¡è¯»å–éƒ½è®¿é—®ç£ç›˜
}

// âœ… é«˜æ•ˆï¼šä½¿ç”¨ç¼“å†²æµ
BufferedInputStream bis = new BufferedInputStream(new FileInputStream("file.txt"));
int data;
while ((data = bis.read()) != -1) {
    // ä»ç¼“å†²åŒºè¯»å–ï¼Œå‡å°‘ç£ç›˜è®¿é—®
}
```

**æ€§èƒ½å¯¹æ¯”ï¼š**

- ä¸ä½¿ç”¨ç¼“å†²ï¼š1000æ¬¡ç£ç›˜è®¿é—®
- ä½¿ç”¨ç¼“å†²ï¼ˆ8KBï¼‰ï¼šçº¦2æ¬¡ç£ç›˜è®¿é—®
- æ€§èƒ½æå‡ï¼š500å€ï¼

---

### Q4: ä»€ä¹ˆæ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Ÿ

**ç­”æ¡ˆï¼š**

| æ¦‚å¿µ         | è¯´æ˜          | ç”¨é€”                 |
| ------------ | ------------- | -------------------- |
| **åºåˆ—åŒ–**   | å¯¹è±¡ â†’ å­—èŠ‚æµ | ä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œä¼ è¾“ |
| **ååºåˆ—åŒ–** | å­—èŠ‚æµ â†’ å¯¹è±¡ | ä»æ–‡ä»¶æˆ–ç½‘ç»œæ¢å¤å¯¹è±¡ |

**å®ç°æ­¥éª¤ï¼š**

```java
// 1. ç±»å®ç°Serializableæ¥å£
class User implements Serializable {
    private String name;
    private int age;
}

// 2. åºåˆ—åŒ–
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("user.dat"));
oos.writeObject(new User("å¼ ä¸‰", 20));

// 3. ååºåˆ—åŒ–
ObjectInputStream ois = new ObjectInputStream(new FileInputStream("user.dat"));
User user = (User) ois.readObject();
```

**æ³¨æ„äº‹é¡¹ï¼š**

- ç±»å¿…é¡»å®ç°Serializableæ¥å£
- transientä¿®é¥°çš„å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–
- staticå±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–
- å»ºè®®å£°æ˜serialVersionUID

---

### Q5: å¦‚ä½•è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Ÿ

**ç­”æ¡ˆï¼š**

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨è½¬æ¢æµæŒ‡å®šç¼–ç **

```java
// è¯»å–GBKç¼–ç çš„æ–‡ä»¶
InputStreamReader isr = new InputStreamReader(
    new FileInputStream("file.txt"), "GBK"
);
BufferedReader br = new BufferedReader(isr);

// å†™å…¥UTF-8ç¼–ç çš„æ–‡ä»¶
OutputStreamWriter osw = new OutputStreamWriter(
    new FileOutputStream("file.txt"), "UTF-8"
);
BufferedWriter bw = new BufferedWriter(osw);
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨å­—ç¬¦æµæ—¶æŒ‡å®šç¼–ç **

```java
// JDK 11+
FileReader fr = new FileReader("file.txt", Charset.forName("GBK"));
FileWriter fw = new FileWriter("file.txt", Charset.forName("UTF-8"));
```

---

### Q6: IOæµçš„å…³é—­é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š**

**åŸåˆ™ï¼š** å…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³

```java
FileInputStream fis = null;
BufferedInputStream bis = null;
try {
    fis = new FileInputStream("file.txt");  // 1. å…ˆå¼€
    bis = new BufferedInputStream(fis);      // 2. åå¼€
    
    // è¯»å–æ•°æ®
} finally {
    // 4. åå¼€å…ˆå…³
    if (bis != null) bis.close();   // å…³é—­å¤„ç†æµä¼šè‡ªåŠ¨å…³é—­èŠ‚ç‚¹æµ
    // å®é™…ä¸Šåªéœ€è¦å…³é—­biså³å¯
}
```

**ç®€åŒ–å†™æ³•ï¼ˆJDK 7+ï¼‰ï¼š**

```java
try (FileInputStream fis = new FileInputStream("file.txt");
     BufferedInputStream bis = new BufferedInputStream(fis)) {
    // è‡ªåŠ¨å…³é—­èµ„æº
}
```

---

### Q7: Propertiesç±»çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š**

**ä½œç”¨ï¼š** è¯»å†™é…ç½®æ–‡ä»¶ï¼ˆ.propertiesï¼‰

**å¸¸ç”¨æ–¹æ³•ï¼š**

| æ–¹æ³•                                    | è¯´æ˜         |
| --------------------------------------- | ------------ |
| `load(InputStream)`                     | åŠ è½½é…ç½®æ–‡ä»¶ |
| `getProperty(String key)`               | è·å–å±æ€§å€¼   |
| `setProperty(String key, String value)` | è®¾ç½®å±æ€§å€¼   |
| `store(OutputStream, String comments)`  | ä¿å­˜åˆ°æ–‡ä»¶   |

**ä½¿ç”¨åœºæ™¯ï¼š**

- ğŸ“ æ•°æ®åº“é…ç½®
- ğŸ“ åº”ç”¨ç¨‹åºé…ç½®
- ğŸ“ å›½é™…åŒ–èµ„æº

---

### Q8: å¦‚ä½•é«˜æ•ˆåœ°å¤åˆ¶æ–‡ä»¶ï¼Ÿ

**ç­”æ¡ˆï¼š**

**æ¨èæ–¹å¼ï¼šä½¿ç”¨ç¼“å†²å­—èŠ‚æµ**

```java
public static void copyFile(String src, String dest) {
    try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(src));
         BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(dest))) {
        
        byte[] buffer = new byte[8192];  // 8KBç¼“å†²åŒº
        int len;
        while ((len = bis.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

**æ€§èƒ½å¯¹æ¯”ï¼š**

1. å­—èŠ‚æµ + æ— ç¼“å†²ï¼šæ…¢
2. å­—èŠ‚æµ + å°ç¼“å†²ï¼ˆ1KBï¼‰ï¼šè¾ƒå¿«
3. å­—èŠ‚æµ + å¤§ç¼“å†²ï¼ˆ8KBï¼‰ï¼šå¿«
4. ç¼“å†²æµ + ç¼“å†²æ•°ç»„ï¼šæœ€å¿« â­

---

**ä¸Šä¸€ç« ï¼š** [å¤šçº¿ç¨‹](06-å¤šçº¿ç¨‹.md)

**ä¸‹ä¸€ç« ï¼š** [åå°„](08-åå°„.md) â†’

