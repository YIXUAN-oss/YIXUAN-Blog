---
title: Redis ç¼“å­˜æ•°æ®åº“æ•™ç¨‹
autoGroup: false
autoSort: false
sidebarDepth: 0
---

# Redis ç¼“å­˜æ•°æ®åº“æ•™ç¨‹

> æŒæ¡é«˜æ€§èƒ½ç¼“å­˜æŠ€æœ¯ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ä¸æ¶æ„èƒ½åŠ›

## ğŸ“š æ•™ç¨‹ç®€ä»‹

æœ¬æ•™ç¨‹å°†å¸¦ä½ ç³»ç»Ÿå­¦ä¹  Redis ç¼“å­˜æ•°æ®åº“ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°ä¼ä¸šçº§åº”ç”¨ï¼Œæ¶µç›–é«˜æ€§èƒ½ç¼“å­˜ã€åˆ†å¸ƒå¼æ¶æ„ã€é›†ç¾¤éƒ¨ç½²ç­‰æ ¸å¿ƒæŠ€æœ¯ã€‚Redis æ˜¯ç›®å‰æœ€æµè¡Œçš„ NoSQL æ•°æ®åº“ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯äº’è”ç½‘å…¬å¸å¿…å¤‡çš„æŠ€æœ¯æ ˆï¼ŒæŒæ¡ Redis æ˜¯æ¯ä¸ªåç«¯å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- âœ… ç†è§£ Redis çš„æ ¸å¿ƒåŸç†å’Œåº”ç”¨åœºæ™¯
- âœ… ç†Ÿç»ƒæŒæ¡ Redis äº”å¤§æ•°æ®ç±»å‹åŠæ“ä½œå‘½ä»¤
- âœ… æŒæ¡ Redis æŒä¹…åŒ–æœºåˆ¶å’Œæ•°æ®å®‰å…¨
- âœ… ç†Ÿæ‚‰ Spring Boot æ•´åˆ Redis å¼€å‘
- âœ… èƒ½å¤Ÿè§£å†³ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ç­‰é—®é¢˜
- âœ… æŒæ¡ Redis é›†ç¾¤éƒ¨ç½²å’Œé«˜å¯ç”¨æ–¹æ¡ˆ
- âœ… åº”å¯¹å¸¸è§çš„ Redis é¢è¯•é¢˜

## ğŸ“– æ•™ç¨‹ç›®å½•

### [ç¬¬ä¸€ç« ï¼šRedis åŸºç¡€](01-RedisåŸºç¡€.md)
- Redis æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹© Redisï¼Ÿ
- Redis çš„ç‰¹æ€§ä¸ä¼˜åŠ¿
- Redis å®‰è£…ä¸ç¯å¢ƒé…ç½®
- Redis æ•°æ®ç±»å‹æ¦‚è¿°
- åŸºæœ¬å‘½ä»¤ä¸å®¢æˆ·ç«¯ä½¿ç”¨
- Redis é…ç½®æ–‡ä»¶è¯¦è§£

### [ç¬¬äºŒç« ï¼šäº”å¤§æ•°æ®ç±»å‹](02-äº”å¤§æ•°æ®ç±»å‹.md)
- Stringï¼ˆå­—ç¬¦ä¸²ï¼‰- æœ€åŸºç¡€çš„æ•°æ®ç±»å‹
- Listï¼ˆåˆ—è¡¨ï¼‰- æ¶ˆæ¯é˜Ÿåˆ—ä¸æ—¶é—´è½´
- Setï¼ˆé›†åˆï¼‰- å»é‡ä¸é›†åˆè¿ç®—
- Hashï¼ˆå“ˆå¸Œï¼‰- å¯¹è±¡å­˜å‚¨çš„æœ€ä½³é€‰æ‹©
- Zsetï¼ˆæœ‰åºé›†åˆï¼‰- æ’è¡Œæ¦œä¸å»¶æ—¶é˜Ÿåˆ—
- å„ç±»å‹çš„åº”ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ

### [ç¬¬ä¸‰ç« ï¼šæŒä¹…åŒ–æœºåˆ¶](03-æŒä¹…åŒ–æœºåˆ¶.md)
- RDB æŒä¹…åŒ– - å¿«ç…§å­˜å‚¨
- AOF æŒä¹…åŒ– - æ—¥å¿—è®°å½•
- æ··åˆæŒä¹…åŒ– - æœ€ä½³æ–¹æ¡ˆ
- æŒä¹…åŒ–ç­–ç•¥é€‰æ‹©ä¸å¯¹æ¯”
- æ•°æ®æ¢å¤ä¸å¤‡ä»½
- æŒä¹…åŒ–æ€§èƒ½ä¼˜åŒ–

### [ç¬¬å››ç« ï¼šSpring Boot æ•´åˆ Redis](04-SpringBootæ•´åˆRedis.md)
- Spring Data Redis ç®€ä»‹
- RedisTemplate ä½¿ç”¨è¯¦è§£
- åºåˆ—åŒ–é…ç½®ä¸ä¼˜åŒ–
- ç¼“å­˜æ³¨è§£ï¼ˆ@Cacheableã€@CacheEvict ç­‰ï¼‰
- å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·ç¼“å­˜ç³»ç»Ÿ
- åˆ†å¸ƒå¼é”å®ç°

### [ç¬¬äº”ç« ï¼šç¼“å­˜ç­–ç•¥ä¸å®æˆ˜](05-ç¼“å­˜ç­–ç•¥ä¸å®æˆ˜.md)
- ç¼“å­˜ç©¿é€ - å¸ƒéš†è¿‡æ»¤å™¨è§£å†³æ–¹æ¡ˆ
- ç¼“å­˜å‡»ç©¿ - çƒ­ç‚¹æ•°æ®ä¿æŠ¤
- ç¼“å­˜é›ªå´© - è¿‡æœŸæ—¶é—´ç­–ç•¥
- ç¼“å­˜æ›´æ–°ç­–ç•¥ - Cache Aside Pattern
- åŒå†™ä¸€è‡´æ€§é—®é¢˜
- ç¼“å­˜æœ€ä½³å®è·µ

### [ç¬¬å…­ç« ï¼šRedis é›†ç¾¤ä¸é«˜å¯ç”¨](06-Redisé›†ç¾¤ä¸é«˜å¯ç”¨.md)
- ä¸»ä»å¤åˆ¶ - è¯»å†™åˆ†ç¦»
- å“¨å…µæ¨¡å¼ - è‡ªåŠ¨æ•…éšœè½¬ç§»
- Redis Cluster - åˆ†å¸ƒå¼é›†ç¾¤
- é›†ç¾¤æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©
- é«˜å¯ç”¨æ¶æ„è®¾è®¡
- ç›‘æ§ä¸è¿ç»´

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£… Redis

**å‰ç½®è¦æ±‚ï¼š**
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼ˆLinuxã€macOSã€Windowsï¼‰

**Windowsï¼š**
```bash
# 1. ä¸‹è½½ Redis for Windows
https://github.com/microsoftarchive/redis/releases

# 2. è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼ˆå¦‚ï¼šC:\Program Files\Redisï¼‰

# 3. å¯åŠ¨ Redis æœåŠ¡
redis-server.exe redis.windows.conf

# 4. å¯åŠ¨å®¢æˆ·ç«¯æµ‹è¯•
redis-cli.exe
```

**Linuxï¼š**
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install redis-server

# CentOS/RHEL
sudo yum install redis

# æˆ–è€…ç¼–è¯‘å®‰è£…
wget http://download.redis.io/releases/redis-7.0.0.tar.gz
tar xzf redis-7.0.0.tar.gz
cd redis-7.0.0
make
sudo make install

# å¯åŠ¨ Redis
redis-server

# å®¢æˆ·ç«¯è¿æ¥
redis-cli
```

**macOSï¼š**
```bash
# ä½¿ç”¨ Homebrew
brew install redis

# å¯åŠ¨ Redis
brew services start redis

# å®¢æˆ·ç«¯è¿æ¥
redis-cli
```

### åŸºæœ¬æ“ä½œ

```bash
# è¿æ¥ Redis
redis-cli

# å­—ç¬¦ä¸²æ“ä½œ
SET name "John"
GET name
INCR counter
EXPIRE name 60
TTL name

# åˆ—è¡¨æ“ä½œ
LPUSH mylist "item1"
RPUSH mylist "item2"
LRANGE mylist 0 -1
LPOP mylist

# å“ˆå¸Œæ“ä½œ
HSET user:1 name "John"
HSET user:1 age 30
HGETALL user:1
HGET user:1 name

# é›†åˆæ“ä½œ
SADD myset "member1"
SADD myset "member2"
SMEMBERS myset

# æœ‰åºé›†åˆæ“ä½œ
ZADD rank 100 "user1"
ZADD rank 200 "user2"
ZRANGE rank 0 -1 WITHSCORES
```

## ğŸ’¡ å­¦ä¹ å»ºè®®

1. **ç†è®ºä¸å®è·µç»“åˆ** - å…ˆç†è§£ Redis çš„å·¥ä½œåŸç†ï¼Œå†åŠ¨æ‰‹æ“ä½œ
2. **å‘½ä»¤å¤šç»ƒä¹ ** - ç†Ÿç»ƒæŒæ¡å„ç§æ•°æ®ç±»å‹çš„å‘½ä»¤
3. **å…³æ³¨æ€§èƒ½** - å­¦ä¼šåˆ†æ Redis æ€§èƒ½æŒ‡æ ‡
4. **åœºæ™¯é©±åŠ¨** - ç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯å­¦ä¹ 
5. **æ·±å…¥æºç ** - æœ‰èƒ½åŠ›çš„åŒå­¦å¯ä»¥ç ”ç©¶ Redis æºç 

## ğŸŒŸ Redis å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### è¿æ¥ä¸ç®¡ç†
```bash
redis-cli              # è¿æ¥æœ¬åœ° Redis
redis-cli -h 127.0.0.1 -p 6379   # è¿æ¥æŒ‡å®š Redis
AUTH password          # è®¤è¯
PING                   # æµ‹è¯•è¿æ¥
INFO                   # æŸ¥çœ‹æœåŠ¡å™¨ä¿¡æ¯
CONFIG GET *           # æŸ¥çœ‹é…ç½®
```

### é”®æ“ä½œ
```bash
KEYS pattern           # æŸ¥æ‰¾é”®ï¼ˆç”Ÿäº§ç¯å¢ƒæ…ç”¨ï¼‰
EXISTS key             # æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
DEL key                # åˆ é™¤é”®
EXPIRE key seconds     # è®¾ç½®è¿‡æœŸæ—¶é—´
TTL key                # æŸ¥çœ‹å‰©ä½™æ—¶é—´
RENAME key newkey      # é‡å‘½å
TYPE key               # æŸ¥çœ‹ç±»å‹
```

### æ•°æ®åº“æ“ä½œ
```bash
SELECT index           # åˆ‡æ¢æ•°æ®åº“
DBSIZE                # æŸ¥çœ‹é”®æ•°é‡
FLUSHDB               # æ¸…ç©ºå½“å‰æ•°æ®åº“
FLUSHALL              # æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“
```

## ğŸ’¡ Spring Boot æ•´åˆ Redis

### 1. æ·»åŠ ä¾èµ–

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
<!-- å¦‚æœä½¿ç”¨ JSON åºåˆ—åŒ– -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
</dependency>
```

### 2. é…ç½®æ–‡ä»¶

```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password: 
    database: 0
    timeout: 3000ms
    lettuce:
      pool:
        max-active: 8      # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°
        max-idle: 8        # è¿æ¥æ± æœ€å¤§ç©ºé—²è¿æ¥æ•°
        min-idle: 0        # è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°
        max-wait: -1ms     # è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´
```

### 3. é…ç½®ç±»

```java
@Configuration
public class RedisConfig {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);
        
        // ä½¿ç”¨ Jackson2JsonRedisSerializer æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–
        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<>(Object.class);
        ObjectMapper mapper = new ObjectMapper();
        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        mapper.activateDefaultTyping(LazyLoadingJavaTypeValidator.instance, 
                                     ObjectMapper.DefaultTyping.NON_FINAL);
        serializer.setObjectMapper(mapper);
        
        // è®¾ç½® key å’Œ value çš„åºåˆ—åŒ–è§„åˆ™
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(serializer);
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setHashValueSerializer(serializer);
        template.afterPropertiesSet();
        
        return template;
    }
}
```

### 4. ä½¿ç”¨ç¤ºä¾‹

```java
@Service
public class UserService {
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    // å­—ç¬¦ä¸²æ“ä½œ
    public void setUser(String key, User user) {
        redisTemplate.opsForValue().set(key, user, 60, TimeUnit.SECONDS);
    }
    
    public User getUser(String key) {
        return (User) redisTemplate.opsForValue().get(key);
    }
    
    // å“ˆå¸Œæ“ä½œ
    public void setUserField(String key, String field, Object value) {
        redisTemplate.opsForHash().put(key, field, value);
    }
    
    // åˆ—è¡¨æ“ä½œ
    public void pushToList(String key, Object value) {
        redisTemplate.opsForList().rightPush(key, value);
    }
}
```

### 5. ç¼“å­˜æ³¨è§£

```java
@Service
@CacheConfig(cacheNames = "users")
public class UserService {
    
    @Cacheable(key = "#id")
    public User getUserById(Long id) {
        // ä»æ•°æ®åº“æŸ¥è¯¢
        return userRepository.findById(id);
    }
    
    @CachePut(key = "#user.id")
    public User updateUser(User user) {
        // æ›´æ–°æ•°æ®åº“
        return userRepository.save(user);
    }
    
    @CacheEvict(key = "#id")
    public void deleteUser(Long id) {
        // åˆ é™¤æ•°æ®åº“è®°å½•
        userRepository.deleteById(id);
    }
}
```

## ğŸ”¥ å¸¸è§åº”ç”¨åœºæ™¯

1. **ç¼“å­˜** - çƒ­ç‚¹æ•°æ®ç¼“å­˜
2. **Sessionå…±äº«** - åˆ†å¸ƒå¼Session
3. **åˆ†å¸ƒå¼é”** - ä¿è¯åŸå­æ€§
4. **æ’è¡Œæ¦œ** - Zsetå®ç°
5. **æ¶ˆæ¯é˜Ÿåˆ—** - List/Stream
6. **é™æµ** - ä»¤ç‰Œæ¡¶ç®—æ³•

## ğŸ“Š æ•°æ®ç±»å‹é€‰æ‹©

| åœºæ™¯ | æ•°æ®ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| ç¼“å­˜å¯¹è±¡ | String | åºåˆ—åŒ–å­˜å‚¨ |
| è´­ç‰©è½¦ | Hash | å•†å“IDä¸ºfield |
| æ¶ˆæ¯é˜Ÿåˆ— | List | LPUSH/RPOP |
| ç‚¹èµ/å…³æ³¨ | Set | å»é‡ |
| æ’è¡Œæ¦œ | Zset | è‡ªåŠ¨æ’åº |

## ğŸ’¡ æœ€ä½³å®è·µ

1. **åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´** - é¿å…å†…å­˜æº¢å‡º
2. **é¿å…å¤§key** - æ‹†åˆ†ä¸ºå¤šä¸ªå°key
3. **ä½¿ç”¨Pipeline** - æ‰¹é‡æ“ä½œå‡å°‘ç½‘ç»œå¼€é”€
4. **é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹** - æå‡æ€§èƒ½
5. **ç›‘æ§RedisçŠ¶æ€** - åŠæ—¶å‘ç°é—®é¢˜

## ğŸ”¥ é¢è¯•é‡ç‚¹

1. Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ
2. Redisçš„æ•°æ®ç±»å‹åŠåº”ç”¨åœºæ™¯
3. RedisæŒä¹…åŒ–æœºåˆ¶å¯¹æ¯”
4. ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©çš„è§£å†³æ–¹æ¡ˆ
5. Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”ï¼Ÿ
6. Redisä¸»ä»å¤åˆ¶åŸç†
7. Redisé›†ç¾¤æ–¹æ¡ˆå¯¹æ¯”

## ğŸ“š æ¨èèµ„æº

- ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹
- ã€ŠRediså®æˆ˜ã€‹
- [Rediså®˜æ–¹æ–‡æ¡£](https://redis.io/documentation)
- [Rediså‘½ä»¤å‚è€ƒ](http://redisdoc.com/)

---

**å¼€å§‹å­¦ä¹ ** â†’ [01-RedisåŸºç¡€](01-RedisåŸºç¡€.md)
