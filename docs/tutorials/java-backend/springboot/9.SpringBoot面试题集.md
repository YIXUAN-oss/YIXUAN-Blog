---
title: SpringBoot面试题集
---

# SpringBoot面试题集

## 一、基础概念

### 1. 什么是Spring Boot？

**答：**

Spring Boot 是 Spring 框架的扩展，用于简化 Spring 应用的初始搭建和开发过程。

**核心特性：**
- **约定优于配置** - 减少配置文件
- **自动配置** - 根据依赖自动配置
- **独立运行** - 内嵌服务器，jar 包即可运行
- **生产就绪** - 内置监控、健康检查
- **无代码生成** - 不生成代码，不需要XML配置

---

### 2. Spring Boot的优势？

**答：**

| 特性 | Spring | Spring Boot |
|------|--------|-------------|
| 配置 | 繁琐的 XML | 简洁的 yml |
| 依赖管理 | 手动管理版本 | Starter 自动管理 |
| 服务器 | 需要外部 Tomcat | 内嵌 Tomcat |
| 部署 | war 包 | jar 包直接运行 |
| 开发效率 | 低 | 高 |

**核心优势：**
- 快速开发
- 简化配置
- 独立运行
- 生产就绪

---

### 3. Spring Boot核心注解？

**答：**

**@SpringBootApplication** 是核心注解，由三个注解组成：

```java
@SpringBootApplication
= @SpringBootConfiguration     // 配置类
+ @EnableAutoConfiguration    // 自动配置
+ @ComponentScan             // 组件扫描
```

**说明：**
- `@SpringBootConfiguration`：等价于 @Configuration
- `@EnableAutoConfiguration`：开启自动配置
- `@ComponentScan`：扫描当前包及子包

---

## 二、自动配置

### 4. Spring Boot自动配置原理？

**答：**

**执行流程：**
```
1. @SpringBootApplication 启动
2. @EnableAutoConfiguration 生效
3. AutoConfigurationImportSelector 执行
4. 读取 META-INF/spring.factories
5. 加载所有自动配置类
6. 根据 @Conditional 条件过滤
7. 生效的配置类注册到容器
```

**核心机制：**
- **SPI 机制**：通过 spring.factories 加载配置类
- **条件注解**：根据条件决定是否生效
- **自动装配**：自动创建和配置 Bean

---

### 5. 常用的条件注解？

**答：**

| 注解 | 说明 |
|------|------|
| @ConditionalOnClass | 类路径存在指定类 |
| @ConditionalOnMissingClass | 类路径不存在指定类 |
| @ConditionalOnBean | 容器中存在指定 Bean |
| @ConditionalOnMissingBean | 容器中不存在指定 Bean |
| @ConditionalOnProperty | 配置文件存在指定属性 |
| @ConditionalOnWebApplication | Web 应用 |

**示例：**
```java
@Configuration
@ConditionalOnClass(DataSource.class)
public class DataSourceAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public DataSource dataSource() {
        // 只有容器中不存在 DataSource 才创建
    }
}
```

---

### 6. 如何自定义Starter？

**答：**

**步骤：**

1. **创建 Maven 项目**
   - 命名：`xxx-spring-boot-starter`

2. **创建配置属性类**
```java
@ConfigurationProperties(prefix = "xxx")
@Data
public class XxxProperties {
    private String name;
}
```

3. **创建服务类**
```java
public class XxxService {
    private XxxProperties properties;
    
    public XxxService(XxxProperties properties) {
        this.properties = properties;
    }
}
```

4. **创建自动配置类**
```java
@Configuration
@EnableConfigurationProperties(XxxProperties.class)
public class XxxAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public XxxService xxxService(XxxProperties properties) {
        return new XxxService(properties);
    }
}
```

5. **创建 spring.factories**
```properties
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.XxxAutoConfiguration
```

---

## 三、配置相关

### 7. Spring Boot配置文件加载顺序？

**答：**

**优先级（从高到低）：**
```
1. 命令行参数
2. Java 系统属性
3. 操作系统环境变量
4. jar 包外部的 application-{profile}.yml
5. jar 包内部的 application-{profile}.yml
6. jar 包外部的 application.yml
7. jar 包内部的 application.yml
8. @PropertySource
9. 默认属性
```

---

### 8. 如何实现多环境配置？

**答：**

**方式1：多文件**
```
application.yml              # 主配置
application-dev.yml          # 开发环境
application-test.yml         # 测试环境
application-prod.yml         # 生产环境
```

**主配置文件：**
```yaml
spring:
  profiles:
    active: dev  # 激活开发环境
```

**方式2：单文件（不推荐）**
```yaml
spring:
  profiles:
    active: dev

---
spring:
  profiles: dev
server:
  port: 8080

---
spring:
  profiles: prod
server:
  port: 80
```

**激活方式：**
```bash
# 命令行
java -jar app.jar --spring.profiles.active=prod

# JVM参数
java -Dspring.profiles.active=prod -jar app.jar
```

---

### 9. @Value和@ConfigurationProperties的区别？

**答：**

| 特性 | @Value | @ConfigurationProperties |
|------|--------|-------------------------|
| 功能 | 单个属性注入 | 批量属性注入 |
| 松散绑定 | 不支持 | 支持 |
| SpEL | 支持 | 不支持 |
| JSR-303验证 | 不支持 | 支持 |
| 复杂类型 | 不支持 | 支持 |
| 推荐场景 | 简单配置 | 复杂配置 |

**示例：**
```java
// @Value
@Value("${server.port}")
private Integer port;

// @ConfigurationProperties
@ConfigurationProperties(prefix = "app")
@Data
public class AppConfig {
    private String name;
    private String version;
}
```

---

## 四、整合框架

### 10. Spring Boot如何整合MyBatis？

**答：**

**步骤：**

1. **添加依赖**
```xml
<dependency>
    <groupId>org.mybatis.spring.boot</groupId>
    <artifactId>mybatis-spring-boot-starter</artifactId>
</dependency>
```

2. **配置数据源**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test
    username: root
    password: 123456

mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.example.entity
```

3. **创建 Mapper**
```java
@Mapper
public interface UserMapper {
    List<User> selectAll();
}
```

---

### 11. Spring Boot如何整合Redis？

**答：**

**步骤：**

1. **添加依赖**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

2. **配置**
```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password:
```

3. **使用**
```java
@Autowired
private RedisTemplate<String, Object> redisTemplate;

public void set(String key, Object value) {
    redisTemplate.opsForValue().set(key, value);
}
```

---

## 五、实战经验

### 12. Spring Boot项目如何优化启动速度？

**答：**

**优化方法：**

1. **减少自动配置**
```java
@SpringBootApplication(exclude = {
    DataSourceAutoConfiguration.class,
    RedisAutoConfiguration.class
})
```

2. **懒加载**
```yaml
spring:
  main:
    lazy-initialization: true
```

3. **减少依赖**
   - 移除不必要的 starter
   - 使用按需加载

4. **JVM 参数优化**
```bash
java -Xms512m -Xmx512m -jar app.jar
```

---

### 13. 如何实现接口幂等性？

**答：**

**方案1：唯一索引**
- 数据库设置唯一索引
- 重复插入会报错

**方案2：Token机制**
```java
// 获取Token
String token = UUID.randomUUID().toString();
redisTemplate.opsForValue().set("token:" + token, "1", 5, TimeUnit.MINUTES);

// 提交时验证Token
String key = "token:" + token;
Boolean deleted = redisTemplate.delete(key);
if (!deleted) {
    throw new BusinessException("请勿重复提交");
}
```

**方案3：分布式锁**
```java
String lockKey = "lock:order:" + orderId;
if (redisLock.lock(lockKey, uuid, 30)) {
    // 处理业务
    redisLock.unlock(lockKey, uuid);
}
```

---

### 14. 如何实现分布式Session？

**答：**

**方案1：Spring Session + Redis**

**添加依赖：**
```xml
<dependency>
    <groupId>org.springframework.session</groupId>
    <artifactId>spring-session-data-redis</artifactId>
</dependency>
```

**配置：**
```yaml
spring:
  session:
    store-type: redis
    timeout: 1800
```

**使用：**
```java
// 自动将 Session 存储到 Redis
request.getSession().setAttribute("user", user);
```

---

### 15. Spring Boot如何实现优雅停机？

**答：**

**配置：**
```yaml
server:
  shutdown: graceful  # 优雅停机

spring:
  lifecycle:
    timeout-per-shutdown-phase: 30s  # 超时时间
```

**效果：**
- 停止接收新请求
- 等待正在处理的请求完成
- 超时后强制关闭

---

## 六、综合题

### 16. Spring Boot和Spring Cloud的关系？

**答：**

| 特性 | Spring Boot | Spring Cloud |
|------|-----------|-------------|
| 定位 | 单体应用开发 | 微服务架构 |
| 功能 | 简化配置 | 服务治理 |
| 依赖 | 独立 | 基于 Spring Boot |
| 使用场景 | 快速开发 | 分布式系统 |

**关系：**
- Spring Cloud 基于 Spring Boot 构建
- Spring Boot 是基础，Spring Cloud 是扩展

---

### 17. 生产环境部署注意事项？

**答：**

**1. 配置优化**
```yaml
server:
  tomcat:
    max-threads: 200
    accept-count: 100

logging:
  level:
    root: WARN
```

**2. 打包优化**
```bash
mvn clean package -Dmaven.test.skip=true
```

**3. JVM 参数**
```bash
java -Xms2g -Xmx2g -XX:+UseG1GC -jar app.jar
```

**4. 监控**
- 使用 Actuator 监控
- 使用 Prometheus + Grafana

**5. 日志管理**
- 按天滚动
- 保留30天
- 错误单独记录

---

## 七、总结

### 高频考点

✅ **必须掌握：**
- Spring Boot 自动配置原理
- Starter 机制
- 配置文件加载顺序
- 多环境配置
- 常用整合（MyBatis、Redis）
- JWT 认证

✅ **加分项：**
- 自定义 Starter
- 源码理解
- 性能优化
- 分布式场景

### 面试技巧

1. **先说原理，再举例子**
2. **画图说明执行流程**
3. **对比 Spring 和 Spring Boot**
4. **结合实际项目经验**
5. **说明优化方案**

---

**恭喜你完成 Spring Boot 学习！🎉**
