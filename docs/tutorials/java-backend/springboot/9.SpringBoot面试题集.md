---
title: SpringBooté¢è¯•é¢˜é›†
---

# SpringBooté¢è¯•é¢˜é›†

## ä¸€ã€åŸºç¡€æ¦‚å¿µ

### 1. ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿ

**ç­”ï¼š**

Spring Boot æ˜¯ Spring æ¡†æ¶çš„æ‰©å±•ï¼Œç”¨äºç®€åŒ– Spring åº”ç”¨çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- **çº¦å®šä¼˜äºé…ç½®** - å‡å°‘é…ç½®æ–‡ä»¶
- **è‡ªåŠ¨é…ç½®** - æ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®
- **ç‹¬ç«‹è¿è¡Œ** - å†…åµŒæœåŠ¡å™¨ï¼Œjar åŒ…å³å¯è¿è¡Œ
- **ç”Ÿäº§å°±ç»ª** - å†…ç½®ç›‘æ§ã€å¥åº·æ£€æŸ¥
- **æ— ä»£ç ç”Ÿæˆ** - ä¸ç”Ÿæˆä»£ç ï¼Œä¸éœ€è¦XMLé…ç½®

---

### 2. Spring Bootçš„ä¼˜åŠ¿ï¼Ÿ

**ç­”ï¼š**

| ç‰¹æ€§ | Spring | Spring Boot |
|------|--------|-------------|
| é…ç½® | ç¹ççš„ XML | ç®€æ´çš„ yml |
| ä¾èµ–ç®¡ç† | æ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬ | Starter è‡ªåŠ¨ç®¡ç† |
| æœåŠ¡å™¨ | éœ€è¦å¤–éƒ¨ Tomcat | å†…åµŒ Tomcat |
| éƒ¨ç½² | war åŒ… | jar åŒ…ç›´æ¥è¿è¡Œ |
| å¼€å‘æ•ˆç‡ | ä½ | é«˜ |

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- å¿«é€Ÿå¼€å‘
- ç®€åŒ–é…ç½®
- ç‹¬ç«‹è¿è¡Œ
- ç”Ÿäº§å°±ç»ª

---

### 3. Spring Bootæ ¸å¿ƒæ³¨è§£ï¼Ÿ

**ç­”ï¼š**

**@SpringBootApplication** æ˜¯æ ¸å¿ƒæ³¨è§£ï¼Œç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆï¼š

```java
@SpringBootApplication
= @SpringBootConfiguration     // é…ç½®ç±»
+ @EnableAutoConfiguration    // è‡ªåŠ¨é…ç½®
+ @ComponentScan             // ç»„ä»¶æ‰«æ
```

**è¯´æ˜ï¼š**
- `@SpringBootConfiguration`ï¼šç­‰ä»·äº @Configuration
- `@EnableAutoConfiguration`ï¼šå¼€å¯è‡ªåŠ¨é…ç½®
- `@ComponentScan`ï¼šæ‰«æå½“å‰åŒ…åŠå­åŒ…

---

## äºŒã€è‡ªåŠ¨é…ç½®

### 4. Spring Bootè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ

**ç­”ï¼š**

**æ‰§è¡Œæµç¨‹ï¼š**
```
1. @SpringBootApplication å¯åŠ¨
2. @EnableAutoConfiguration ç”Ÿæ•ˆ
3. AutoConfigurationImportSelector æ‰§è¡Œ
4. è¯»å– META-INF/spring.factories
5. åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»
6. æ ¹æ® @Conditional æ¡ä»¶è¿‡æ»¤
7. ç”Ÿæ•ˆçš„é…ç½®ç±»æ³¨å†Œåˆ°å®¹å™¨
```

**æ ¸å¿ƒæœºåˆ¶ï¼š**
- **SPI æœºåˆ¶**ï¼šé€šè¿‡ spring.factories åŠ è½½é…ç½®ç±»
- **æ¡ä»¶æ³¨è§£**ï¼šæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦ç”Ÿæ•ˆ
- **è‡ªåŠ¨è£…é…**ï¼šè‡ªåŠ¨åˆ›å»ºå’Œé…ç½® Bean

---

### 5. å¸¸ç”¨çš„æ¡ä»¶æ³¨è§£ï¼Ÿ

**ç­”ï¼š**

| æ³¨è§£ | è¯´æ˜ |
|------|------|
| @ConditionalOnClass | ç±»è·¯å¾„å­˜åœ¨æŒ‡å®šç±» |
| @ConditionalOnMissingClass | ç±»è·¯å¾„ä¸å­˜åœ¨æŒ‡å®šç±» |
| @ConditionalOnBean | å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®š Bean |
| @ConditionalOnMissingBean | å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®š Bean |
| @ConditionalOnProperty | é…ç½®æ–‡ä»¶å­˜åœ¨æŒ‡å®šå±æ€§ |
| @ConditionalOnWebApplication | Web åº”ç”¨ |

**ç¤ºä¾‹ï¼š**
```java
@Configuration
@ConditionalOnClass(DataSource.class)
public class DataSourceAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public DataSource dataSource() {
        // åªæœ‰å®¹å™¨ä¸­ä¸å­˜åœ¨ DataSource æ‰åˆ›å»º
    }
}
```

---

### 6. å¦‚ä½•è‡ªå®šä¹‰Starterï¼Ÿ

**ç­”ï¼š**

**æ­¥éª¤ï¼š**

1. **åˆ›å»º Maven é¡¹ç›®**
   - å‘½åï¼š`xxx-spring-boot-starter`

2. **åˆ›å»ºé…ç½®å±æ€§ç±»**
```java
@ConfigurationProperties(prefix = "xxx")
@Data
public class XxxProperties {
    private String name;
}
```

3. **åˆ›å»ºæœåŠ¡ç±»**
```java
public class XxxService {
    private XxxProperties properties;
    
    public XxxService(XxxProperties properties) {
        this.properties = properties;
    }
}
```

4. **åˆ›å»ºè‡ªåŠ¨é…ç½®ç±»**
```java
@Configuration
@EnableConfigurationProperties(XxxProperties.class)
public class XxxAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public XxxService xxxService(XxxProperties properties) {
        return new XxxService(properties);
    }
}
```

5. **åˆ›å»º spring.factories**
```properties
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.XxxAutoConfiguration
```

---

## ä¸‰ã€é…ç½®ç›¸å…³

### 7. Spring Booté…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼Ÿ

**ç­”ï¼š**

**ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š**
```
1. å‘½ä»¤è¡Œå‚æ•°
2. Java ç³»ç»Ÿå±æ€§
3. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
4. jar åŒ…å¤–éƒ¨çš„ application-{profile}.yml
5. jar åŒ…å†…éƒ¨çš„ application-{profile}.yml
6. jar åŒ…å¤–éƒ¨çš„ application.yml
7. jar åŒ…å†…éƒ¨çš„ application.yml
8. @PropertySource
9. é»˜è®¤å±æ€§
```

---

### 8. å¦‚ä½•å®ç°å¤šç¯å¢ƒé…ç½®ï¼Ÿ

**ç­”ï¼š**

**æ–¹å¼1ï¼šå¤šæ–‡ä»¶**
```
application.yml              # ä¸»é…ç½®
application-dev.yml          # å¼€å‘ç¯å¢ƒ
application-test.yml         # æµ‹è¯•ç¯å¢ƒ
application-prod.yml         # ç”Ÿäº§ç¯å¢ƒ
```

**ä¸»é…ç½®æ–‡ä»¶ï¼š**
```yaml
spring:
  profiles:
    active: dev  # æ¿€æ´»å¼€å‘ç¯å¢ƒ
```

**æ–¹å¼2ï¼šå•æ–‡ä»¶ï¼ˆä¸æ¨èï¼‰**
```yaml
spring:
  profiles:
    active: dev

---
spring:
  profiles: dev
server:
  port: 8080

---
spring:
  profiles: prod
server:
  port: 80
```

**æ¿€æ´»æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
java -jar app.jar --spring.profiles.active=prod

# JVMå‚æ•°
java -Dspring.profiles.active=prod -jar app.jar
```

---

### 9. @Valueå’Œ@ConfigurationPropertiesçš„åŒºåˆ«ï¼Ÿ

**ç­”ï¼š**

| ç‰¹æ€§ | @Value | @ConfigurationProperties |
|------|--------|-------------------------|
| åŠŸèƒ½ | å•ä¸ªå±æ€§æ³¨å…¥ | æ‰¹é‡å±æ€§æ³¨å…¥ |
| æ¾æ•£ç»‘å®š | ä¸æ”¯æŒ | æ”¯æŒ |
| SpEL | æ”¯æŒ | ä¸æ”¯æŒ |
| JSR-303éªŒè¯ | ä¸æ”¯æŒ | æ”¯æŒ |
| å¤æ‚ç±»å‹ | ä¸æ”¯æŒ | æ”¯æŒ |
| æ¨èåœºæ™¯ | ç®€å•é…ç½® | å¤æ‚é…ç½® |

**ç¤ºä¾‹ï¼š**
```java
// @Value
@Value("${server.port}")
private Integer port;

// @ConfigurationProperties
@ConfigurationProperties(prefix = "app")
@Data
public class AppConfig {
    private String name;
    private String version;
}
```

---

## å››ã€æ•´åˆæ¡†æ¶

### 10. Spring Bootå¦‚ä½•æ•´åˆMyBatisï¼Ÿ

**ç­”ï¼š**

**æ­¥éª¤ï¼š**

1. **æ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.mybatis.spring.boot</groupId>
    <artifactId>mybatis-spring-boot-starter</artifactId>
</dependency>
```

2. **é…ç½®æ•°æ®æº**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test
    username: root
    password: 123456

mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.example.entity
```

3. **åˆ›å»º Mapper**
```java
@Mapper
public interface UserMapper {
    List<User> selectAll();
}
```

---

### 11. Spring Bootå¦‚ä½•æ•´åˆRedisï¼Ÿ

**ç­”ï¼š**

**æ­¥éª¤ï¼š**

1. **æ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

2. **é…ç½®**
```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password:
```

3. **ä½¿ç”¨**
```java
@Autowired
private RedisTemplate<String, Object> redisTemplate;

public void set(String key, Object value) {
    redisTemplate.opsForValue().set(key, value);
}
```

---

## äº”ã€å®æˆ˜ç»éªŒ

### 12. Spring Booté¡¹ç›®å¦‚ä½•ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ï¼Ÿ

**ç­”ï¼š**

**ä¼˜åŒ–æ–¹æ³•ï¼š**

1. **å‡å°‘è‡ªåŠ¨é…ç½®**
```java
@SpringBootApplication(exclude = {
    DataSourceAutoConfiguration.class,
    RedisAutoConfiguration.class
})
```

2. **æ‡’åŠ è½½**
```yaml
spring:
  main:
    lazy-initialization: true
```

3. **å‡å°‘ä¾èµ–**
   - ç§»é™¤ä¸å¿…è¦çš„ starter
   - ä½¿ç”¨æŒ‰éœ€åŠ è½½

4. **JVM å‚æ•°ä¼˜åŒ–**
```bash
java -Xms512m -Xmx512m -jar app.jar
```

---

### 13. å¦‚ä½•å®ç°æ¥å£å¹‚ç­‰æ€§ï¼Ÿ

**ç­”ï¼š**

**æ–¹æ¡ˆ1ï¼šå”¯ä¸€ç´¢å¼•**
- æ•°æ®åº“è®¾ç½®å”¯ä¸€ç´¢å¼•
- é‡å¤æ’å…¥ä¼šæŠ¥é”™

**æ–¹æ¡ˆ2ï¼šTokenæœºåˆ¶**
```java
// è·å–Token
String token = UUID.randomUUID().toString();
redisTemplate.opsForValue().set("token:" + token, "1", 5, TimeUnit.MINUTES);

// æäº¤æ—¶éªŒè¯Token
String key = "token:" + token;
Boolean deleted = redisTemplate.delete(key);
if (!deleted) {
    throw new BusinessException("è¯·å‹¿é‡å¤æäº¤");
}
```

**æ–¹æ¡ˆ3ï¼šåˆ†å¸ƒå¼é”**
```java
String lockKey = "lock:order:" + orderId;
if (redisLock.lock(lockKey, uuid, 30)) {
    // å¤„ç†ä¸šåŠ¡
    redisLock.unlock(lockKey, uuid);
}
```

---

### 14. å¦‚ä½•å®ç°åˆ†å¸ƒå¼Sessionï¼Ÿ

**ç­”ï¼š**

**æ–¹æ¡ˆ1ï¼šSpring Session + Redis**

**æ·»åŠ ä¾èµ–ï¼š**
```xml
<dependency>
    <groupId>org.springframework.session</groupId>
    <artifactId>spring-session-data-redis</artifactId>
</dependency>
```

**é…ç½®ï¼š**
```yaml
spring:
  session:
    store-type: redis
    timeout: 1800
```

**ä½¿ç”¨ï¼š**
```java
// è‡ªåŠ¨å°† Session å­˜å‚¨åˆ° Redis
request.getSession().setAttribute("user", user);
```

---

### 15. Spring Bootå¦‚ä½•å®ç°ä¼˜é›…åœæœºï¼Ÿ

**ç­”ï¼š**

**é…ç½®ï¼š**
```yaml
server:
  shutdown: graceful  # ä¼˜é›…åœæœº

spring:
  lifecycle:
    timeout-per-shutdown-phase: 30s  # è¶…æ—¶æ—¶é—´
```

**æ•ˆæœï¼š**
- åœæ­¢æ¥æ”¶æ–°è¯·æ±‚
- ç­‰å¾…æ­£åœ¨å¤„ç†çš„è¯·æ±‚å®Œæˆ
- è¶…æ—¶åå¼ºåˆ¶å…³é—­

---

## å…­ã€ç»¼åˆé¢˜

### 16. Spring Bootå’ŒSpring Cloudçš„å…³ç³»ï¼Ÿ

**ç­”ï¼š**

| ç‰¹æ€§ | Spring Boot | Spring Cloud |
|------|-----------|-------------|
| å®šä½ | å•ä½“åº”ç”¨å¼€å‘ | å¾®æœåŠ¡æ¶æ„ |
| åŠŸèƒ½ | ç®€åŒ–é…ç½® | æœåŠ¡æ²»ç† |
| ä¾èµ– | ç‹¬ç«‹ | åŸºäº Spring Boot |
| ä½¿ç”¨åœºæ™¯ | å¿«é€Ÿå¼€å‘ | åˆ†å¸ƒå¼ç³»ç»Ÿ |

**å…³ç³»ï¼š**
- Spring Cloud åŸºäº Spring Boot æ„å»º
- Spring Boot æ˜¯åŸºç¡€ï¼ŒSpring Cloud æ˜¯æ‰©å±•

---

### 17. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ³¨æ„äº‹é¡¹ï¼Ÿ

**ç­”ï¼š**

**1. é…ç½®ä¼˜åŒ–**
```yaml
server:
  tomcat:
    max-threads: 200
    accept-count: 100

logging:
  level:
    root: WARN
```

**2. æ‰“åŒ…ä¼˜åŒ–**
```bash
mvn clean package -Dmaven.test.skip=true
```

**3. JVM å‚æ•°**
```bash
java -Xms2g -Xmx2g -XX:+UseG1GC -jar app.jar
```

**4. ç›‘æ§**
- ä½¿ç”¨ Actuator ç›‘æ§
- ä½¿ç”¨ Prometheus + Grafana

**5. æ—¥å¿—ç®¡ç†**
- æŒ‰å¤©æ»šåŠ¨
- ä¿ç•™30å¤©
- é”™è¯¯å•ç‹¬è®°å½•

---

## ä¸ƒã€æ€»ç»“

### é«˜é¢‘è€ƒç‚¹

âœ… **å¿…é¡»æŒæ¡ï¼š**
- Spring Boot è‡ªåŠ¨é…ç½®åŸç†
- Starter æœºåˆ¶
- é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº
- å¤šç¯å¢ƒé…ç½®
- å¸¸ç”¨æ•´åˆï¼ˆMyBatisã€Redisï¼‰
- JWT è®¤è¯

âœ… **åŠ åˆ†é¡¹ï¼š**
- è‡ªå®šä¹‰ Starter
- æºç ç†è§£
- æ€§èƒ½ä¼˜åŒ–
- åˆ†å¸ƒå¼åœºæ™¯

### é¢è¯•æŠ€å·§

1. **å…ˆè¯´åŸç†ï¼Œå†ä¸¾ä¾‹å­**
2. **ç”»å›¾è¯´æ˜æ‰§è¡Œæµç¨‹**
3. **å¯¹æ¯” Spring å’Œ Spring Boot**
4. **ç»“åˆå®é™…é¡¹ç›®ç»éªŒ**
5. **è¯´æ˜ä¼˜åŒ–æ–¹æ¡ˆ**

---

**æ­å–œä½ å®Œæˆ Spring Boot å­¦ä¹ ï¼ğŸ‰**
