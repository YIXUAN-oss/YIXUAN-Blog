---
title: Spring æ¡†æ¶æ•™ç¨‹
autoGroup: false
autoSort: false
sidebarDepth: 0
---

# Spring æ¡†æ¶æ•™ç¨‹

> ä»é›¶å¼€å§‹æŒæ¡ Spring æ¡†æ¶ï¼Œæˆä¸º Java ä¼ä¸šçº§å¼€å‘ä¸“å®¶

## ğŸ“š æ•™ç¨‹ç®€ä»‹

æœ¬æ•™ç¨‹å°†å¸¦ä½ ç³»ç»Ÿå­¦ä¹  Spring æ¡†æ¶ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜åº”ç”¨ï¼Œæ¶µç›– IoCã€DIã€AOPã€äº‹åŠ¡ç®¡ç†ç­‰æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚Spring æ˜¯ Java ä¼ä¸šçº§å¼€å‘çš„åŸºçŸ³ï¼ŒæŒæ¡ Spring æ˜¯æ¯ä¸ª Java å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- âœ… æ·±å…¥ç†è§£ IoC å’Œ DI çš„æ ¸å¿ƒæ€æƒ³
- âœ… ç†Ÿç»ƒæŒæ¡ Spring Bean çš„ç®¡ç†
- âœ… æŒæ¡ AOP é¢å‘åˆ‡é¢ç¼–ç¨‹
- âœ… ç†Ÿæ‚‰ Spring äº‹åŠ¡ç®¡ç†æœºåˆ¶
- âœ… æŒæ¡ Spring å¸¸ç”¨æ³¨è§£
- âœ… èƒ½å¤Ÿè¿›è¡Œ Spring é¡¹ç›®å¼€å‘
- âœ… åº”å¯¹å¸¸è§çš„ Spring é¢è¯•é¢˜

## ğŸ“– æ•™ç¨‹ç›®å½•

### [ç¬¬ä¸€ç« ï¼šSpring åŸºç¡€å…¥é—¨](1.SpringåŸºç¡€å…¥é—¨.md)
- Spring æ˜¯ä»€ä¹ˆï¼ŸSpring çš„æ ¸å¿ƒç‰¹æ€§
- Spring æ¡†æ¶ä½“ç³»ç»“æ„
- IoC æ§åˆ¶åè½¬è¯¦è§£
- DI ä¾èµ–æ³¨å…¥è¯¦è§£
- Bean çš„é…ç½®ä¸ç®¡ç†
- åˆ›å»ºç¬¬ä¸€ä¸ª Spring é¡¹ç›®

### [ç¬¬äºŒç« ï¼šSpring æ ¸å¿ƒæ³¨è§£](2.Springæ ¸å¿ƒæ³¨è§£.md)
- ç»„ä»¶æ³¨è§£ï¼š@Componentã€@Serviceã€@Repositoryã€@Controller
- ä¾èµ–æ³¨å…¥æ³¨è§£ï¼š@Autowiredã€@Resourceã€@Qualifier
- é…ç½®æ³¨è§£ï¼š@Configurationã€@Beanã€@ComponentScan
- å±æ€§æ³¨è§£ï¼š@Valueã€@PropertySource
- ä½œç”¨åŸŸæ³¨è§£ï¼š@Scope
- ç”Ÿå‘½å‘¨æœŸæ³¨è§£ï¼š@PostConstructã€@PreDestroy

### [ç¬¬ä¸‰ç« ï¼šSpring AOP](3.SpringAOP.md)
- AOP æ ¸å¿ƒæ¦‚å¿µ
- AOP çš„å®ç°æ–¹å¼ï¼ˆJDK åŠ¨æ€ä»£ç† vs CGLIBï¼‰
- åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£
- é€šçŸ¥ç±»å‹ï¼šå‰ç½®ã€åç½®ã€ç¯ç»•ã€å¼‚å¸¸ã€æœ€ç»ˆ
- AOP å®æˆ˜åº”ç”¨ï¼ˆæ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ï¼‰
- AOP å¸¸è§é—®é¢˜

### [ç¬¬å››ç« ï¼šSpring äº‹åŠ¡ç®¡ç†](4.Springäº‹åŠ¡ç®¡ç†.md)
- äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µ
- ç¼–ç¨‹å¼äº‹åŠ¡ vs å£°æ˜å¼äº‹åŠ¡
- @Transactional æ³¨è§£è¯¦è§£
- äº‹åŠ¡ä¼ æ’­è¡Œä¸º
- äº‹åŠ¡éš”ç¦»çº§åˆ«
- äº‹åŠ¡å¤±æ•ˆåœºæ™¯åŠè§£å†³æ–¹æ¡ˆ

### [ç¬¬äº”ç« ï¼šSpring é¢è¯•é¢˜é›†](5.Springé¢è¯•é¢˜é›†.md)
- IoC å’Œ DI ç›¸å…³é¢è¯•é¢˜
- Bean ç”Ÿå‘½å‘¨æœŸé¢è¯•é¢˜
- AOP ç›¸å…³é¢è¯•é¢˜
- äº‹åŠ¡ç®¡ç†é¢è¯•é¢˜
- é«˜é¢‘é¢è¯•é¢˜è§£æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

**å‰ç½®è¦æ±‚ï¼š**
- JDK 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.5+
- IDEï¼ˆæ¨è IntelliJ IDEAï¼‰

### åˆ›å»ºç¬¬ä¸€ä¸ª Spring é¡¹ç›®

**æ­¥éª¤1ï¼šåˆ›å»º Maven é¡¹ç›®**

```bash
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=spring-demo \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=false
```

**æ­¥éª¤2ï¼šæ·»åŠ  Spring ä¾èµ–**

```xml
<dependencies>
    <!-- Spring Context -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>5.3.30</version>
    </dependency>
    
    <!-- JUnit -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.13.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

**æ­¥éª¤3ï¼šåˆ›å»º Bean**

```java
package com.example.service;

public class UserService {
    public void sayHello() {
        System.out.println("Hello Spring!");
    }
}
```

**æ­¥éª¤4ï¼šåˆ›å»º Spring é…ç½®**

**æ–¹å¼1ï¼šXML é…ç½®**

`applicationContext.xml`:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">
    
    <bean id="userService" class="com.example.service.UserService"/>
</beans>
```

**æ–¹å¼2ï¼šæ³¨è§£é…ç½®ï¼ˆæ¨èï¼‰**

```java
@Configuration
@ComponentScan("com.example")
public class AppConfig {
}

@Service
public class UserService {
    public void sayHello() {
        System.out.println("Hello Spring!");
    }
}
```

**æ­¥éª¤5ï¼šæµ‹è¯•è¿è¡Œ**

```java
public class App {
    public static void main(String[] args) {
        // XML æ–¹å¼
        ApplicationContext context = 
            new ClassPathXmlApplicationContext("applicationContext.xml");
        
        // æ³¨è§£æ–¹å¼
        ApplicationContext context = 
            new AnnotationConfigApplicationContext(AppConfig.class);
        
        UserService userService = context.getBean(UserService.class);
        userService.sayHello();
    }
}
```

## ğŸ’¡ å­¦ä¹ å»ºè®®

1. **ç†è§£æ ¸å¿ƒæ€æƒ³** - æ·±å…¥ç†è§£ IoC å’Œ DIï¼Œè¿™æ˜¯ Spring çš„åŸºç¡€
2. **åŠ¨æ‰‹å®è·µ** - æ¯å­¦å®Œä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œç«‹å³ç¼–ç å®è·µ
3. **å¯¹æ¯”å­¦ä¹ ** - å¯¹æ¯” XML é…ç½®å’Œæ³¨è§£é…ç½®çš„å·®å¼‚
4. **é˜…è¯»æºç ** - æœ‰èƒ½åŠ›çš„åŒå­¦å¯ä»¥é˜…è¯» Spring æºç 
5. **å¾ªåºæ¸è¿›** - ä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥æŒæ¡

## ğŸŒŸ Spring æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ

### IoCï¼ˆæ§åˆ¶åè½¬ï¼‰

**ä¼ ç»Ÿæ–¹å¼ï¼š**
```java
public class UserService {
    private UserDao userDao = new UserDao(); // è‡ªå·±åˆ›å»ºä¾èµ–
}
```

**Spring IoCï¼š**
```java
@Service
public class UserService {
    @Autowired
    private UserDao userDao; // Spring æ³¨å…¥ä¾èµ–
}
```

**ä¼˜åŠ¿ï¼š**
- è§£è€¦ï¼šå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”± Spring ç®¡ç†
- æ˜“æµ‹è¯•ï¼šå¯ä»¥æ–¹ä¾¿åœ°æ³¨å…¥ Mock å¯¹è±¡
- æ˜“ç»´æŠ¤ï¼šä¿®æ”¹ä¾èµ–ä¸éœ€è¦æ”¹åŠ¨ä»£ç 

### DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰

**ä¸‰ç§æ³¨å…¥æ–¹å¼ï¼š**

1. **æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰**
```java
@Service
public class UserService {
    private final UserDao userDao;
    
    @Autowired
    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }
}
```

2. **Setter æ³¨å…¥**
```java
@Service
public class UserService {
    private UserDao userDao;
    
    @Autowired
    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }
}
```

3. **å­—æ®µæ³¨å…¥ï¼ˆä¸æ¨èï¼‰**
```java
@Service
public class UserService {
    @Autowired
    private UserDao userDao;
}
```

### Bean ä½œç”¨åŸŸ

| ä½œç”¨åŸŸ | è¯´æ˜ |
|--------|------|
| singleton | å•ä¾‹ï¼ˆé»˜è®¤ï¼‰ |
| prototype | æ¯æ¬¡è·å–åˆ›å»ºæ–°å®ä¾‹ |
| request | Web åº”ç”¨ä¸­æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªå®ä¾‹ |
| session | Web åº”ç”¨ä¸­æ¯ä¸ªä¼šè¯ä¸€ä¸ªå®ä¾‹ |

### AOP æ ¸å¿ƒæ¦‚å¿µ

```
åˆ‡é¢ï¼ˆAspectï¼‰= åˆ‡ç‚¹ï¼ˆPointcutï¼‰ + é€šçŸ¥ï¼ˆAdviceï¼‰

åˆ‡ç‚¹ï¼šåœ¨å“ªé‡Œåˆ‡å…¥
é€šçŸ¥ï¼šåˆ‡å…¥ååšä»€ä¹ˆ
```

**é€šçŸ¥ç±»å‹ï¼š**
- @Beforeï¼šå‰ç½®é€šçŸ¥
- @Afterï¼šåç½®é€šçŸ¥
- @AfterReturningï¼šè¿”å›åé€šçŸ¥
- @AfterThrowingï¼šå¼‚å¸¸é€šçŸ¥
- @Aroundï¼šç¯ç»•é€šçŸ¥

## ğŸ“š Spring ä½“ç³»ç»“æ„

```
Spring Framework
â”œâ”€â”€ Core Container (æ ¸å¿ƒå®¹å™¨)
â”‚   â”œâ”€â”€ Beans
â”‚   â”œâ”€â”€ Core
â”‚   â”œâ”€â”€ Context
â”‚   â””â”€â”€ SpEL
â”‚
â”œâ”€â”€ AOP (é¢å‘åˆ‡é¢)
â”‚   â”œâ”€â”€ AOP
â”‚   â””â”€â”€ Aspects
â”‚
â”œâ”€â”€ Data Access (æ•°æ®è®¿é—®)
â”‚   â”œâ”€â”€ JDBC
â”‚   â”œâ”€â”€ ORM
â”‚   â”œâ”€â”€ Transactions
â”‚   â””â”€â”€ OXM
â”‚
â”œâ”€â”€ Web (Web å±‚)
â”‚   â”œâ”€â”€ Web
â”‚   â”œâ”€â”€ Servlet (Spring MVC)
â”‚   â”œâ”€â”€ WebSocket
â”‚   â””â”€â”€ Portlet
â”‚
â””â”€â”€ Test (æµ‹è¯•)
    â””â”€â”€ Test
```

## ğŸ—ï¸ Spring é¡¹ç›®ç»“æ„

```
spring-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/example/
â”‚   â”‚   â”‚       â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ AppConfig.java
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/      # æ§åˆ¶å±‚
â”‚   â”‚   â”‚       â”œâ”€â”€ service/         # ä¸šåŠ¡å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ impl/
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ UserServiceImpl.java
â”‚   â”‚   â”‚       â”œâ”€â”€ dao/             # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserDao.java
â”‚   â”‚   â”‚       â”œâ”€â”€ entity/          # å®ä½“ç±»
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ User.java
â”‚   â”‚   â”‚       â””â”€â”€ aspect/          # åˆ‡é¢ç±»
â”‚   â”‚   â”‚           â””â”€â”€ LogAspect.java
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ applicationContext.xml
â”‚   â”‚       â””â”€â”€ application.properties
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â””â”€â”€ pom.xml
```

## ğŸ“š æ¨èèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Spring Framework å®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-framework)
- [Spring Framework å‚è€ƒæ–‡æ¡£](https://docs.spring.io/spring-framework/reference/)

### æ¨èä¹¦ç±
- ã€ŠSpring å®æˆ˜ã€‹ï¼ˆç¬¬ 5 ç‰ˆï¼‰
- ã€ŠSpring æºç æ·±åº¦è§£æã€‹
- ã€Šç²¾é€š Spring 4.x ä¼ä¸šåº”ç”¨å¼€å‘å®æˆ˜ã€‹

### åœ¨çº¿èµ„æº
- [Spring å®˜æ–¹åšå®¢](https://spring.io/blog)
- [Spring Guides](https://spring.io/guides)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç‰ˆæœ¬é€‰æ‹©** - å»ºè®®ä½¿ç”¨ Spring 5.x ç‰ˆæœ¬ï¼Œä¸ Spring Boot 2.x å…¼å®¹
2. **æ³¨è§£ä¼˜å…ˆ** - ä¼˜å…ˆä½¿ç”¨æ³¨è§£é…ç½®ï¼ŒXML é…ç½®ä½œä¸ºäº†è§£
3. **ä¾èµ–æ³¨å…¥** - ä¼˜å…ˆä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œä¿è¯ä¸å¯å˜æ€§
4. **äº‹åŠ¡ç®¡ç†** - ç†è§£äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œé¿å…äº‹åŠ¡å¤±æ•ˆ
5. **AOP ä½¿ç”¨** - åˆç†ä½¿ç”¨ AOPï¼Œé¿å…è¿‡åº¦ä½¿ç”¨

## ğŸ¯ å­¦ä¹ è·¯çº¿å›¾

```
ç¬¬1å‘¨ï¼šSpring åŸºç¡€
â”œâ”€ IoC å’Œ DI æ¦‚å¿µ
â”œâ”€ Bean é…ç½®å’Œç®¡ç†
â”œâ”€ æ³¨è§£é…ç½®
â””â”€ ä¾èµ–æ³¨å…¥æ–¹å¼

ç¬¬2å‘¨ï¼šSpring æ³¨è§£
â”œâ”€ ç»„ä»¶æ³¨è§£
â”œâ”€ ä¾èµ–æ³¨å…¥æ³¨è§£
â”œâ”€ é…ç½®æ³¨è§£
â””â”€ ç”Ÿå‘½å‘¨æœŸæ³¨è§£

ç¬¬3å‘¨ï¼šSpring AOP
â”œâ”€ AOP æ ¸å¿ƒæ¦‚å¿µ
â”œâ”€ åˆ‡ç‚¹è¡¨è¾¾å¼
â”œâ”€ é€šçŸ¥ç±»å‹
â””â”€ AOP å®æˆ˜

ç¬¬4å‘¨ï¼šSpring äº‹åŠ¡
â”œâ”€ äº‹åŠ¡ç®¡ç†æ¦‚å¿µ
â”œâ”€ @Transactional ä½¿ç”¨
â”œâ”€ äº‹åŠ¡ä¼ æ’­è¡Œä¸º
â””â”€ äº‹åŠ¡å¤±æ•ˆåœºæ™¯
```

## ğŸ¤ Spring vs Spring Boot

| ç‰¹æ€§ | Spring | Spring Boot |
|------|--------|-------------|
| é…ç½® | éœ€è¦å¤§é‡ XML/æ³¨è§£é…ç½® | è‡ªåŠ¨é…ç½®ï¼Œå¼€ç®±å³ç”¨ |
| ä¾èµ–ç®¡ç† | æ‰‹åŠ¨ç®¡ç†ä¾èµ–ç‰ˆæœ¬ | starter ç»Ÿä¸€ç®¡ç† |
| å†…åµŒæœåŠ¡å™¨ | éœ€è¦å¤–éƒ¨ Tomcat | å†…ç½® Tomcat/Jetty |
| å­¦ä¹ æ›²çº¿ | é™¡å³­ | å¹³ç¼“ |
| å¼€å‘æ•ˆç‡ | ä¸€èˆ¬ | é«˜ |
| é€‚ç”¨åœºæ™¯ | ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨ | å¾®æœåŠ¡ã€å¿«é€Ÿå¼€å‘ |

**å­¦ä¹ å»ºè®®ï¼š** å…ˆå­¦ Spring ç†è§£åŸç†ï¼Œå†å­¦ Spring Boot æé«˜æ•ˆç‡ã€‚

## ğŸ“„ ç‰ˆæƒè¯´æ˜

æœ¬æ•™ç¨‹ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œæ¬¢è¿åˆ†äº«ä¼ æ’­ã€‚

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹ Spring å­¦ä¹ ä¹‹æ—…ï¼ğŸš€**

**å»ºè®®ä» [ç¬¬ä¸€ç« ï¼šSpring åŸºç¡€å…¥é—¨](1.SpringåŸºç¡€å…¥é—¨.md) å¼€å§‹å­¦ä¹ **
