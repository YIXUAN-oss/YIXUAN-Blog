---
title: Maven基础入门
---

# Maven基础入门

## 一、Maven是什么？

### 1.1 Maven简介

**Apache Maven** 是一个项目管理和构建自动化工具，主要用于 Java 项目。Maven 这个词来自于意第绪语，意为"知识的积累"。

**Maven 的核心功能：**
- 📦 **依赖管理** - 自动下载和管理项目依赖
- 🏗️ **项目构建** - 编译、测试、打包自动化
- 📋 **项目信息管理** - 生成项目文档和报告
- 🔄 **标准化** - 统一项目结构和构建流程

### 1.2 为什么要用Maven？

**没有 Maven 的痛点：**
```
传统方式的问题：
1. 手动下载 jar 包，容易下载错误版本
2. jar 包需要手动添加到项目中
3. 项目结构不统一，团队协作困难
4. 依赖关系复杂，容易出现版本冲突
5. 构建过程繁琐，需要手动编译、测试、打包
```

**使用 Maven 的优势：**
```
1. ✅ 自动管理依赖，解决依赖冲突
2. ✅ 统一项目结构，团队协作更高效
3. ✅ 自动化构建，一键完成编译、测试、打包
4. ✅ 中央仓库，资源共享
5. ✅ 插件丰富，扩展性强
```

### 1.3 Maven vs Gradle

| 特性 | Maven | Gradle |
|------|-------|--------|
| 配置文件 | XML (pom.xml) | Groovy/Kotlin DSL |
| 学习曲线 | 较简单 | 较陡峭 |
| 构建速度 | 较慢 | 较快 |
| 灵活性 | 约定优于配置 | 高度灵活 |
| 社区生态 | 非常成熟 | 快速发展 |

---

## 二、Maven安装与配置

### 2.1 前置要求

Maven 需要 JDK 环境，确保已安装 JDK：

```bash
# 检查 JDK 版本
java -version

# 应该看到类似输出：
# java version "1.8.0_xxx" 或更高版本
```

### 2.2 下载Maven

访问 Maven 官网下载：
```
官网地址：https://maven.apache.org/download.cgi
推荐下载：apache-maven-3.8.x-bin.zip（或最新稳定版）
```

### 2.3 安装配置（Windows）

**步骤1：解压Maven**
```
将下载的 zip 文件解压到指定目录，例如：
C:\Program Files\Apache\maven
```

**步骤2：配置环境变量**
```
1. 右键"此电脑" → "属性" → "高级系统设置" → "环境变量"

2. 新建系统变量：
   变量名：MAVEN_HOME
   变量值：C:\Program Files\Apache\maven

3. 编辑 Path 变量，添加：
   %MAVEN_HOME%\bin
```

**步骤3：验证安装**
```bash
# 打开命令行（cmd），输入：
mvn -v

# 应该看到类似输出：
Apache Maven 3.8.6 (xxx)
Maven home: C:\Program Files\Apache\maven
Java version: 1.8.0_xxx
```

### 2.4 安装配置（macOS/Linux）

**macOS（使用 Homebrew）：**
```bash
# 安装
brew install maven

# 验证
mvn -v
```

**Linux（手动安装）：**
```bash
# 下载
wget https://dlcdn.apache.org/maven/maven-3/3.8.8/binaries/apache-maven-3.8.8-bin.tar.gz

# 解压
tar -xzf apache-maven-3.8.8-bin.tar.gz
sudo mv apache-maven-3.8.8 /opt/maven

# 配置环境变量（编辑 ~/.bashrc）
export MAVEN_HOME=/opt/maven
export PATH=$MAVEN_HOME/bin:$PATH

# 使配置生效
source ~/.bashrc
```

### 2.5 配置Maven

#### 2.5.1 配置本地仓库

编辑 `$MAVEN_HOME/conf/settings.xml`：

```xml
<settings>
  <!-- 配置本地仓库路径 -->
  <localRepository>D:/maven-repository</localRepository>
</settings>
```

#### 2.5.2 配置阿里云镜像（国内必配）

```xml
<settings>
  <mirrors>
    <mirror>
      <id>aliyun-maven</id>
      <mirrorOf>central</mirrorOf>
      <name>Aliyun Maven Central</name>
      <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
  </mirrors>
</settings>
```

#### 2.5.3 配置JDK版本

```xml
<settings>
  <profiles>
    <profile>
      <id>jdk-1.8</id>
      <activation>
        <activeByDefault>true</activeByDefault>
        <jdk>1.8</jdk>
      </activation>
      <properties>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
      </properties>
    </profile>
  </profiles>
</settings>
```

---

## 三、Maven仓库机制

### 3.1 仓库类型

```
Maven 仓库体系
├── 本地仓库（Local Repository）
│   └── 位于本机的 .m2/repository 目录
│
├── 远程仓库（Remote Repository）
│   ├── 中央仓库（Central Repository）
│   ├── 私服（Private Repository）
│   └── 其他公共仓库
```

### 3.2 仓库查找顺序

```
1. 查找本地仓库 → 如果找到，直接使用
2. 查找远程仓库（私服/中央仓库）
3. 下载到本地仓库 → 使用
```

---

## 四、Maven项目标准目录结构

### 4.1 标准目录结构

```
my-project/
├── src/
│   ├── main/
│   │   ├── java/               # Java 源代码
│   │   ├── resources/          # 资源文件
│   │   └── webapp/             # Web 资源（Web项目）
│   └── test/
│       ├── java/              # 测试代码
│       └── resources/         # 测试资源
├── target/                     # 编译输出目录
├── pom.xml                     # Maven 配置文件
└── README.md
```

---

## 五、创建第一个Maven项目

### 5.1 使用命令行创建

```bash
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=my-app \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=false
```

**参数说明：**
- `groupId`: 组织 ID（如 com.example）
- `artifactId`: 项目名称
- `archetypeArtifactId`: 项目模板

### 5.2 查看生成的 pom.xml

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0">
    <modelVersion>4.0.0</modelVersion>
    
    <!-- Maven 坐标 -->
    <groupId>com.example</groupId>
    <artifactId>my-app</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>
    
    <!-- 项目信息 -->
    <name>my-app</name>
    
    <!-- 属性配置 -->
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
    </properties>
    
    <!-- 依赖管理 -->
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.13.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project>
```

---

## 六、Maven基本命令

### 6.1 常用命令

```bash
# 编译源代码
mvn compile

# 运行测试
mvn test

# 打包项目
mvn package

# 清理项目
mvn clean

# 安装到本地仓库
mvn install

# 清理并打包
mvn clean package

# 运行项目
java -cp target/my-app-1.0-SNAPSHOT.jar com.example.App
```

### 6.2 命令执行流程

```
mvn package 执行过程：
validate → compile → test → package
```

---

## 七、pom.xml 核心配置详解

### 7.1 基本结构

```xml
<project>
    <!-- 基本信息 -->
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>my-app</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>
    
    <!-- 项目信息 -->
    <name>项目名称</name>
    <description>项目描述</description>
    
    <!-- 属性配置 -->
    <properties>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
    </properties>
    
    <!-- 依赖管理 -->
    <dependencies>
        <!-- 依赖列表 -->
    </dependencies>
</project>
```

### 7.2 Maven 坐标（GAV）

```xml
<!-- 组织标识 -->
<groupId>com.example</groupId>

<!-- 项目标识 -->
<artifactId>my-app</artifactId>

<!-- 版本号 -->
<version>1.0.0</version>

<!-- 打包方式 -->
<packaging>jar</packaging>
<!-- 可选值：jar、war、pom、maven-plugin -->
```

### 7.3 版本号规范

```xml
<!-- 快照版本（开发中） -->
<version>1.0.0-SNAPSHOT</version>

<!-- 正式版本 -->
<version>1.0.0</version>

<!-- 里程碑版本 -->
<version>1.0.0-M1</version>

<!-- 候选版本 -->
<version>1.0.0-RC1</version>
```

---

## 八、使用IDE创建Maven项目

### 8.1 IntelliJ IDEA 创建

**步骤：**
1. File → New → Project
2. 选择 "Maven"
3. 填写 GroupId、ArtifactId
4. 点击 "Finish"

### 8.2 IDEA Maven 配置

```
Settings → Build Tools → Maven

配置项：
- Maven home directory: Maven安装目录
- User settings file: settings.xml位置
- Local repository: 本地仓库路径
```

### 8.3 Maven 自动导入

```
Settings → Maven → Importing

勾选：
☑ Import Maven projects automatically
☑ Automatically download sources
```

---

## 九、实战练习

### 9.1 练习1：创建计算器项目

**创建项目：**
```bash
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=calculator \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=false
```

**Calculator.java：**
```java
package com.example;

public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
    
    public int subtract(int a, int b) {
        return a - b;
    }
}
```

**CalculatorTest.java：**
```java
package com.example;

import org.junit.Test;
import static org.junit.Assert.*;

public class CalculatorTest {
    private Calculator calculator = new Calculator();
    
    @Test
    public void testAdd() {
        assertEquals(5, calculator.add(2, 3));
    }
}
```

**运行测试：**
```bash
mvn test
```

---

## 十、常见问题

### 10.1 依赖下载慢

**解决：** 配置阿里云镜像。

### 10.2 依赖下载失败

```bash
# 清理并强制更新
mvn clean install -U
```

### 10.3 编码问题

```xml
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
```

---

## 十一、总结

✅ **本章学习内容：**
- Maven 的概念和作用
- Maven 的安装与配置
- Maven 仓库机制
- Maven 项目结构
- Maven 基本命令
- pom.xml 核心配置

✅ **掌握技能：**
- 能够独立安装配置 Maven
- 能够创建 Maven 项目
- 理解 Maven 坐标和仓库概念
- 掌握常用 Maven 命令

**下一章预告：** 我们将深入学习 Maven 的核心概念，包括依赖管理、生命周期和插件机制。

**实践建议：** 多创建几个 Maven 项目，熟悉命令和配置。
