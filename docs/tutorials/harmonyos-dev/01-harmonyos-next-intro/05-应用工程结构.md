---
title: 应用工程结构
date: 2025-01-22
---

# 应用工程结构

> 理解 HarmonyOS 应用工程组织结构

## 📁 工程目录结构

### 标准工程结构

```
MyApplication/
├─ AppScope/                    # 应用全局配置
│  ├─ resources/               # 全局资源
│  └─ app.json5               # 应用配置文件
├─ entry/                      # 主模块
│  ├─ src/
│  │  ├─ main/
│  │  │  ├─ ets/              # ArkTS 源码
│  │  │  │  ├─ entryability/  # Ability
│  │  │  │  ├─ pages/         # 页面
│  │  │  │  └─ entrybackupability/ # 备份恢复
│  │  │  ├─ resources/        # 模块资源
│  │  │  └─ module.json5      # 模块配置
│  │  └─ ohosTest/            # 测试代码
│  └─ build-profile.json5     # 构建配置
├─ oh_modules/                 # 三方库
├─ build-profile.json5         # 工程构建配置
├─ hvigorfile.ts              # 构建脚本
└─ oh-package.json5           # 依赖管理
```

## 📋 配置文件详解

### app.json5（应用配置）

```json5
{
  "app": {
    "bundleName": "com.example.myapplication",  // 应用包名
    "vendor": "example",                         // 应用供应商
    "versionCode": 1000000,                      // 版本号
    "versionName": "1.0.0",                      // 版本名称
    "icon": "$media:app_icon",                   // 应用图标
    "label": "$string:app_name",                 // 应用名称
    "distributedNotificationEnabled": true,      // 分布式通知
    "targetAPIVersion": 12,                      // 目标API版本
    "compatibleAPIVersion": 12                   // 兼容API版本
  }
}
```

### module.json5（模块配置）

```json5
{
  "module": {
    "name": "entry",                    // 模块名称
    "type": "entry",                    // 模块类型
    "description": "$string:module_desc",
    "mainElement": "EntryAbility",      // 入口 Ability
    "deviceTypes": [                    // 支持设备类型
      "phone",
      "tablet",
      "2in1"
    ],
    "deliveryWithInstall": true,
    
    "abilities": [                      // Ability 配置
      {
        "name": "EntryAbility",
        "srcEntry": "./ets/entryability/EntryAbility.ets",
        "description": "$string:EntryAbility_desc",
        "icon": "$media:icon",
        "label": "$string:EntryAbility_label",
        "startWindowIcon": "$media:startIcon",
        "startWindowBackground": "$color:start_window_background",
        "exported": true,                // 是否可被其他应用调用
        "skills": [                      // 意图配置
          {
            "entities": [
              "entity.system.home"
            ],
            "actions": [
              "action.system.home"
            ]
          }
        ]
      }
    ],
    
    "requestPermissions": [             // 权限申请
      {
        "name": "ohos.permission.INTERNET",
        "reason": "$string:reason_internet",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      }
    ]
  }
}
```

## 🎨 资源目录结构

### resources 目录

```
resources/
├─ base/                       # 默认资源
│  ├─ element/                # 基础元素
│  │  ├─ color.json          # 颜色
│  │  ├─ string.json         # 字符串
│  │  └─ float.json          # 浮点数
│  ├─ media/                 # 媒体资源
│  │  ├─ app_icon.png       # 应用图标
│  │  └─ background.png     # 背景图
│  └─ profile/               # 配置文件
├─ en_US/                    # 英文资源
│  └─ element/
│      └─ string.json
├─ zh_CN/                    # 中文资源
│  └─ element/
│      └─ string.json
└─ rawfile/                  # 原始文件
    └─ data.json
```

### 资源文件示例

**color.json**
```json
{
  "color": [
    {
      "name": "start_window_background",
      "value": "#FFFFFF"
    },
    {
      "name": "primary_color",
      "value": "#007DFF"
    }
  ]
}
```

**string.json**
```json
{
  "string": [
    {
      "name": "app_name",
      "value": "我的应用"
    },
    {
      "name": "EntryAbility_label",
      "value": "首页"
    }
  ]
}
```

## 🔧 源码组织

### Ability 文件

```typescript
// EntryAbility.ets
import UIAbility from '@ohos.app.ability.UIAbility'
import window from '@ohos.window'

export default class EntryAbility extends UIAbility {
  onCreate(want, launchParam) {
    console.log('Ability onCreate')
  }

  onWindowStageCreate(windowStage: window.WindowStage) {
    // 加载主页面
    windowStage.loadContent('pages/Index', (err, data) => {
      if (err.code) {
        console.error('Failed to load the content')
        return
      }
      console.log('Succeeded in loading the content')
    })
  }

  onForeground() {
    console.log('Ability onForeground')
  }

  onBackground() {
    console.log('Ability onBackground')
  }

  onDestroy() {
    console.log('Ability onDestroy')
  }
}
```

### 页面文件

```typescript
// pages/Index.ets
@Entry
@Component
struct Index {
  @State message: string = 'Hello World'

  build() {
    Column() {
      Text(this.message)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }
}
```

## 📦 依赖管理

### oh-package.json5

```json5
{
  "name": "myapplication",
  "version": "1.0.0",
  "description": "Please describe the basic information.",
  "main": "",
  "author": "",
  "license": "",
  "dependencies": {
    "@ohos/axios": "^2.2.0"  // 第三方库
  },
  "devDependencies": {
    "@ohos/hypium": "1.0.16"  // 测试框架
  }
}
```

### 安装依赖

```bash
# 在终端执行
ohpm install

# 或安装指定包
ohpm install @ohos/axios
```

## 🏗️ 构建配置

### build-profile.json5

```json5
{
  "app": {
    "signingConfigs": [
      {
        "name": "default",
        "type": "HarmonyOS",
        "material": {
          "certpath": "cert/debug.cer",
          "storePassword": "0000001B8A8E8B7D3BFBA",
          "keyAlias": "debugKey",
          "keyPassword": "0000001B8A8E8B7D3BFBA",
          "profile": "cert/debug.p7b",
          "signAlg": "SHA256withECDSA",
          "storeFile": "cert/debug.p12"
        }
      }
    ],
    "products": [
      {
        "name": "default",
        "signingConfig": "default",
        "compatibleSdkVersion": "5.0.0(12)",
        "runtimeOS": "HarmonyOS"
      }
    ]
  },
  "modules": [
    {
      "name": "entry",
      "srcPath": "./entry",
      "targets": [
        {
          "name": "default",
          "applyToProducts": ["default"]
        }
      ]
    }
  ]
}
```

## 📱 多模块应用

### 添加 Feature 模块

```
MyApplication/
├─ entry/          # 主模块
├─ feature1/       # 功能模块1
├─ feature2/       # 功能模块2
└─ library/        # 共享库模块
```

### 模块间依赖

```json5
// entry/oh-package.json5
{
  "dependencies": {
    "@ohos/feature1": "file:../feature1",  // 依赖 feature1 模块
    "@ohos/library": "file:../library"     // 依赖库模块
  }
}
```

### 共享库模块

```json5
// library/src/main/module.json5
{
  "module": {
    "name": "library",
    "type": "shared",  // 共享库类型
    "deviceTypes": ["phone", "tablet"]
  }
}
```

## 💡 最佳实践

### 1. 模块化组织

```
entry/src/main/ets/
├─ common/              # 公共代码
│  ├─ constants/       # 常量
│  ├─ utils/           # 工具类
│  └─ components/      # 公共组件
├─ entryability/       # Ability
├─ pages/              # 页面
│  ├─ home/           # 首页模块
│  ├─ profile/        # 个人中心
│  └─ settings/       # 设置
├─ models/             # 数据模型
├─ services/           # 服务层
└─ viewmodels/         # 视图模型
```

### 2. 资源命名规范

```typescript
// ✅ 良好的命名
$r('app.color.primary_color')
$r('app.string.login_button_text')
$r('app.media.icon_home')

// ❌ 避免
$r('app.color.c1')
$r('app.string.str1')
```

### 3. 配置版本管理

```json5
// 使用版本管理
{
  "app": {
    "versionCode": 1000000,      // 主版本.次版本.修订号
    "versionName": "1.0.0"
  }
}

// 每次发版更新
// 1.0.0 -> 1.0.1（修复bug）
// 1.0.1 -> 1.1.0（新功能）
// 1.1.0 -> 2.0.0（重大更新）
```

## 🔍 调试配置

### launch.json

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Launch on Phone",
      "type": "HarmonyOS",
      "request": "launch",
      "bundleName": "com.example.myapplication",
      "abilityName": "EntryAbility",
      "deviceType": "phone"
    }
  ]
}
```

## 📚 参考资源

- [应用工程结构](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-package-structure-stage-0000001478061425)
- [应用配置文件](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-configuration-file-overview-stage-0000001478340869)
- [资源分类与访问](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/resource-categories-and-access-0000001544463977)

---

**第1章完成！** 继续学习 → [第2章：ArkTS 5.0 新特性](../02-arkts-advanced/)
