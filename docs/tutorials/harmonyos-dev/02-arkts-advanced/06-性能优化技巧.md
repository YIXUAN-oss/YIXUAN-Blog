---
title: æ€§èƒ½ä¼˜åŒ–æŠ€å·§
date: 2025-01-22
---

# æ€§èƒ½ä¼˜åŒ–æŠ€å·§

> ç¼–å†™é«˜æ€§èƒ½çš„ ArkTS ä»£ç 

## âš¡ ä»£ç ä¼˜åŒ–

### 1. ä½¿ç”¨ const/let

```typescript
// âœ… æ¨è
const MAX_SIZE = 100
let count = 0

// âŒ é¿å…
var size = 100
```

### 2. é¿å…ä¸å¿…è¦çš„è®¡ç®—

```typescript
// âŒ æ¯æ¬¡éƒ½è®¡ç®—
build() {
  Column() {
    Text(`æ€»ä»·: ${this.items.reduce((sum, item) => sum + item.price, 0)}`)
  }
}

// âœ… ä½¿ç”¨è®¡ç®—å±æ€§
@State items: Item[] = []

get totalPrice(): number {
  return this.items.reduce((sum, item) => sum + item.price, 0)
}

build() {
  Column() {
    Text(`æ€»ä»·: ${this.totalPrice}`)
  }
}
```

### 3. å¯¹è±¡è§£æ„

```typescript
// âœ… é«˜æ•ˆ
const { name, age, email } = user

// âŒ ä½æ•ˆ
const name = user.name
const age = user.age
const email = user.email
```

## ğŸ’¾ å†…å­˜ç®¡ç†

### 1. åŠæ—¶æ¸…ç†èµ„æº

```typescript
@Entry
@Component
struct MyComponent {
  private timer: number
  
  aboutToAppear() {
    this.timer = setInterval(() => {
      console.log('tick')
    }, 1000)
  }
  
  aboutToDisappear() {
    // âœ… æ¸…ç†å®šæ—¶å™¨
    clearInterval(this.timer)
  }
}
```

### 2. é¿å…å†…å­˜æ³„æ¼

```typescript
// âŒ å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
class EventBus {
  private listeners = []
  
  on(callback) {
    this.listeners.push(callback)
  }
}

// âœ… æä¾›ç§»é™¤æ–¹æ³•
class EventBus {
  private listeners = new Set()
  
  on(callback) {
    this.listeners.add(callback)
    return () => this.listeners.delete(callback)
  }
}
```

## ğŸš€ ç¼–è¯‘ä¼˜åŒ–

### 1. Tree Shaking

```typescript
// âœ… åªå¯¼å…¥éœ€è¦çš„
import { formatDate } from './utils'

// âŒ å¯¼å…¥å…¨éƒ¨
import * as utils from './utils'
```

### 2. æ‡’åŠ è½½

```typescript
// åŠ¨æ€å¯¼å…¥
async function loadFeature() {
  if (needFeature) {
    const module = await import('./feature')
    module.init()
  }
}
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ä½¿ç”¨ hiTraceMeter

```typescript
import hiTraceMeter from '@ohos.hiTraceMeter'

function expensiveOperation() {
  hiTraceMeter.startTrace('ExpensiveOp', 1)
  
  // è€—æ—¶æ“ä½œ
  
  hiTraceMeter.finishTrace('ExpensiveOp', 1)
}
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. âœ… ä½¿ç”¨ const/let æ›¿ä»£ var
2. âœ… åŠæ—¶æ¸…ç†å®šæ—¶å™¨å’Œç›‘å¬å™¨
3. âœ… é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡
4. âœ… ä½¿ç”¨æ‡’åŠ è½½ä¼˜åŒ–é¦–å±
5. âœ… åˆç†ä½¿ç”¨ç¼“å­˜

## ğŸ“š å‚è€ƒèµ„æº

- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/performance-optimization-overview-0000001581809185-V3)

---

**ç¬¬2ç« å®Œæˆï¼** ç»§ç»­å­¦ä¹  â†’ [ç¬¬3ç« ï¼šArkUI NEXT æ¡†æ¶](../03-arkui-next/)
