---
title: ç±»å‹å®‰å…¨æœ€ä½³å®è·µ
date: 2025-01-22
---

# ç±»å‹å®‰å…¨æœ€ä½³å®è·µ

> ç¼–å†™å¥å£®çš„ TypeScript ä»£ç 

## ğŸ›¡ï¸ ç±»å‹è®¾è®¡åŸåˆ™

### 1. ä¼˜å…ˆä½¿ç”¨ç±»å‹æ¨å¯¼

```typescript
// âŒ ä¸å¿…è¦çš„ç±»å‹æ³¨è§£
const name: string = 'Alice'
const count: number = 0

// âœ… è®© TypeScript æ¨å¯¼
const name = 'Alice'
const count = 0
```

### 2. ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹

```typescript
// âŒ é¿å…ä½¿ç”¨ any
function process(data: any) {
  return data
}

// âœ… ä½¿ç”¨å…·ä½“ç±»å‹
function process<T>(data: T): T {
  return data
}

// âœ… æˆ–ä½¿ç”¨ unknown
function process(data: unknown) {
  if (typeof data === 'string') {
    return data.toUpperCase()
  }
}
```

## âœ… null å®‰å…¨

### å¯é€‰é“¾æ“ä½œç¬¦

```typescript
interface User {
  name: string
  address?: {
    city?: string
    street?: string
  }
}

const user: User = { name: 'Alice' }

// âœ… å®‰å…¨è®¿é—®
const city = user.address?.city ?? 'æœªçŸ¥åŸå¸‚'

// âŒ ä¸å®‰å…¨
const city = user.address.city  // å¯èƒ½æŠ¥é”™
```

### ç©ºå€¼åˆå¹¶

```typescript
// âœ… ä½¿ç”¨ ??
const value = input ?? defaultValue

// âŒ ä½¿ç”¨ ||ï¼ˆä¼šå°† 0ã€'' ç­‰è§†ä¸ºå‡å€¼ï¼‰
const value = input || defaultValue
```

## ğŸ¯ ç±»å‹å®ˆå«

### è‡ªå®šä¹‰ç±»å‹å®ˆå«

```typescript
interface Fish {
  swim(): void
}

interface Bird {
  fly(): void
}

function isFish(pet: Fish | Bird): pet is Fish {
  return (pet as Fish).swim !== undefined
}

function move(pet: Fish | Bird) {
  if (isFish(pet)) {
    pet.swim()
  } else {
    pet.fly()
  }
}
```

## âŒ é”™è¯¯å¤„ç†

### Result ç±»å‹æ¨¡å¼

```typescript
type Result<T, E = Error> = 
  | { success: true; value: T }
  | { success: false; error: E }

function divide(a: number, b: number): Result<number> {
  if (b === 0) {
    return {
      success: false,
      error: new Error('é™¤æ•°ä¸èƒ½ä¸º0')
    }
  }
  
  return {
    success: true,
    value: a / b
  }
}

// ä½¿ç”¨
const result = divide(10, 2)
if (result.success) {
  console.log(result.value)
} else {
  console.error(result.error.message)
}
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å¯ç”¨ä¸¥æ ¼æ¨¡å¼

```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true
  }
}
```

### 2. é¿å…ç±»å‹æ–­è¨€

```typescript
// âŒ é¿å…
const value = getData() as string

// âœ… ä½¿ç”¨ç±»å‹å®ˆå«
const value = getData()
if (typeof value === 'string') {
  console.log(value.toUpperCase())
}
```

### 3. ä½¿ç”¨ const æ–­è¨€

```typescript
// const æ–­è¨€
const config = {
  apiUrl: 'https://api.example.com',
  timeout: 3000
} as const

// config.apiUrl = 'other'  // âŒ åªè¯»
```

## ğŸ“š å‚è€ƒèµ„æº

- [TypeScript ä¸¥æ ¼æ¨¡å¼](https://www.typescriptlang.org/tsconfig#strict)

---

**ä¸‹ä¸€èŠ‚** â†’ [æ€§èƒ½ä¼˜åŒ–æŠ€å·§](06-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.md)
