---
title: 自适应 UI 设计
date: 2025-01-22
---

# 自适应 UI 设计

> 一套代码适配多种设备

## 🎯 设备适配策略

### 设备类型

```typescript
设备类型
├─ 手机（Phone）
│   ├─ 屏幕尺寸：4-7英寸
│   └─ 分辨率：720p-2K
├─ 平板（Tablet）
│   ├─ 屏幕尺寸：7-13英寸
│   └─ 分辨率：1080p-2K
├─ 折叠屏（Foldable）
│   ├─ 内屏：7-8英寸
│   └─ 外屏：6英寸
└─ 桌面（Desktop）
    └─ 屏幕尺寸：13英寸+
```

## 📱 屏幕尺寸适配

### 获取设备信息

```typescript
import display from '@ohos.display'

@Entry
@Component
struct DeviceInfo {
  @State deviceWidth: number = 0
  @State deviceHeight: number = 0
  @State deviceType: string = ''
  
  aboutToAppear() {
    const displayInfo = display.getDefaultDisplaySync()
    this.deviceWidth = displayInfo.width
    this.deviceHeight = displayInfo.height
    
    // 判断设备类型
    if (this.deviceWidth < 600) {
      this.deviceType = 'Phone'
    } else if (this.deviceWidth < 840) {
      this.deviceType = 'Tablet'
    } else {
      this.deviceType = 'Desktop'
    }
  }
  
  build() {
    Column({ space: 10 }) {
      Text(`设备类型: ${this.deviceType}`)
      Text(`宽度: ${this.deviceWidth}`)
      Text(`高度: ${this.deviceHeight}`)
    }
    .padding(20)
  }
}
```

### 响应式字体

```typescript
@Entry
@Component
struct ResponsiveFontSize {
  @State fontSize: number = 16
  
  aboutToAppear() {
    const width = display.getDefaultDisplaySync().width
    
    if (width < 600) {
      this.fontSize = 14  // 手机
    } else if (width < 840) {
      this.fontSize = 16  // 平板
    } else {
      this.fontSize = 18  // 桌面
    }
  }
  
  build() {
    Text('自适应字体')
      .fontSize(this.fontSize)
  }
}
```

## 🎨 布局适配

### 自适应布局切换

```typescript
@Entry
@Component
struct AdaptiveLayout {
  @State isLargeScreen: boolean = false
  
  aboutToAppear() {
    const width = display.getDefaultDisplaySync().width
    this.isLargeScreen = width >= 840
  }
  
  build() {
    if (this.isLargeScreen) {
      // 大屏 - 左右布局
      Row() {
        NavigationPanel()
          .width(300)
        
        ContentPanel()
          .layoutWeight(1)
      }
    } else {
      // 小屏 - 上下布局
      Column() {
        NavigationPanel()
          .height(60)
        
        ContentPanel()
          .layoutWeight(1)
      }
    }
  }
}
```

### 弹性间距

```typescript
@Entry
@Component
struct FlexibleSpacing {
  @State spacing: number = 10
  @State padding: number = 15
  
  aboutToAppear() {
    const width = display.getDefaultDisplaySync().width
    
    if (width >= 840) {
      this.spacing = 20
      this.padding = 30
    }
  }
  
  build() {
    Column({ space: this.spacing }) {
      Text('Item 1')
      Text('Item 2')
      Text('Item 3')
    }
    .padding(this.padding)
  }
}
```

## 🖼️ 图片适配

### 多分辨率图片

```typescript
资源目录结构
resources/
├─ base/
│   └─ media/
│       └─ icon.png (默认)
├─ en_US/
│   └─ media/
├─ zh_CN/
│   └─ media/
└─ rawfile/
    ├─ icon@1x.png
    ├─ icon@2x.png
    └─ icon@3x.png

// 使用
Image($r('app.media.icon'))  // 自动选择合适分辨率
  .width(100)
  .height(100)
```

### 响应式图片

```typescript
@Entry
@Component
struct ResponsiveImage {
  @State imageSize: number = 100
  
  build() {
    Column() {
      Image($r('app.media.banner'))
        .width('100%')
        .aspectRatio(16 / 9)  // 保持宽高比
        .objectFit(ImageFit.Cover)
    }
    .width('100%')
  }
}
```

## 🔄 方向适配

### 横竖屏切换

```typescript
@Entry
@Component
struct OrientationExample {
  @State isLandscape: boolean = false
  
  build() {
    Column() {
      if (this.isLandscape) {
        // 横屏布局
        Row() {
          LeftPanel().width('30%')
          RightPanel().width('70%')
        }
      } else {
        // 竖屏布局
        Column() {
          TopPanel().height('30%')
          BottomPanel().height('70%')
        }
      }
    }
    .width('100%')
    .height('100%')
    .onAreaChange((oldValue, newValue) => {
      const width = newValue.width as number
      const height = newValue.height as number
      this.isLandscape = width > height
    })
  }
}
```

## 💡 最佳实践

### 1. 使用相对单位

```typescript
// ✅ 推荐
Text('标题')
  .width('80%')
  .fontSize(16)

// ❌ 避免
Text('标题')
  .width(300)
  .fontSize('16px')
```

### 2. 设置最小/最大尺寸

```typescript
Column() {
  Text('内容')
}
.width('100%')
.minWidth(320)   // 最小宽度
.maxWidth(1200)  // 最大宽度
```

### 3. 使用 aspectRatio

```typescript
// 保持宽高比
Image($r('app.media.banner'))
  .width('100%')
  .aspectRatio(16 / 9)
```

## 📚 参考资源

- [一次开发多端部署](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/start-with-ets-stage-0000001477980905-V3)

---

**下一节** → [跨设备组件适配](06-跨设备组件适配.md)
