---
title: è‡ªå®šä¹‰ç»„ä»¶æœ€ä½³å®è·µ
date: 2025-01-22
---

# è‡ªå®šä¹‰ç»„ä»¶æœ€ä½³å®è·µ

> ç¼–å†™é«˜è´¨é‡ã€å¯å¤ç”¨çš„ç»„ä»¶

## ğŸ¯ ç»„ä»¶è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£

```typescript
// âœ… å¥½çš„è®¾è®¡ - æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
@Component
export struct UserAvatar {
  @Prop url: string
  @Prop size: number = 50
  
  build() {
    Image(this.url)
      .width(this.size)
      .height(this.size)
      .borderRadius(this.size / 2)
  }
}

@Component
export struct UserName {
  @Prop name: string
  
  build() {
    Text(this.name)
      .fontSize(16)
      .fontWeight(FontWeight.Bold)
  }
}
```

### 2. ç»„ä»¶å¤ç”¨

```typescript
@Component
export struct Button {
  @Prop text: string
  @Prop type: 'primary' | 'default' = 'default'
  @Prop onClick: () => void
  
  build() {
    Button(this.text)
      .backgroundColor(this.type === 'primary' ? Color.Blue : Color.Gray)
      .onClick(this.onClick)
  }
}
```

### 3. Props éªŒè¯

```typescript
@Component
export struct Card {
  @Prop title: string = ''  // æä¾›é»˜è®¤å€¼
  @Prop @Require content: string  // å¿…å¡«å±æ€§
  
  build() {
    Column() {
      if (this.title) {
        Text(this.title)
      }
      Text(this.content)
    }
  }
}
```

## ğŸ”„ ç»„ä»¶é€šä¿¡

### çˆ¶å­é€šä¿¡

```typescript
// çˆ¶ç»„ä»¶
@Entry
@Component
struct Parent {
  @State count: number = 0
  
  build() {
    Column() {
      Child({
        value: this.count,
        onUpdate: (newValue) => {
          this.count = newValue
        }
      })
    }
  }
}

// å­ç»„ä»¶
@Component
struct Child {
  @Prop value: number
  @Prop onUpdate: (value: number) => void
  
  build() {
    Button(`Count: ${this.value}`)
      .onClick(() => {
        this.onUpdate(this.value + 1)
      })
  }
}
```

### è·¨ç»„ä»¶é€šä¿¡

```typescript
// ä½¿ç”¨ @Provide/@Consume
@Entry
@Component
struct Root {
  @Provide('theme') theme: string = 'light'
  
  build() {
    Column() {
      MiddleComponent()
    }
  }
}

@Component
struct MiddleComponent {
  build() {
    DeepComponent()
  }
}

@Component
struct DeepComponent {
  @Consume('theme') theme: string
  
  build() {
    Text(`Theme: ${this.theme}`)
  }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. ä½¿ç”¨ @Reusable

```typescript
@Reusable
@Component
struct ListItem {
  @Prop data: ItemData
  
  aboutToReuse(params: Record<string, Object>) {
    this.data = params.data as ItemData
  }
  
  build() {
    Row() {
      Text(this.data.title)
    }
  }
}
```

### 2. é¿å…è¿‡åº¦æ¸²æŸ“

```typescript
// âœ… åªåœ¨éœ€è¦æ—¶æ›´æ–°
@State items: Item[] = []

updateItem(index: number, newData: Item) {
  this.items[index] = newData
  this.items = [...this.items]  // è§¦å‘æ›´æ–°
}
```

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. âœ… ä¿æŒç»„ä»¶ç®€å•å’Œä¸“æ³¨
2. âœ… æä¾›æ¸…æ™°çš„ Props æ¥å£
3. âœ… ä½¿ç”¨ TypeScript ç±»å‹
4. âœ… æ³¨é‡æ€§èƒ½ä¼˜åŒ–
5. âœ… ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶

## ğŸ“š å‚è€ƒèµ„æº

- [è‡ªå®šä¹‰ç»„ä»¶](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-create-custom-components-0000001473537046-V3)

---

**ç¬¬3ç« å®Œæˆï¼** ç»§ç»­å­¦ä¹  â†’ [ç¬¬4ç« ï¼šçŠ¶æ€ç®¡ç† NEXT](../04-state-management-next/)
