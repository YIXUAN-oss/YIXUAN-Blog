---
title: 新增组件库
date: 2025-01-22
---

# 新增组件库

> HarmonyOS NEXT 3.0 新增的实用组件

## 📱 Tabs 标签页组件

### 基础用法

```typescript
@Entry
@Component
struct TabsExample {
  @State currentIndex: number = 0
  
  build() {
    Tabs({ index: this.currentIndex }) {
      TabContent() {
        Text('首页内容')
      }
      .tabBar('首页')
      
      TabContent() {
        Text('消息内容')
      }
      .tabBar('消息')
      
      TabContent() {
        Text('我的内容')
      }
      .tabBar('我的')
    }
    .onChange((index: number) => {
      this.currentIndex = index
    })
  }
}
```

### 自定义 TabBar

```typescript
@Entry
@Component
struct CustomTabsExample {
  @State currentIndex: number = 0
  
  @Builder
  TabBuilder(index: number, name: string, icon: Resource) {
    Column({ space: 5 }) {
      Image(icon)
        .width(24)
        .height(24)
        .fillColor(this.currentIndex === index ? Color.Blue : Color.Gray)
      
      Text(name)
        .fontSize(12)
        .fontColor(this.currentIndex === index ? Color.Blue : Color.Gray)
    }
    .width('100%')
    .height(56)
    .justifyContent(FlexAlign.Center)
  }
  
  build() {
    Tabs({ index: this.currentIndex }) {
      TabContent() {
        HomePage()
      }
      .tabBar(this.TabBuilder(0, '首页', $r('app.media.icon_home')))
      
      TabContent() {
        MessagePage()
      }
      .tabBar(this.TabBuilder(1, '消息', $r('app.media.icon_message')))
      
      TabContent() {
        ProfilePage()
      }
      .tabBar(this.TabBuilder(2, '我的', $r('app.media.icon_profile')))
    }
    .barPosition(BarPosition.End)  // 底部标签栏
    .onChange((index: number) => {
      this.currentIndex = index
    })
  }
}
```

## 📜 List 列表组件

### 基础列表

```typescript
@Entry
@Component
struct ListExample {
  @State items: string[] = ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5']
  
  build() {
    List({ space: 10 }) {
      ForEach(this.items, (item: string, index: number) => {
        ListItem() {
          Row() {
            Text(`${index + 1}. ${item}`)
              .fontSize(16)
          }
          .width('100%')
          .height(60)
          .padding({ left: 20, right: 20 })
          .backgroundColor(Color.White)
          .borderRadius(8)
        }
      }, (item: string) => item)
    }
    .width('100%')
    .height('100%')
    .padding(15)
    .backgroundColor(0xF5F5F5)
  }
}
```

### 滑动操作

```typescript
@Entry
@Component
struct SwipeListExample {
  @State items: string[] = ['项目1', '项目2', '项目3']
  
  @Builder
  itemEnd(index: number) {
    Row() {
      Button('删除')
        .width(80)
        .height('100%')
        .backgroundColor(Color.Red)
        .onClick(() => {
          this.items.splice(index, 1)
        })
    }
  }
  
  build() {
    List() {
      ForEach(this.items, (item: string, index: number) => {
        ListItem() {
          Text(item)
            .width('100%')
            .height(60)
            .padding({ left: 20 })
            .backgroundColor(Color.White)
        }
        .swipeAction({ end: this.itemEnd(index) })
      }, (item: string, index: number) => `${index}-${item}`)
    }
  }
}
```

### LazyForEach 懒加载

```typescript
class BasicDataSource implements IDataSource {
  private listeners: DataChangeListener[] = []
  private originDataArray: string[] = []
  
  public totalCount(): number {
    return this.originDataArray.length
  }
  
  public getData(index: number): string {
    return this.originDataArray[index]
  }
  
  registerDataChangeListener(listener: DataChangeListener): void {
    if (this.listeners.indexOf(listener) < 0) {
      this.listeners.push(listener)
    }
  }
  
  unregisterDataChangeListener(listener: DataChangeListener): void {
    const pos = this.listeners.indexOf(listener)
    if (pos >= 0) {
      this.listeners.splice(pos, 1)
    }
  }
  
  notifyDataAdd(index: number): void {
    this.listeners.forEach(listener => {
      listener.onDataAdd(index)
    })
  }
}

@Entry
@Component
struct LazyListExample {
  private data: BasicDataSource = new BasicDataSource()
  
  build() {
    List() {
      LazyForEach(this.data, (item: string) => {
        ListItem() {
          Text(item)
            .width('100%')
            .height(60)
        }
      }, (item: string) => item)
    }
  }
}
```

## 🎨 Grid 网格组件

### 基础网格

```typescript
@Entry
@Component
struct GridExample {
  @State items: number[] = Array.from({ length: 20 }, (_, i) => i + 1)
  
  build() {
    Grid() {
      ForEach(this.items, (item: number) => {
        GridItem() {
          Column() {
            Image($r('app.media.icon'))
              .width(60)
              .height(60)
            Text(`Item ${item}`)
              .fontSize(14)
              .margin({ top: 8 })
          }
          .width('100%')
          .height(120)
          .justifyContent(FlexAlign.Center)
          .backgroundColor(Color.White)
          .borderRadius(8)
        }
      })
    }
    .columnsTemplate('1fr 1fr 1fr')  // 3列
    .rowsGap(10)
    .columnsGap(10)
    .padding(15)
  }
}
```

### 响应式网格

```typescript
@Entry
@Component
struct ResponsiveGrid {
  @State gridColumns: string = '1fr 1fr'
  
  build() {
    Grid() {
      ForEach(Array.from({ length: 12 }), (item, index) => {
        GridItem() {
          Text(`${index + 1}`)
            .fontSize(20)
            .width('100%')
            .height(100)
            .textAlign(TextAlign.Center)
            .backgroundColor(0x007DFF)
            .fontColor(Color.White)
        }
      })
    }
    .columnsTemplate(this.gridColumns)
    .rowsGap(10)
    .columnsGap(10)
    .onAreaChange((oldValue, newValue) => {
      // 根据宽度调整列数
      const width = newValue.width as number
      if (width < 600) {
        this.gridColumns = '1fr 1fr'  // 2列
      } else if (width < 900) {
        this.gridColumns = '1fr 1fr 1fr'  // 3列
      } else {
        this.gridColumns = '1fr 1fr 1fr 1fr'  // 4列
      }
    })
  }
}
```

## 🎡 Swiper 轮播组件

### 基础轮播

```typescript
@Entry
@Component
struct SwiperExample {
  @State images: string[] = [
    'banner1.jpg',
    'banner2.jpg',
    'banner3.jpg'
  ]
  
  build() {
    Swiper() {
      ForEach(this.images, (image: string) => {
        Image($r(`app.media.${image}`))
          .width('100%')
          .height(200)
          .objectFit(ImageFit.Cover)
      })
    }
    .autoPlay(true)
    .interval(3000)
    .indicator(true)
    .loop(true)
  }
}
```

### 自定义指示器

```typescript
@Entry
@Component
struct CustomSwiperExample {
  @State currentIndex: number = 0
  
  build() {
    Column() {
      Swiper() {
        ForEach([1, 2, 3], (item: number) => {
          Column() {
            Text(`Page ${item}`)
              .fontSize(32)
          }
          .width('100%')
          .height(300)
          .backgroundColor(0x007DFF)
        })
      }
      .indicator(false)
      .onChange((index: number) => {
        this.currentIndex = index
      })
      
      // 自定义指示器
      Row({ space: 8 }) {
        ForEach([0, 1, 2], (index: number) => {
          Circle({ width: 8, height: 8 })
            .fill(this.currentIndex === index ? Color.Blue : Color.Gray)
        })
      }
      .margin({ top: 10 })
    }
  }
}
```

## 🎭 Refresh 下拉刷新

```typescript
@Entry
@Component
struct RefreshExample {
  @State isRefreshing: boolean = false
  @State items: string[] = ['Item 1', 'Item 2', 'Item 3']
  
  async onRefresh() {
    this.isRefreshing = true
    
    // 模拟加载数据
    await new Promise(resolve => setTimeout(resolve, 2000))
    
    this.items.unshift(`新Item ${Date.now()}`)
    this.isRefreshing = false
  }
  
  build() {
    Refresh({ refreshing: this.isRefreshing }) {
      List() {
        ForEach(this.items, (item: string) => {
          ListItem() {
            Text(item)
              .width('100%')
              .height(60)
              .padding({ left: 20 })
          }
        })
      }
    }
    .onRefreshing(() => {
      this.onRefresh()
    })
  }
}
```

## 📆 Picker 选择器

### 日期选择器

```typescript
@Entry
@Component
struct DatePickerExample {
  @State selectedDate: Date = new Date()
  
  build() {
    Column({ space: 20 }) {
      Text(`选择的日期: ${this.selectedDate.toLocaleDateString()}`)
      
      DatePicker({
        start: new Date('2020-01-01'),
        end: new Date('2030-12-31'),
        selected: this.selectedDate
      })
      .onChange((value: DatePickerResult) => {
        this.selectedDate = new Date(value.year, value.month, value.day)
      })
    }
    .padding(20)
  }
}
```

### 文本选择器

```typescript
@Entry
@Component
struct TextPickerExample {
  @State selectedIndex: number = 0
  private cities: string[] = ['北京', '上海', '广州', '深圳', '杭州']
  
  build() {
    Column({ space: 20 }) {
      Text(`选择的城市: ${this.cities[this.selectedIndex]}`)
      
      TextPicker({ range: this.cities, selected: this.selectedIndex })
        .onChange((value: string, index: number) => {
          this.selectedIndex = index
        })
    }
    .padding(20)
  }
}
```

## 💡 最佳实践

### 1. 列表性能优化

```typescript
// ✅ 使用 LazyForEach 渲染大列表
LazyForEach(dataSource, (item) => {
  ListItem() {
    ItemView({ data: item })
  }
})

// ❌ 避免 ForEach 渲染大量数据
ForEach(largeArray, (item) => {
  // 性能差
})
```

### 2. 合理使用组件

```typescript
// ✅ 根据场景选择组件
// 固定数量 → ForEach
// 动态加载 → LazyForEach
// 网格布局 → Grid
// 瀑布流 → WaterFlow
```

## 📚 参考资源

- [Tabs 组件](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-0000001815927488-V5)
- [List 组件](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-0000001815767620-V5)
- [Grid 组件](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-0000001774120994-V5)

---

**下一节** → [响应式布局增强](04-响应式布局增强.md)
