---
title: æ–°å¢ç»„ä»¶åº“
date: 2025-01-22
---

# æ–°å¢ç»„ä»¶åº“

> HarmonyOS NEXT 3.0 æ–°å¢çš„å®ç”¨ç»„ä»¶

## ğŸ“± Tabs æ ‡ç­¾é¡µç»„ä»¶

### åŸºç¡€ç”¨æ³•

```typescript
@Entry
@Component
struct TabsExample {
  @State currentIndex: number = 0
  
  build() {
    Tabs({ index: this.currentIndex }) {
      TabContent() {
        Text('é¦–é¡µå†…å®¹')
      }
      .tabBar('é¦–é¡µ')
      
      TabContent() {
        Text('æ¶ˆæ¯å†…å®¹')
      }
      .tabBar('æ¶ˆæ¯')
      
      TabContent() {
        Text('æˆ‘çš„å†…å®¹')
      }
      .tabBar('æˆ‘çš„')
    }
    .onChange((index: number) => {
      this.currentIndex = index
    })
  }
}
```

### è‡ªå®šä¹‰ TabBar

```typescript
@Entry
@Component
struct CustomTabsExample {
  @State currentIndex: number = 0
  
  @Builder
  TabBuilder(index: number, name: string, icon: Resource) {
    Column({ space: 5 }) {
      Image(icon)
        .width(24)
        .height(24)
        .fillColor(this.currentIndex === index ? Color.Blue : Color.Gray)
      
      Text(name)
        .fontSize(12)
        .fontColor(this.currentIndex === index ? Color.Blue : Color.Gray)
    }
    .width('100%')
    .height(56)
    .justifyContent(FlexAlign.Center)
  }
  
  build() {
    Tabs({ index: this.currentIndex }) {
      TabContent() {
        HomePage()
      }
      .tabBar(this.TabBuilder(0, 'é¦–é¡µ', $r('app.media.icon_home')))
      
      TabContent() {
        MessagePage()
      }
      .tabBar(this.TabBuilder(1, 'æ¶ˆæ¯', $r('app.media.icon_message')))
      
      TabContent() {
        ProfilePage()
      }
      .tabBar(this.TabBuilder(2, 'æˆ‘çš„', $r('app.media.icon_profile')))
    }
    .barPosition(BarPosition.End)  // åº•éƒ¨æ ‡ç­¾æ 
    .onChange((index: number) => {
      this.currentIndex = index
    })
  }
}
```

## ğŸ“œ List åˆ—è¡¨ç»„ä»¶

### åŸºç¡€åˆ—è¡¨

```typescript
@Entry
@Component
struct ListExample {
  @State items: string[] = ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5']
  
  build() {
    List({ space: 10 }) {
      ForEach(this.items, (item: string, index: number) => {
        ListItem() {
          Row() {
            Text(`${index + 1}. ${item}`)
              .fontSize(16)
          }
          .width('100%')
          .height(60)
          .padding({ left: 20, right: 20 })
          .backgroundColor(Color.White)
          .borderRadius(8)
        }
      }, (item: string) => item)
    }
    .width('100%')
    .height('100%')
    .padding(15)
    .backgroundColor(0xF5F5F5)
  }
}
```

### æ»‘åŠ¨æ“ä½œ

```typescript
@Entry
@Component
struct SwipeListExample {
  @State items: string[] = ['é¡¹ç›®1', 'é¡¹ç›®2', 'é¡¹ç›®3']
  
  @Builder
  itemEnd(index: number) {
    Row() {
      Button('åˆ é™¤')
        .width(80)
        .height('100%')
        .backgroundColor(Color.Red)
        .onClick(() => {
          this.items.splice(index, 1)
        })
    }
  }
  
  build() {
    List() {
      ForEach(this.items, (item: string, index: number) => {
        ListItem() {
          Text(item)
            .width('100%')
            .height(60)
            .padding({ left: 20 })
            .backgroundColor(Color.White)
        }
        .swipeAction({ end: this.itemEnd(index) })
      }, (item: string, index: number) => `${index}-${item}`)
    }
  }
}
```

### LazyForEach æ‡’åŠ è½½

```typescript
class BasicDataSource implements IDataSource {
  private listeners: DataChangeListener[] = []
  private originDataArray: string[] = []
  
  public totalCount(): number {
    return this.originDataArray.length
  }
  
  public getData(index: number): string {
    return this.originDataArray[index]
  }
  
  registerDataChangeListener(listener: DataChangeListener): void {
    if (this.listeners.indexOf(listener) < 0) {
      this.listeners.push(listener)
    }
  }
  
  unregisterDataChangeListener(listener: DataChangeListener): void {
    const pos = this.listeners.indexOf(listener)
    if (pos >= 0) {
      this.listeners.splice(pos, 1)
    }
  }
  
  notifyDataAdd(index: number): void {
    this.listeners.forEach(listener => {
      listener.onDataAdd(index)
    })
  }
}

@Entry
@Component
struct LazyListExample {
  private data: BasicDataSource = new BasicDataSource()
  
  build() {
    List() {
      LazyForEach(this.data, (item: string) => {
        ListItem() {
          Text(item)
            .width('100%')
            .height(60)
        }
      }, (item: string) => item)
    }
  }
}
```

## ğŸ¨ Grid ç½‘æ ¼ç»„ä»¶

### åŸºç¡€ç½‘æ ¼

```typescript
@Entry
@Component
struct GridExample {
  @State items: number[] = Array.from({ length: 20 }, (_, i) => i + 1)
  
  build() {
    Grid() {
      ForEach(this.items, (item: number) => {
        GridItem() {
          Column() {
            Image($r('app.media.icon'))
              .width(60)
              .height(60)
            Text(`Item ${item}`)
              .fontSize(14)
              .margin({ top: 8 })
          }
          .width('100%')
          .height(120)
          .justifyContent(FlexAlign.Center)
          .backgroundColor(Color.White)
          .borderRadius(8)
        }
      })
    }
    .columnsTemplate('1fr 1fr 1fr')  // 3åˆ—
    .rowsGap(10)
    .columnsGap(10)
    .padding(15)
  }
}
```

### å“åº”å¼ç½‘æ ¼

```typescript
@Entry
@Component
struct ResponsiveGrid {
  @State gridColumns: string = '1fr 1fr'
  
  build() {
    Grid() {
      ForEach(Array.from({ length: 12 }), (item, index) => {
        GridItem() {
          Text(`${index + 1}`)
            .fontSize(20)
            .width('100%')
            .height(100)
            .textAlign(TextAlign.Center)
            .backgroundColor(0x007DFF)
            .fontColor(Color.White)
        }
      })
    }
    .columnsTemplate(this.gridColumns)
    .rowsGap(10)
    .columnsGap(10)
    .onAreaChange((oldValue, newValue) => {
      // æ ¹æ®å®½åº¦è°ƒæ•´åˆ—æ•°
      const width = newValue.width as number
      if (width < 600) {
        this.gridColumns = '1fr 1fr'  // 2åˆ—
      } else if (width < 900) {
        this.gridColumns = '1fr 1fr 1fr'  // 3åˆ—
      } else {
        this.gridColumns = '1fr 1fr 1fr 1fr'  // 4åˆ—
      }
    })
  }
}
```

## ğŸ¡ Swiper è½®æ’­ç»„ä»¶

### åŸºç¡€è½®æ’­

```typescript
@Entry
@Component
struct SwiperExample {
  @State images: string[] = [
    'banner1.jpg',
    'banner2.jpg',
    'banner3.jpg'
  ]
  
  build() {
    Swiper() {
      ForEach(this.images, (image: string) => {
        Image($r(`app.media.${image}`))
          .width('100%')
          .height(200)
          .objectFit(ImageFit.Cover)
      })
    }
    .autoPlay(true)
    .interval(3000)
    .indicator(true)
    .loop(true)
  }
}
```

### è‡ªå®šä¹‰æŒ‡ç¤ºå™¨

```typescript
@Entry
@Component
struct CustomSwiperExample {
  @State currentIndex: number = 0
  
  build() {
    Column() {
      Swiper() {
        ForEach([1, 2, 3], (item: number) => {
          Column() {
            Text(`Page ${item}`)
              .fontSize(32)
          }
          .width('100%')
          .height(300)
          .backgroundColor(0x007DFF)
        })
      }
      .indicator(false)
      .onChange((index: number) => {
        this.currentIndex = index
      })
      
      // è‡ªå®šä¹‰æŒ‡ç¤ºå™¨
      Row({ space: 8 }) {
        ForEach([0, 1, 2], (index: number) => {
          Circle({ width: 8, height: 8 })
            .fill(this.currentIndex === index ? Color.Blue : Color.Gray)
        })
      }
      .margin({ top: 10 })
    }
  }
}
```

## ğŸ­ Refresh ä¸‹æ‹‰åˆ·æ–°

```typescript
@Entry
@Component
struct RefreshExample {
  @State isRefreshing: boolean = false
  @State items: string[] = ['Item 1', 'Item 2', 'Item 3']
  
  async onRefresh() {
    this.isRefreshing = true
    
    // æ¨¡æ‹ŸåŠ è½½æ•°æ®
    await new Promise(resolve => setTimeout(resolve, 2000))
    
    this.items.unshift(`æ–°Item ${Date.now()}`)
    this.isRefreshing = false
  }
  
  build() {
    Refresh({ refreshing: this.isRefreshing }) {
      List() {
        ForEach(this.items, (item: string) => {
          ListItem() {
            Text(item)
              .width('100%')
              .height(60)
              .padding({ left: 20 })
          }
        })
      }
    }
    .onRefreshing(() => {
      this.onRefresh()
    })
  }
}
```

## ğŸ“† Picker é€‰æ‹©å™¨

### æ—¥æœŸé€‰æ‹©å™¨

```typescript
@Entry
@Component
struct DatePickerExample {
  @State selectedDate: Date = new Date()
  
  build() {
    Column({ space: 20 }) {
      Text(`é€‰æ‹©çš„æ—¥æœŸ: ${this.selectedDate.toLocaleDateString()}`)
      
      DatePicker({
        start: new Date('2020-01-01'),
        end: new Date('2030-12-31'),
        selected: this.selectedDate
      })
      .onChange((value: DatePickerResult) => {
        this.selectedDate = new Date(value.year, value.month, value.day)
      })
    }
    .padding(20)
  }
}
```

### æ–‡æœ¬é€‰æ‹©å™¨

```typescript
@Entry
@Component
struct TextPickerExample {
  @State selectedIndex: number = 0
  private cities: string[] = ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³', 'æ­å·']
  
  build() {
    Column({ space: 20 }) {
      Text(`é€‰æ‹©çš„åŸå¸‚: ${this.cities[this.selectedIndex]}`)
      
      TextPicker({ range: this.cities, selected: this.selectedIndex })
        .onChange((value: string, index: number) => {
          this.selectedIndex = index
        })
    }
    .padding(20)
  }
}
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

```typescript
// âœ… ä½¿ç”¨ LazyForEach æ¸²æŸ“å¤§åˆ—è¡¨
LazyForEach(dataSource, (item) => {
  ListItem() {
    ItemView({ data: item })
  }
})

// âŒ é¿å… ForEach æ¸²æŸ“å¤§é‡æ•°æ®
ForEach(largeArray, (item) => {
  // æ€§èƒ½å·®
})
```

### 2. åˆç†ä½¿ç”¨ç»„ä»¶

```typescript
// âœ… æ ¹æ®åœºæ™¯é€‰æ‹©ç»„ä»¶
// å›ºå®šæ•°é‡ â†’ ForEach
// åŠ¨æ€åŠ è½½ â†’ LazyForEach
// ç½‘æ ¼å¸ƒå±€ â†’ Grid
// ç€‘å¸ƒæµ â†’ WaterFlow
```

## ğŸ“š å‚è€ƒèµ„æº

- [Tabs ç»„ä»¶](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-0000001815927488-V5)
- [List ç»„ä»¶](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-0000001815767620-V5)
- [Grid ç»„ä»¶](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-0000001774120994-V5)

---

**ä¸‹ä¸€èŠ‚** â†’ [å“åº”å¼å¸ƒå±€å¢å¼º](04-å“åº”å¼å¸ƒå±€å¢å¼º.md)
