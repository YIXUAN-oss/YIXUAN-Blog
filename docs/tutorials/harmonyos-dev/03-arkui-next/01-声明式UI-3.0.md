---
title: å£°æ˜å¼ UI 3.0
date: 2025-01-22
---

# å£°æ˜å¼ UI 3.0

> ç”¨ä»£ç æè¿°ç•Œé¢ï¼Œè®© UI å¼€å‘æ›´ç®€å•

## ğŸ¨ ä»€ä¹ˆæ˜¯å£°æ˜å¼ UI

### å£°æ˜å¼ vs å‘½ä»¤å¼

**å‘½ä»¤å¼ UIï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰ï¼š**
```java
// Android å‘½ä»¤å¼
TextView textView = new TextView(context);
textView.setText("Hello");
textView.setTextSize(16);
textView.setTextColor(Color.BLACK);
layout.addView(textView);
```

**å£°æ˜å¼ UIï¼ˆArkUI NEXTï¼‰ï¼š**
```typescript
// HarmonyOS NEXT å£°æ˜å¼
Text('Hello')
  .fontSize(16)
  .fontColor(Color.Black)
```

### æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ç»„ä»¶åŒ–** | ä¸€åˆ‡çš†ç»„ä»¶ |
| **çŠ¶æ€é©±åŠ¨** | UI = f(state) |
| **å“åº”å¼** | çŠ¶æ€å˜åŒ–è‡ªåŠ¨æ›´æ–° UI |
| **å£°æ˜å¼** | æè¿°"æ˜¯ä»€ä¹ˆ"è€Œé"æ€ä¹ˆåš" |

## ğŸ—ï¸ ArkUI 3.0 æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ArkTS Component          â”‚ å¼€å‘å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     ArkUI Framework          â”‚ æ¡†æ¶å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Rendering Engine         â”‚ æ¸²æŸ“å¼•æ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Graphics Engine          â”‚ å›¾å½¢å¼•æ“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ åŸºç¡€ç»„ä»¶

### 1. æ–‡æœ¬ç»„ä»¶ - Text

```typescript
@Entry
@Component
struct TextExample {
  build() {
    Column() {
      // åŸºç¡€æ–‡æœ¬
      Text('åŸºç¡€æ–‡æœ¬')
      
      // æ ·å¼æ–‡æœ¬
      Text('æ ·å¼æ–‡æœ¬')
        .fontSize(20)
        .fontColor(Color.Blue)
        .fontWeight(FontWeight.Bold)
        .fontStyle(FontStyle.Italic)
      
      // å¤šè¡Œæ–‡æœ¬
      Text('è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬ï¼Œä¼šè‡ªåŠ¨æ¢è¡Œæ˜¾ç¤ºå¤šè¡Œå†…å®¹')
        .width('80%')
        .maxLines(2)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
      
      // å¯Œæ–‡æœ¬
      Text() {
        Span('Hello ')
          .fontColor(Color.Red)
        Span('World')
          .fontColor(Color.Blue)
          .fontSize(24)
      }
    }
    .width('100%')
    .height('100%')
    .padding(20)
  }
}
```

### 2. æŒ‰é’®ç»„ä»¶ - Button

```typescript
@Entry
@Component
struct ButtonExample {
  @State counter: number = 0
  
  build() {
    Column({ space: 20 }) {
      // æ–‡æœ¬æŒ‰é’®
      Button('æ–‡æœ¬æŒ‰é’®')
        .type(ButtonType.Normal)
        .onClick(() => {
          this.counter++
        })
      
      // èƒ¶å›ŠæŒ‰é’®
      Button('èƒ¶å›ŠæŒ‰é’®')
        .type(ButtonType.Capsule)
        .backgroundColor(Color.Blue)
      
      // åœ†å½¢æŒ‰é’®
      Button('+')
        .type(ButtonType.Circle)
        .width(60)
        .height(60)
      
      // è‡ªå®šä¹‰æŒ‰é’®
      Button() {
        Row({ space: 8 }) {
          Image($r('app.media.icon'))
            .width(24)
            .height(24)
          Text('è‡ªå®šä¹‰æŒ‰é’®')
        }
      }
      .width(200)
      
      Text(`ç‚¹å‡»æ¬¡æ•°: ${this.counter}`)
    }
    .width('100%')
    .height('100%')
    .padding(20)
  }
}
```

### 3. å›¾ç‰‡ç»„ä»¶ - Image

```typescript
@Entry
@Component
struct ImageExample {
  build() {
    Column({ space: 20 }) {
      // æœ¬åœ°èµ„æº
      Image($r('app.media.icon'))
        .width(100)
        .height(100)
      
      // ç½‘ç»œå›¾ç‰‡
      Image('https://example.com/image.jpg')
        .width(200)
        .height(200)
        .objectFit(ImageFit.Cover)
      
      // åœ†å½¢å›¾ç‰‡
      Image($r('app.media.avatar'))
        .width(80)
        .height(80)
        .borderRadius(40)
      
      // å¸¦å ä½å›¾
      Image($r('app.media.photo'))
        .alt($r('app.media.placeholder'))
        .onComplete(() => {
          console.log('å›¾ç‰‡åŠ è½½å®Œæˆ')
        })
        .onError(() => {
          console.log('å›¾ç‰‡åŠ è½½å¤±è´¥')
        })
    }
    .width('100%')
    .padding(20)
  }
}
```

### 4. è¾“å…¥æ¡† - TextInput

```typescript
@Entry
@Component
struct TextInputExample {
  @State username: string = ''
  @State password: string = ''
  
  build() {
    Column({ space: 20 }) {
      // æ™®é€šè¾“å…¥æ¡†
      TextInput({ placeholder: 'è¯·è¾“å…¥ç”¨æˆ·å' })
        .onChange((value: string) => {
          this.username = value
        })
      
      // å¯†ç è¾“å…¥æ¡†
      TextInput({ placeholder: 'è¯·è¾“å…¥å¯†ç ' })
        .type(InputType.Password)
        .onChange((value: string) => {
          this.password = value
        })
      
      // æ•°å­—è¾“å…¥æ¡†
      TextInput({ placeholder: 'è¯·è¾“å…¥æ‰‹æœºå·' })
        .type(InputType.Number)
        .maxLength(11)
      
      // å¤šè¡Œè¾“å…¥æ¡†
      TextArea({ placeholder: 'è¯·è¾“å…¥å†…å®¹' })
        .height(100)
      
      Button('æäº¤')
        .onClick(() => {
          console.log('ç”¨æˆ·å:', this.username)
          console.log('å¯†ç :', this.password)
        })
    }
    .width('100%')
    .padding(20)
  }
}
```

## ğŸ“ å¸ƒå±€ç»„ä»¶

### 1. Column - å‚ç›´å¸ƒå±€

```typescript
Column({ space: 10 }) {  // å­ç»„ä»¶é—´è·
  Text('Item 1')
  Text('Item 2')
  Text('Item 3')
}
.width('100%')
.height(200)
.justifyContent(FlexAlign.Center)      // å‚ç›´å¯¹é½
.alignItems(HorizontalAlign.Center)     // æ°´å¹³å¯¹é½
```

### 2. Row - æ°´å¹³å¸ƒå±€

```typescript
Row({ space: 10 }) {
  Text('Left')
  Text('Center')
  Text('Right')
}
.width('100%')
.height(60)
.justifyContent(FlexAlign.SpaceBetween)  // æ°´å¹³å¯¹é½
.alignItems(VerticalAlign.Center)        // å‚ç›´å¯¹é½
```

### 3. Flex - å¼¹æ€§å¸ƒå±€

```typescript
Flex({ 
  direction: FlexDirection.Row,
  wrap: FlexWrap.Wrap,
  justifyContent: FlexAlign.SpaceBetween,
  alignItems: ItemAlign.Center
}) {
  Text('Item 1').flexGrow(1)
  Text('Item 2').flexGrow(2)
  Text('Item 3').flexShrink(1)
}
```

### 4. Stack - å±‚å å¸ƒå±€

```typescript
Stack({ alignContent: Alignment.Bottom }) {
  Image($r('app.media.background'))
    .width('100%')
    .height('100%')
  
  Text('æ ‡é¢˜')
    .fontSize(24)
    .fontColor(Color.White)
    .padding(20)
}
.width('100%')
.height(300)
```

## ğŸ¯ çŠ¶æ€ç®¡ç†

### @State - ç»„ä»¶å†…éƒ¨çŠ¶æ€

```typescript
@Entry
@Component
struct Counter {
  @State count: number = 0
  
  build() {
    Column() {
      Text(`Count: ${this.count}`)
        .fontSize(24)
      
      Button('å¢åŠ ')
        .onClick(() => {
          this.count++  // UI è‡ªåŠ¨æ›´æ–°
        })
    }
  }
}
```

### @Prop - å•å‘æ•°æ®æµ

```typescript
@Component
struct ChildComponent {
  @Prop message: string = ''  // ä»çˆ¶ç»„ä»¶æ¥æ”¶
  
  build() {
    Text(this.message)
  }
}

@Entry
@Component
struct ParentComponent {
  @State parentMessage: string = 'Hello'
  
  build() {
    Column() {
      ChildComponent({ message: this.parentMessage })
      
      Button('æ”¹å˜æ¶ˆæ¯')
        .onClick(() => {
          this.parentMessage = 'World'
        })
    }
  }
}
```

### @Link - åŒå‘ç»‘å®š

```typescript
@Component
struct ChildComponent {
  @Link value: number  // åŒå‘ç»‘å®š
  
  build() {
    Button(`å­ç»„ä»¶: ${this.value}`)
      .onClick(() => {
        this.value++  // ä¿®æ”¹ä¼šåŒæ­¥åˆ°çˆ¶ç»„ä»¶
      })
  }
}

@Entry
@Component
struct ParentComponent {
  @State count: number = 0
  
  build() {
    Column() {
      Text(`çˆ¶ç»„ä»¶: ${this.count}`)
      ChildComponent({ value: $count })  // $ è¡¨ç¤ºåŒå‘ç»‘å®š
    }
  }
}
```

## ğŸ”„ æ¡ä»¶æ¸²æŸ“

### if/else

```typescript
@Entry
@Component
struct ConditionalRender {
  @State isLoggedIn: boolean = false
  
  build() {
    Column() {
      if (this.isLoggedIn) {
        Text('æ¬¢è¿å›æ¥!')
        Button('é€€å‡ºç™»å½•')
          .onClick(() => {
            this.isLoggedIn = false
          })
      } else {
        Text('è¯·å…ˆç™»å½•')
        Button('ç™»å½•')
          .onClick(() => {
            this.isLoggedIn = true
          })
      }
    }
  }
}
```

## ğŸ” åˆ—è¡¨æ¸²æŸ“

### ForEach

```typescript
@Entry
@Component
struct ListRender {
  @State items: string[] = ['Item 1', 'Item 2', 'Item 3']
  
  build() {
    Column() {
      ForEach(this.items, (item: string, index: number) => {
        Row() {
          Text(`${index + 1}. ${item}`)
        }
        .width('100%')
        .padding(10)
        .backgroundColor(Color.White)
        .margin({ bottom: 10 })
      }, (item: string) => item)  // key ç”Ÿæˆå‡½æ•°
    }
    .width('100%')
    .padding(20)
  }
}
```

### LazyForEach - æ‡’åŠ è½½

```typescript
class BasicDataSource implements IDataSource {
  private listeners: DataChangeListener[] = []
  private data: string[] = []
  
  public totalCount(): number {
    return this.data.length
  }
  
  public getData(index: number): string {
    return this.data[index]
  }
  
  registerDataChangeListener(listener: DataChangeListener): void {
    this.listeners.push(listener)
  }
  
  unregisterDataChangeListener(listener: DataChangeListener): void {
    const pos = this.listeners.indexOf(listener)
    if (pos >= 0) {
      this.listeners.splice(pos, 1)
    }
  }
}

@Entry
@Component
struct LazyList {
  private data: BasicDataSource = new BasicDataSource()
  
  build() {
    List() {
      LazyForEach(this.data, (item: string) => {
        ListItem() {
          Text(item)
        }
      }, item => item)
    }
  }
}
```

## ğŸ¨ ç»„ä»¶æ ·å¼

### é€šç”¨æ ·å¼

```typescript
Text('æ ·å¼ç¤ºä¾‹')
  .width(200)                    // å®½åº¦
  .height(60)                    // é«˜åº¦
  .backgroundColor(Color.Blue)   // èƒŒæ™¯è‰²
  .borderRadius(10)              // åœ†è§’
  .padding(10)                   // å†…è¾¹è·
  .margin(20)                    // å¤–è¾¹è·
  .opacity(0.8)                  // é€æ˜åº¦
  .shadow({                      // é˜´å½±
    radius: 10,
    color: Color.Gray,
    offsetX: 5,
    offsetY: 5
  })
```

### å“åº”å¼æ ·å¼

```typescript
@Entry
@Component
struct ResponsiveStyle {
  @State fontSize: number = 16
  
  build() {
    Column() {
      Text('å“åº”å¼æ–‡æœ¬')
        .fontSize(this.fontSize)
      
      Button('å¢å¤§å­—ä½“')
        .onClick(() => {
          this.fontSize += 2
        })
    }
  }
}
```

## ğŸ“š æœ€ä½³å®è·µ

### 1. ç»„ä»¶æ‹†åˆ†

```typescript
// âœ… å¥½çš„å®è·µ - å•ä¸€èŒè´£
@Component
struct UserAvatar {
  @Prop avatarUrl: string
  
  build() {
    Image(this.avatarUrl)
      .width(50)
      .height(50)
      .borderRadius(25)
  }
}

@Component
struct UserInfo {
  @Prop name: string
  @Prop email: string
  
  build() {
    Column() {
      Text(this.name)
      Text(this.email)
    }
  }
}
```

### 2. é¿å…è¿‡åº¦åµŒå¥—

```typescript
// âŒ é¿å…
Column() {
  Row() {
    Column() {
      Row() {
        Text('æ·±å±‚åµŒå¥—')
      }
    }
  }
}

// âœ… æ¨è - æå–ç»„ä»¶
@Component
struct Content {
  build() {
    Text('æ¸…æ™°ç»“æ„')
  }
}
```

### 3. åˆç†ä½¿ç”¨çŠ¶æ€

```typescript
// âœ… åªåœ¨éœ€è¦å“åº”å¼çš„åœ°æ–¹ä½¿ç”¨ @State
@Entry
@Component
struct GoodPractice {
  @State activeTab: number = 0  // éœ€è¦å“åº”å¼
  private readonly title: string = 'æ ‡é¢˜'  // ä¸éœ€è¦å“åº”å¼
  
  build() {
    Column() {
      Text(this.title)
      Tabs({ index: this.activeTab })
    }
  }
}
```

## ğŸ“š å‚è€ƒèµ„æº

- [ArkUI æ¦‚è¿°](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkui-overview-0000001820999645-V5)
- [ç»„ä»¶å‚è€ƒ](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-events-click-0000001774279954-V5)

---

**ä¸‹ä¸€èŠ‚** â†’ [ç»„ä»¶ç³»ç»Ÿé‡æ„](02-ç»„ä»¶ç³»ç»Ÿé‡æ„.md)
