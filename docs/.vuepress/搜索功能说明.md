# 搜索功能说明

## 当前配置：Algolia DocSearch

已配置 Algolia DocSearch 插件，可以实现更强大和美观的搜索功能。

### ⚠️ 重要：需要填写 Algolia 配置信息

目前配置文件中使用的是占位符，你需要：
1. 申请 Algolia 账户并获取配置信息
2. 在 `docs/.vuepress/config.ts` 文件中替换以下三个值：
   - `YOUR_APP_ID` → 你的 Application ID
   - `YOUR_API_KEY` → 你的 Search-Only API Key  
   - `YOUR_INDEX_NAME` → 你的 Index Name

---

## 如何获取 Algolia 配置信息

Algolia 提供更强大的搜索能力，包括：
- 更快的搜索速度
- 更精准的搜索结果
- 支持搜索高亮
- 支持搜索历史记录

### 方案一：申请免费的 DocSearch（推荐）

**DocSearch** 是 Algolia 为开源项目和技术文档网站提供的免费服务。

#### 步骤：

1. **访问 DocSearch 申请页面**  
   [https://docsearch.algolia.com/apply/](https://docsearch.algolia.com/apply/)

2. **填写申请表单**
   - 网站 URL（必须是公开可访问的）
   - 邮箱地址
   - 说明这是技术文档或博客网站
   - 确认你是网站所有者

3. **等待审核**
   - 通常 1-2 周内会收到回复
   - 通过后会收到包含 `appId`、`apiKey` 和 `indexName` 的邮件

4. **填写配置信息**
   收到邮件后，打开 `docs/.vuepress/config.ts`，找到第 136-138 行：
   ```typescript
   appId: 'YOUR_APP_ID',        // 替换为邮件中的 appId
   apiKey: 'YOUR_API_KEY',      // 替换为邮件中的 apiKey
   indexName: 'YOUR_INDEX_NAME' // 替换为邮件中的 indexName
   ```

5. **自动爬取**
   - DocSearch 会自动定期爬取你的网站
   - 无需手动配置爬虫

---

### 方案二：使用 Algolia 账户（手动配置）

如果不符合 DocSearch 申请条件，可以使用 Algolia 普通账户。

#### 步骤：

1. **注册 Algolia 账户**  
   访问 [https://www.algolia.com/](https://www.algolia.com/) 注册免费账户

2. **创建应用和索引**
   - 登录 Algolia Dashboard
   - 创建新的 Application
   - 在 Application 中创建 Index（给索引起个名字，如 `blog`）

3. **获取配置信息**
   在 Dashboard 的 **API Keys** 页面获取：
   - Application ID
   - Search-Only API Key（注意：不是 Admin API Key）
   - 你创建的 Index Name

4. **填写配置信息**
   同方案一的第 4 步

5. **配置爬虫（重要）**
   需要手动配置爬虫来索引网站内容，有两种方式：
   
   **方式 A：使用 Algolia Crawler（推荐）**
   - 在 Algolia Dashboard 的 Crawler 页面配置
   - 设置网站 URL 和爬取规则
   - 需要付费或使用试用额度
   
   **方式 B：自己写脚本**
   - 使用 `algoliasearch` npm 包
   - 手动抓取网站内容并上传到 Algolia
   - 适合技术能力较强的用户

---

## 测试搜索功能

在填写配置信息后：

1. **安装依赖**
   ```bash
   npm install
   ```

2. **启动开发服务器**
   ```bash
   npm run dev
   ```

3. **测试搜索**
   - 打开浏览器访问本地开发地址
   - 点击导航栏的搜索图标
   - 应该能看到和截图中一样的 Algolia 搜索界面

---

## 注意事项

1. **配置前的搜索功能**
   - 在填写 Algolia 信息之前，主题的内置搜索仍然可用
   - 但不会显示 Algolia 的高级搜索界面

2. **网站必须公开访问**
   - DocSearch 和 Algolia Crawler 都需要能访问你的网站
   - 确保网站已部署到 Vercel 或 GitHub Pages

3. **索引更新频率**
   - DocSearch：每周自动爬取一次
   - Algolia Crawler：可自定义爬取频率
   - 手动脚本：随时可以更新

4. **API Key 安全**
   - 只使用 Search-Only API Key（可以公开）
   - 千万不要将 Admin API Key 提交到代码仓库

---

## 当前状态

✅ **DocSearch 插件已安装并配置**  
✅ **中文界面已配置**（搜索框、按钮、提示文字都是中文）  
⚠️ **需要填写真实的 Algolia 配置信息才能使用**

### 下一步操作：

**选项 1（推荐）：** 申请免费的 DocSearch
- 访问：https://docsearch.algolia.com/apply/
- 填写申请表单，等待审核

**选项 2：** 注册 Algolia 账户
- 访问：https://www.algolia.com/
- 注册并创建索引

**临时方案：** 如果暂时不想配置 Algolia
- 可以移除 `plugins` 配置，使用主题内置搜索
- 内置搜索功能较简单但也够用

---

## 参考文档

- VuePress DocSearch 插件：[https://v2.vuepress.vuejs.org/reference/plugin/docsearch.html](https://v2.vuepress.vuejs.org/reference/plugin/docsearch.html)
- Algolia DocSearch：[https://docsearch.algolia.com/](https://docsearch.algolia.com/)
- vuepress-theme-reco：[https://theme-reco.vuejs.press/](https://theme-reco.vuejs.press/)
