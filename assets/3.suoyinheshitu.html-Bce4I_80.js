import{_ as n,c as a,d as e,o as p}from"./app-I6OnLCmc.js";const l={};function t(c,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="索引和视图" tabindex="-1"><a class="header-anchor" href="#索引和视图"><span>索引和视图</span></a></h1><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">#1. 使用SQL语句ALTER TABLE分别删除studentsdb数据库的student_info表、grade表、curriculum表的主键索引。</span></span>
<span class="line"><span class="token keyword">USE</span> studentsdb<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student_info <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> curriculum <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> grade <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#2. 使用SQL语句为curriculum表的课程编号创建唯一性索引，命名为cno_idx</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> cno_idx <span class="token keyword">ON</span> curriculum<span class="token punctuation">(</span>课程编号<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#3. 使用SQL语句为grade表的“分数”字段创建一个普通索引，命名为grade_idx。</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> grade_idx <span class="token keyword">ON</span> grade<span class="token punctuation">(</span>分数<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#4. 使用SQL语句为grade表的“学号”和“课程编号”字段创建一个复合唯一索引，命名为grade_sid_cid_idx。</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> grade_sid_cid_idx <span class="token keyword">ON</span> grade<span class="token punctuation">(</span>学号<span class="token punctuation">,</span>课程编号<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#5. 查看grade表上的索引信息。</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> grade<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#6. 使用SQL语句删除索引grade_idx。再次查看grade表上的索引信息。</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> grade_idx <span class="token keyword">ON</span> grade<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> grade<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#7. 使用SQL语句CREATE VIEW建立一个名为v_stu_c的视图，显示学生的学号、姓名、所学课程的课程编号，并利用视图查询学号为0003的学生情况。</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v_stu_c</span>
<span class="line"><span class="token keyword">AS</span></span>
<span class="line"><span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>学号<span class="token punctuation">,</span>姓名<span class="token punctuation">,</span>课程编号 <span class="token keyword">FROM</span> student_info s<span class="token punctuation">,</span>grade g</span>
<span class="line"><span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>学号<span class="token operator">=</span>g<span class="token punctuation">.</span>学号<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v_stu_c</span>
<span class="line"><span class="token keyword">WHERE</span> 学号 <span class="token operator">=</span> <span class="token string">&#39;0003&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#8. 基于student_info表、curriculum表和grade表，建立一个名为v_stu_g的视图，视图包括所有学生的学号、姓名、课程名称、分数。使用视图v_stu_g查询学号为0001的学生的课程平均分。</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v_stu_g</span>
<span class="line"><span class="token keyword">AS</span></span>
<span class="line"><span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>学号<span class="token punctuation">,</span>姓名<span class="token punctuation">,</span>课程名称<span class="token punctuation">,</span>分数</span>
<span class="line"><span class="token keyword">FROM</span> student_info s<span class="token punctuation">,</span>grade g<span class="token punctuation">,</span>curriculum c</span>
<span class="line"><span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>学号<span class="token operator">=</span>g<span class="token punctuation">.</span>学号 <span class="token operator">AND</span> g<span class="token punctuation">.</span>课程编号<span class="token operator">=</span>c<span class="token punctuation">.</span>课程编号<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>分数<span class="token punctuation">)</span> 平均分 <span class="token keyword">FROM</span> v_stu_g <span class="token keyword">WHERE</span> 学号<span class="token operator">=</span><span class="token string">&#39;0001&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#9. 使用SQL语句修改视图v_stu_g，显示学生的学号、姓名、性别。</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> v_stu_g</span>
<span class="line"><span class="token keyword">AS</span></span>
<span class="line"><span class="token keyword">SELECT</span> 学号<span class="token punctuation">,</span>姓名<span class="token punctuation">,</span>性别 <span class="token keyword">FROM</span> student_info<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v_stu_g</span>
<span class="line"></span>
<span class="line"><span class="token comment">#10.利用视图v_stu_g为student_info表添加一行数据：学号为0010、姓名为陈婷婷、性别为女。</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> v_stu_g <span class="token punctuation">(</span>学号<span class="token punctuation">,</span>姓名<span class="token punctuation">,</span>性别<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;0010&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;陈婷婷&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#11.利用视图v_stu_g删除学号为0010的学生记录。</span></span>
<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> v_stu_g <span class="token keyword">WHERE</span> 学号<span class="token operator">=</span><span class="token string">&#39;0010&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#12.利用视图v_stu_g修改姓名为张青平的学生的高等数学的分数为87。</span></span>
<span class="line"><span class="token keyword">UPDATE</span> grade <span class="token keyword">SET</span> 分数<span class="token operator">=</span><span class="token number">87</span></span>
<span class="line"><span class="token keyword">WHERE</span> 学号<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> 学号 <span class="token keyword">FROM</span> v_stu_g <span class="token keyword">WHERE</span> 姓名<span class="token operator">=</span><span class="token string">&#39;张青平&#39;</span><span class="token punctuation">)</span><span class="token operator">AND</span></span>
<span class="line">课程编号<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> 课程编号 <span class="token keyword">FROM</span> curriculum <span class="token keyword">WHERE</span> 课程名称<span class="token operator">=</span><span class="token string">&#39;高等数学&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#13.使用SQL语句删除视图v_stu_c和v_stu_g。</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> v_stu_c<span class="token punctuation">,</span>v_stu_g<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自己" tabindex="-1"><a class="header-anchor" href="#自己"><span>自己</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">use</span> test01<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> curriculum <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> grade <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> cno_idx <span class="token keyword">on</span> curriculum<span class="token punctuation">(</span>cur_number<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">index</span> grade_idx <span class="token keyword">on</span> grade<span class="token punctuation">(</span>gra_grade<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">index</span> grade_sid_cid_idx <span class="token keyword">on</span> grade<span class="token punctuation">(</span>gra_id<span class="token punctuation">,</span>gra_number<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> grade<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">index</span> grade_idx <span class="token keyword">on</span> grade<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> grade<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">view</span> v_stu_c <span class="token keyword">as</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gra_id <span class="token keyword">from</span> <span class="token keyword">user</span> s<span class="token punctuation">,</span> grade g</span>
<span class="line"><span class="token keyword">where</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> g<span class="token punctuation">.</span>gra_id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> v_stu_c <span class="token keyword">where</span> gra_id <span class="token operator">=</span> <span class="token string">&#39;0003&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">view</span> v_stu_g <span class="token keyword">as</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>cur_name<span class="token punctuation">,</span>gra_grade <span class="token keyword">from</span> <span class="token keyword">user</span> s<span class="token punctuation">,</span>grade g<span class="token punctuation">,</span>curriculum c</span>
<span class="line"><span class="token keyword">where</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> g<span class="token punctuation">.</span>gra_id <span class="token operator">and</span> g<span class="token punctuation">.</span>gra_number <span class="token operator">=</span> c<span class="token punctuation">.</span>cur_number<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>gra_grade<span class="token punctuation">)</span> <span class="token keyword">from</span> v_stu_g <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token string">&#39;0001&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">view</span> v_stu_g <span class="token keyword">as</span></span>
<span class="line"><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> v_stu_g<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">0010</span><span class="token punctuation">,</span><span class="token string">&#39;陈婷婷&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> v_stu_g <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">0010</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">update</span> grade <span class="token keyword">set</span> gra_grade <span class="token operator">=</span> <span class="token number">87</span></span>
<span class="line"><span class="token keyword">where</span> gra_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> v_stu_g <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&#39;张青平&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">and</span> gra_number <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> cur_number <span class="token keyword">from</span> curriculum <span class="token keyword">where</span> cur_name<span class="token operator">=</span><span class="token string">&#39;高等数学&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">view</span> v_stu_c<span class="token punctuation">,</span>v_stu_g<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)])])}const i=n(l,[["render",t]]),r=JSON.parse('{"path":"/tutorials/database/mysql/di04zhang-shijianlianxi/3.suoyinheshitu.html","title":"索引和视图","lang":"zh-CN","frontmatter":{"title":"索引和视图"},"headers":[{"level":3,"title":"自己","slug":"自己","link":"#自己","children":[]}],"git":{"createdTime":1760859744000,"updatedTime":1760959407000,"contributors":[{"name":"YIXUAN","email":"byyi.xuan@outlook.com","commits":1}]},"filePathRelative":"tutorials/database/mysql/第04章-实践练习/3.索引和视图.md"}');export{i as comp,r as data};
