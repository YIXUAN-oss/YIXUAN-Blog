import{_ as i,c as o,d as c,e as s,f as a,b as e,w as r,r as t,o as d}from"./app-BVgOaNeG.js";const u={},k={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ai-overview-0000001820880597-V5",target:"_blank",rel:"noopener noreferrer"},m={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/mindspore-lite-guidelines-0000001774121034-V5",target:"_blank",rel:"noopener noreferrer"};function v(h,n){const p=t("ExternalLinkIcon"),l=t("RouteLink");return d(),o("div",null,[n[5]||(n[5]=c(`<h1 id="ai-engine-api" tabindex="-1"><a class="header-anchor" href="#ai-engine-api"><span>AI Engine API</span></a></h1><blockquote><p>掌握 AI Engine 核心 API</p></blockquote><h2 id="🎯-ai-engine-初始化" tabindex="-1"><a class="header-anchor" href="#🎯-ai-engine-初始化"><span>🎯 AI Engine 初始化</span></a></h2><h3 id="创建-ai-引擎" tabindex="-1"><a class="header-anchor" href="#创建-ai-引擎"><span>创建 AI 引擎</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> aiEngine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ohos.ai.engine&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 初始化配置</span></span>
<span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  enableNPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// 启用 NPU 加速</span></span>
<span class="line">  enableGPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// 启用 GPU 加速</span></span>
<span class="line">  threads<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>           <span class="token comment">// 线程数</span></span>
<span class="line">  priority<span class="token operator">:</span> <span class="token string">&#39;high&#39;</span>      <span class="token comment">// 优先级</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建引擎实例</span></span>
<span class="line"><span class="token keyword">const</span> engine <span class="token operator">=</span> aiEngine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="🔧-模型管理" tabindex="-1"><a class="header-anchor" href="#🔧-模型管理"><span>🔧 模型管理</span></a></h2><h3 id="加载模型" tabindex="-1"><a class="header-anchor" href="#加载模型"><span>加载模型</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// 加载本地模型</span></span>
<span class="line"><span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  modelPath<span class="token operator">:</span> <span class="token string">&#39;/data/storage/el2/base/files/model.ms&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  modelType<span class="token operator">:</span> <span class="token string">&#39;MindSpore&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 加载云端模型</span></span>
<span class="line"><span class="token keyword">const</span> cloudModel <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModelFromCloud</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  modelId<span class="token operator">:</span> <span class="token string">&#39;image_classifier_v1&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  cacheDir<span class="token operator">:</span> <span class="token string">&#39;/data/storage/el2/base/cache/&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="模型推理" tabindex="-1"><a class="header-anchor" href="#模型推理"><span>模型推理</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// 准备输入数据</span></span>
<span class="line"><span class="token keyword">const</span> inputData <span class="token operator">=</span> <span class="token function">prepareInputData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 执行推理</span></span>
<span class="line"><span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token keyword">await</span> model<span class="token punctuation">.</span><span class="token function">infer</span><span class="token punctuation">(</span>inputData<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 处理输出</span></span>
<span class="line"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">parseOutput</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;推理结果:&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="💡-最佳实践" tabindex="-1"><a class="header-anchor" href="#💡-最佳实践"><span>💡 最佳实践</span></a></h2><h3 id="_1-复用模型实例" tabindex="-1"><a class="header-anchor" href="#_1-复用模型实例"><span>1. 复用模型实例</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// ✅ 单例模式</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ModelManager</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> Model</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModel</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-硬件加速" tabindex="-1"><a class="header-anchor" href="#_2-硬件加速"><span>2. 硬件加速</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// 启用 NPU 加速</span></span>
<span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  enableNPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  precision<span class="token operator">:</span> <span class="token string">&#39;FP16&#39;</span>  <span class="token comment">// 半精度计算</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-批量推理" tabindex="-1"><a class="header-anchor" href="#_3-批量推理"><span>3. 批量推理</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// 批量处理提高效率</span></span>
<span class="line"><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> model<span class="token punctuation">.</span><span class="token function">batchInfer</span><span class="token punctuation">(</span>inputBatch<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  batchSize<span class="token operator">:</span> <span class="token number">32</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📚-参考资源" tabindex="-1"><a class="header-anchor" href="#📚-参考资源"><span>📚 参考资源</span></a></h2>`,18)),s("ul",null,[s("li",null,[s("a",k,[n[0]||(n[0]=a("AI能力概述",-1)),e(p)])]),s("li",null,[s("a",m,[n[1]||(n[1]=a("MindSpore Lite",-1)),e(p)])])]),n[6]||(n[6]=s("hr",null,null,-1)),s("p",null,[n[3]||(n[3]=s("strong",null,"下一节",-1)),n[4]||(n[4]=a(" → ",-1)),e(l,{to:"/tutorials/harmonyos-dev/09-ai-native/03-%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB%E4%B8%8E%E5%90%88%E6%88%90.html"},{default:r(()=>[...n[2]||(n[2]=[a("语音识别与合成",-1)])]),_:1})])])}const g=i(u,[["render",v]]),y=JSON.parse('{"path":"/tutorials/harmonyos-dev/09-ai-native/02-AI-Engine-API.html","title":"AI Engine API","lang":"zh-CN","frontmatter":{"title":"AI Engine API","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"🎯 AI Engine 初始化","slug":"🎯-ai-engine-初始化","link":"#🎯-ai-engine-初始化","children":[{"level":3,"title":"创建 AI 引擎","slug":"创建-ai-引擎","link":"#创建-ai-引擎","children":[]}]},{"level":2,"title":"🔧 模型管理","slug":"🔧-模型管理","link":"#🔧-模型管理","children":[{"level":3,"title":"加载模型","slug":"加载模型","link":"#加载模型","children":[]},{"level":3,"title":"模型推理","slug":"模型推理","link":"#模型推理","children":[]}]},{"level":2,"title":"💡 最佳实践","slug":"💡-最佳实践","link":"#💡-最佳实践","children":[{"level":3,"title":"1. 复用模型实例","slug":"_1-复用模型实例","link":"#_1-复用模型实例","children":[]},{"level":3,"title":"2. 硬件加速","slug":"_2-硬件加速","link":"#_2-硬件加速","children":[]},{"level":3,"title":"3. 批量推理","slug":"_3-批量推理","link":"#_3-批量推理","children":[]}]},{"level":2,"title":"📚 参考资源","slug":"📚-参考资源","link":"#📚-参考资源","children":[]}],"git":{"createdTime":1761123387000,"updatedTime":1761123387000,"contributors":[{"name":"YIXUAN","email":"byyi.xuan@outlook.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/09-ai-native/02-AI-Engine-API.md"}');export{g as comp,y as data};
