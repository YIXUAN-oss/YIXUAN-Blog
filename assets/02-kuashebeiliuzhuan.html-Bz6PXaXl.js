import{_ as o,c as i,d as c,e as s,f as a,b as p,w as u,r as t,o as r}from"./app-CJnNnfV_.js";const k={},d={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/hop-cross-device-migration-0000001821000453-V5",target:"_blank",rel:"noopener noreferrer"};function v(m,n){const e=t("ExternalLinkIcon"),l=t("RouteLink");return r(),i("div",null,[n[4]||(n[4]=c(`<h1 id="跨设备流转" tabindex="-1"><a class="header-anchor" href="#跨设备流转"><span>跨设备流转</span></a></h1><blockquote><p>实现应用跨设备无缝迁移</p></blockquote><h2 id="🔄-流转概述" tabindex="-1"><a class="header-anchor" href="#🔄-流转概述"><span>🔄 流转概述</span></a></h2><h3 id="什么是流转" tabindex="-1"><a class="header-anchor" href="#什么是流转"><span>什么是流转</span></a></h3><p>应用从一个设备迁移到另一个设备，保持状态和数据的连续性。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">流转场景</span>
<span class="line">├─ 手机 → 平板（看视频换大屏）</span>
<span class="line">├─ 平板 → 手机（外出继续使用）</span>
<span class="line">├─ 手机 → PC（办公更高效）</span>
<span class="line">└─ PC → 手机（随时随地）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="🎯-uiability-迁移" tabindex="-1"><a class="header-anchor" href="#🎯-uiability-迁移"><span>🎯 UIAbility 迁移</span></a></h2><h3 id="配置迁移能力" tabindex="-1"><a class="header-anchor" href="#配置迁移能力"><span>配置迁移能力</span></a></h3><div class="language-json5 line-numbers-mode" data-highlighter="prismjs" data-ext="json5" data-title="json5"><pre><code><span class="line"><span class="token comment">// module.json5</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;abilities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MainAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;continuable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 启用流转能力</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现迁移接口" tabindex="-1"><a class="header-anchor" href="#实现迁移接口"><span>实现迁移接口</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> UIAbility <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.UIAbility&#39;</span></span>
<span class="line"><span class="token keyword">import</span> AbilityConstant <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.AbilityConstant&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MainAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 保存状态（迁移前）</span></span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Object<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;准备迁移&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 保存应用状态</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentPage&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;DetailPage&#39;</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;scrollPosition&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">120</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoProgress&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">58.5</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;formData&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      username<span class="token operator">:</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      content<span class="token operator">:</span> <span class="token string">&#39;未完成的输入&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 返回同意迁移</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// 恢复状态（迁移后）</span></span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;从其他设备迁移而来&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// 恢复状态</span></span>
<span class="line">      <span class="token keyword">const</span> currentPage <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentPage</span>
<span class="line">      <span class="token keyword">const</span> scrollPosition <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>scrollPosition</span>
<span class="line">      <span class="token keyword">const</span> videoProgress <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoProgress</span>
<span class="line">      <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>formData <span class="token operator">||</span> <span class="token string">&#39;{}&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// 应用状态</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;currentPage&#39;</span><span class="token punctuation">,</span> currentPage<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;scrollPosition&#39;</span><span class="token punctuation">,</span> scrollPosition<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;videoProgress&#39;</span><span class="token punctuation">,</span> videoProgress<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;formData&#39;</span><span class="token punctuation">,</span> formData<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📦-数据迁移" tabindex="-1"><a class="header-anchor" href="#📦-数据迁移"><span>📦 数据迁移</span></a></h2><h3 id="迁移用户数据" tabindex="-1"><a class="header-anchor" href="#迁移用户数据"><span>迁移用户数据</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">VideoPlayerAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> player<span class="token operator">:</span> VideoPlayer</span>
<span class="line">  </span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 获取当前播放状态</span></span>
<span class="line">    <span class="token keyword">const</span> currentTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> duration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getVideoUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 保存到迁移参数</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> videoUrl</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> currentTime</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;duration&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> duration</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 恢复播放器</span></span>
<span class="line">      <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoUrl</span>
<span class="line">      <span class="token keyword">const</span> currentTime <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentTime</span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>videoUrl<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">seekTo</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="迁移大数据" tabindex="-1"><a class="header-anchor" href="#迁移大数据"><span>迁移大数据</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> distributedKVStore <span class="token keyword">from</span> <span class="token string">&#39;@ohos.data.distributedKVStore&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">DataMigrationHelper</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> kvStore<span class="token operator">:</span> distributedKVStore<span class="token punctuation">.</span>SingleKVStore</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> kvManager <span class="token operator">=</span> distributedKVStore<span class="token punctuation">.</span><span class="token function">createKVManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      context<span class="token operator">:</span> context<span class="token punctuation">,</span></span>
<span class="line">      bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.app&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore <span class="token operator">=</span> <span class="token keyword">await</span> kvManager<span class="token punctuation">.</span><span class="token function">getKVStore</span><span class="token punctuation">(</span><span class="token string">&#39;migrationStore&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      createIfMissing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      autoSync<span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// 保存数据到分布式存储</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">saveForMigration</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// 从分布式存储读取</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">loadFromMigration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">DocumentEditorAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> migrationHelper<span class="token operator">:</span> DataMigrationHelper</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 保存大量数据到分布式存储</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>migrationHelper<span class="token punctuation">.</span><span class="token function">saveForMigration</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      document<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentDocument<span class="token punctuation">,</span></span>
<span class="line">      editHistory<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>editHistory<span class="token punctuation">,</span></span>
<span class="line">      cursorPosition<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cursorPosition</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 只传递数据标识</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;dataKey&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 从分布式存储恢复数据</span></span>
<span class="line">      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>migrationHelper<span class="token punctuation">.</span><span class="token function">loadFromMigration</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>currentDocument <span class="token operator">=</span> data<span class="token punctuation">.</span>document</span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>editHistory <span class="token operator">=</span> data<span class="token punctuation">.</span>editHistory</span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cursorPosition <span class="token operator">=</span> data<span class="token punctuation">.</span>cursorPosition</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="🎮-实战案例-视频播放器流转" tabindex="-1"><a class="header-anchor" href="#🎮-实战案例-视频播放器流转"><span>🎮 实战案例：视频播放器流转</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct VideoPlayer <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">)</span> videoUrl<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#39;&#39;</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">)</span> currentTime<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">)</span> isPlaying<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">private</span> videoController<span class="token operator">:</span> VideoController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoController</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">aboutToAppear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 如果是迁移过来的，恢复播放状态</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>videoUrl <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">setCurrentTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        src<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoUrl<span class="token punctuation">,</span></span>
<span class="line">        controller<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoController</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">&#39;100%&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 实时更新播放进度</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> event<span class="token punctuation">.</span>time</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{</span> space<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying <span class="token operator">?</span> <span class="token string">&#39;暂停&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;播放&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying</span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> top<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">formatTime</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> sec <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>sec<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Ability</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">VideoPlayerAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 获取当前状态</span></span>
<span class="line">    <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> currentTime <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> isPlaying <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 保存到迁移参数</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> videoUrl</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> currentTime</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> isPlaying</span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 恢复状态</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoUrl<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>isPlaying<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="💡-最佳实践" tabindex="-1"><a class="header-anchor" href="#💡-最佳实践"><span>💡 最佳实践</span></a></h2><h3 id="_1-只迁移必要数据" tabindex="-1"><a class="header-anchor" href="#_1-只迁移必要数据"><span>1. 只迁移必要数据</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// ✅ 只保存关键状态</span></span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoId&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoId</span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;progress&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>progress</span>
<span class="line"></span>
<span class="line"><span class="token comment">// ❌ 避免保存大数据</span></span>
<span class="line"><span class="token comment">// wantParam[&#39;videoData&#39;] = this.videoBuffer  // 太大</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-使用分布式存储" tabindex="-1"><a class="header-anchor" href="#_2-使用分布式存储"><span>2. 使用分布式存储</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// 大数据放分布式存储</span></span>
<span class="line"><span class="token keyword">await</span> kvStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;largeData&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 只传递引用</span></span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;dataKey&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;largeData&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-处理迁移失败" tabindex="-1"><a class="header-anchor" href="#_3-处理迁移失败"><span>3. 处理迁移失败</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 保存状态</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;迁移准备失败:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">REJECT</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📚-参考资源" tabindex="-1"><a class="header-anchor" href="#📚-参考资源"><span>📚 参考资源</span></a></h2>`,26)),s("ul",null,[s("li",null,[s("a",d,[n[0]||(n[0]=a("跨端迁移",-1)),p(e)])])]),n[5]||(n[5]=s("hr",null,null,-1)),s("p",null,[n[2]||(n[2]=s("strong",null,"下一节",-1)),n[3]||(n[3]=a(" → ",-1)),p(l,{to:"/tutorials/harmonyos-dev/10-distributed-next/03-%E5%88%86%E5%B8%83%E5%BC%8F%E7%BB%84%E4%BB%B6.html"},{default:u(()=>[...n[1]||(n[1]=[a("分布式组件",-1)])]),_:1})])])}const y=o(k,[["render",v]]),h=JSON.parse('{"path":"/tutorials/harmonyos-dev/10-distributed-next/02-kuashebeiliuzhuan.html","title":"跨设备流转","lang":"zh-CN","frontmatter":{"title":"跨设备流转","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"🔄 流转概述","slug":"🔄-流转概述","link":"#🔄-流转概述","children":[{"level":3,"title":"什么是流转","slug":"什么是流转","link":"#什么是流转","children":[]}]},{"level":2,"title":"🎯 UIAbility 迁移","slug":"🎯-uiability-迁移","link":"#🎯-uiability-迁移","children":[{"level":3,"title":"配置迁移能力","slug":"配置迁移能力","link":"#配置迁移能力","children":[]},{"level":3,"title":"实现迁移接口","slug":"实现迁移接口","link":"#实现迁移接口","children":[]}]},{"level":2,"title":"📦 数据迁移","slug":"📦-数据迁移","link":"#📦-数据迁移","children":[{"level":3,"title":"迁移用户数据","slug":"迁移用户数据","link":"#迁移用户数据","children":[]},{"level":3,"title":"迁移大数据","slug":"迁移大数据","link":"#迁移大数据","children":[]}]},{"level":2,"title":"🎮 实战案例：视频播放器流转","slug":"🎮-实战案例-视频播放器流转","link":"#🎮-实战案例-视频播放器流转","children":[]},{"level":2,"title":"💡 最佳实践","slug":"💡-最佳实践","link":"#💡-最佳实践","children":[{"level":3,"title":"1. 只迁移必要数据","slug":"_1-只迁移必要数据","link":"#_1-只迁移必要数据","children":[]},{"level":3,"title":"2. 使用分布式存储","slug":"_2-使用分布式存储","link":"#_2-使用分布式存储","children":[]},{"level":3,"title":"3. 处理迁移失败","slug":"_3-处理迁移失败","link":"#_3-处理迁移失败","children":[]}]},{"level":2,"title":"📚 参考资源","slug":"📚-参考资源","link":"#📚-参考资源","children":[]}],"git":{"createdTime":1761123387000,"updatedTime":1761123387000,"contributors":[{"name":"YIXUAN","email":"byyi.xuan@outlook.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/10-distributed-next/02-跨设备流转.md"}');export{y as comp,h as data};
