import{_ as t,c as e,d as l,e as s,f as a,b as i,w as c,r as o,o as u}from"./app-DeqJ5waz.js";const r={};function d(k,n){const p=o("RouteLink");return u(),e("div",null,[n[3]||(n[3]=l(`<h1 id="命名实体识别" tabindex="-1"><a class="header-anchor" href="#命名实体识别"><span>命名实体识别</span></a></h1><blockquote><p>掌握命名实体识别技术</p></blockquote><h2 id="📚-学习目标" tabindex="-1"><a class="header-anchor" href="#📚-学习目标"><span>📚 学习目标</span></a></h2><ul><li>理解NER任务</li><li>掌握规则方法</li><li>学会使用预训练模型</li><li>了解实体抽取应用</li></ul><h2 id="_1-使用-spacy" tabindex="-1"><a class="header-anchor" href="#_1-使用-spacy"><span>1. 使用 spaCy</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> spacy</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 加载中文模型</span></span>
<span class="line">nlp <span class="token operator">=</span> spacy<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;zh_core_web_sm&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">text <span class="token operator">=</span> <span class="token string">&quot;苹果公司的CEO库克访问了中国北京&quot;</span></span>
<span class="line">doc <span class="token operator">=</span> nlp<span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 提取实体</span></span>
<span class="line"><span class="token keyword">for</span> ent <span class="token keyword">in</span> doc<span class="token punctuation">.</span>ents<span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>ent<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">\\t</span><span class="token interpolation"><span class="token punctuation">{</span>ent<span class="token punctuation">.</span>label_<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 输出:</span></span>
<span class="line"><span class="token comment"># 苹果公司    ORG</span></span>
<span class="line"><span class="token comment"># 库克        PERSON</span></span>
<span class="line"><span class="token comment"># 中国        GPE</span></span>
<span class="line"><span class="token comment"># 北京        GPE</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-使用-hanlp" tabindex="-1"><a class="header-anchor" href="#_2-使用-hanlp"><span>2. 使用 HanLP</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> hanlp</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 加载模型</span></span>
<span class="line">ner <span class="token operator">=</span> hanlp<span class="token punctuation">.</span>load<span class="token punctuation">(</span>hanlp<span class="token punctuation">.</span>pretrained<span class="token punctuation">.</span>ner<span class="token punctuation">.</span>MSRA_NER_BERT_BASE_ZH<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">text <span class="token operator">=</span> <span class="token string">&quot;2020年1月1日，张三在北京大学读书&quot;</span></span>
<span class="line">result <span class="token operator">=</span> ner<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># [(&#39;2020年1月1日&#39;, &#39;TIME&#39;), (&#39;张三&#39;, &#39;PERSON&#39;), (&#39;北京大学&#39;, &#39;ORG&#39;)]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-规则方法" tabindex="-1"><a class="header-anchor" href="#_3-规则方法"><span>3. 规则方法</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> re</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">extract_entities</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 提取日期</span></span>
<span class="line">    dates <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r&#39;\\d{4}年\\d{1,2}月\\d{1,2}日&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 提取金额</span></span>
<span class="line">    money <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r&#39;\\d+(\\.\\d+)?元&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 提取邮箱</span></span>
<span class="line">    emails <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r&#39;\\S+@\\S+&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 提取电话</span></span>
<span class="line">    phones <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r&#39;1[3-9]\\d{9}&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&#39;dates&#39;</span><span class="token punctuation">:</span> dates<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;money&#39;</span><span class="token punctuation">:</span> money<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;emails&#39;</span><span class="token punctuation">:</span> emails<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;phones&#39;</span><span class="token punctuation">:</span> phones</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">text <span class="token operator">=</span> <span class="token string">&quot;2024年1月1日，价格为100元，联系方式：test@example.com&quot;</span></span>
<span class="line">entities <span class="token operator">=</span> extract_entities<span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>entities<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-实体关系抽取" tabindex="-1"><a class="header-anchor" href="#_4-实体关系抽取"><span>4. 实体关系抽取</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># 使用模式匹配</span></span>
<span class="line"><span class="token keyword">import</span> spacy</span>
<span class="line"><span class="token keyword">from</span> spacy<span class="token punctuation">.</span>matcher <span class="token keyword">import</span> Matcher</span>
<span class="line"></span>
<span class="line">nlp <span class="token operator">=</span> spacy<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;zh_core_web_sm&quot;</span><span class="token punctuation">)</span></span>
<span class="line">matcher <span class="token operator">=</span> Matcher<span class="token punctuation">(</span>nlp<span class="token punctuation">.</span>vocab<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 定义模式: 人名 + 是 + 组织 + 的 + 职位</span></span>
<span class="line">pattern <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;POS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PROPN&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment"># 人名</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;ORTH&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;是&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;POS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PROPN&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment"># 组织</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;ORTH&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;的&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;POS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;NOUN&quot;</span><span class="token punctuation">}</span>    <span class="token comment"># 职位</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line">matcher<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">&quot;POSITION&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pattern<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">text <span class="token operator">=</span> <span class="token string">&quot;张三是阿里巴巴的工程师&quot;</span></span>
<span class="line">doc <span class="token operator">=</span> nlp<span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line">matches <span class="token operator">=</span> matcher<span class="token punctuation">(</span>doc<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> match_id<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token keyword">in</span> matches<span class="token punctuation">:</span></span>
<span class="line">    span <span class="token operator">=</span> doc<span class="token punctuation">[</span>start<span class="token punctuation">:</span>end<span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;匹配: </span><span class="token interpolation"><span class="token punctuation">{</span>span<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>`,13)),s("p",null,[n[1]||(n[1]=s("strong",null,"下一节：",-1)),n[2]||(n[2]=a()),i(p,{to:"/tutorials/python-ai/nlp/08-%E6%96%87%E6%9C%AC%E7%9B%B8%E4%BC%BC%E5%BA%A6.html"},{default:c(()=>[...n[0]||(n[0]=[a("文本相似度",-1)])]),_:1})])])}const v=t(r,[["render",d]]),b=JSON.parse('{"path":"/tutorials/python-ai/nlp/07-mingmingshitishibie.html","title":"命名实体识别","lang":"zh-CN","frontmatter":{"title":"命名实体识别"},"headers":[{"level":2,"title":"📚 学习目标","slug":"📚-学习目标","link":"#📚-学习目标","children":[]},{"level":2,"title":"1. 使用 spaCy","slug":"_1-使用-spacy","link":"#_1-使用-spacy","children":[]},{"level":2,"title":"2. 使用 HanLP","slug":"_2-使用-hanlp","link":"#_2-使用-hanlp","children":[]},{"level":2,"title":"3. 规则方法","slug":"_3-规则方法","link":"#_3-规则方法","children":[]},{"level":2,"title":"4. 实体关系抽取","slug":"_4-实体关系抽取","link":"#_4-实体关系抽取","children":[]}],"git":{"createdTime":1761052725000,"updatedTime":1761052725000,"contributors":[{"name":"YIXUAN","email":"byyi.xuan@outlook.com","commits":1}]},"filePathRelative":"tutorials/python-ai/nlp/07-命名实体识别.md"}');export{v as comp,b as data};
