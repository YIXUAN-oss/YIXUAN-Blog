import{_ as s,c as a,d as e,o as l}from"./app-I6OnLCmc.js";const t={};function p(i,n){return l(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="config配置中心" tabindex="-1"><a class="header-anchor" href="#config配置中心"><span>Config配置中心</span></a></h1><h2 id="一、配置中心概述" tabindex="-1"><a class="header-anchor" href="#一、配置中心概述"><span>一、配置中心概述</span></a></h2><h3 id="_1-1-为什么需要配置中心" tabindex="-1"><a class="header-anchor" href="#_1-1-为什么需要配置中心"><span>1.1 为什么需要配置中心？</span></a></h3><p><strong>传统方式：</strong></p><ul><li>配置写在 application.yml</li><li>修改配置需要重启</li><li>多环境配置管理困难</li></ul><p><strong>配置中心：</strong></p><ul><li>集中管理配置</li><li>动态刷新配置</li><li>多环境配置</li></ul><h3 id="_1-2-config简介" tabindex="-1"><a class="header-anchor" href="#_1-2-config简介"><span>1.2 Config简介</span></a></h3><p><strong>Spring Cloud Config</strong> 提供分布式配置管理功能。</p><p><strong>组件：</strong></p><ul><li><strong>Config Server</strong>：配置服务端</li><li><strong>Config Client</strong>：配置客户端</li></ul><hr><h2 id="二、搭建config-server" tabindex="-1"><a class="header-anchor" href="#二、搭建config-server"><span>二、搭建Config Server</span></a></h2><h3 id="_2-1-创建模块" tabindex="-1"><a class="header-anchor" href="#_2-1-创建模块"><span>2.1 创建模块</span></a></h3><p><strong>pom.xml：</strong></p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-配置文件" tabindex="-1"><a class="header-anchor" href="#_2-2-配置文件"><span>2.2 配置文件</span></a></h3><p><strong>application.yml：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">application</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server</span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">git</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/xxx/config<span class="token punctuation">-</span>repo</span>
<span class="line">          <span class="token key atrule">search-paths</span><span class="token punctuation">:</span> config</span>
<span class="line">          <span class="token key atrule">default-label</span><span class="token punctuation">:</span> main</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-启动类" tabindex="-1"><a class="header-anchor" href="#_2-3-启动类"><span>2.3 启动类</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>
<span class="line"><span class="token annotation punctuation">@EnableConfigServer</span>  <span class="token comment">// 启用 Config Server</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigServerApplication</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="三、配置config-client" tabindex="-1"><a class="header-anchor" href="#三、配置config-client"><span>三、配置Config Client</span></a></h2><h3 id="_3-1-添加依赖" tabindex="-1"><a class="header-anchor" href="#_3-1-添加依赖"><span>3.1 添加依赖</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-配置文件" tabindex="-1"><a class="header-anchor" href="#_3-2-配置文件"><span>3.2 配置文件</span></a></h3><p><strong>bootstrap.yml：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">application</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service</span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8888</span></span>
<span class="line">      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev</span>
<span class="line">      <span class="token key atrule">label</span><span class="token punctuation">:</span> main</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="四、动态刷新" tabindex="-1"><a class="header-anchor" href="#四、动态刷新"><span>四、动态刷新</span></a></h2><h3 id="_4-1-添加依赖" tabindex="-1"><a class="header-anchor" href="#_4-1-添加依赖"><span>4.1 添加依赖</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-配置" tabindex="-1"><a class="header-anchor" href="#_4-2-配置"><span>4.2 配置</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">management</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">web</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">exposure</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">include</span><span class="token punctuation">:</span> refresh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-使用-refreshscope" tabindex="-1"><a class="header-anchor" href="#_4-3-使用-refreshscope"><span>4.3 使用@RefreshScope</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@RestController</span></span>
<span class="line"><span class="token annotation punctuation">@RefreshScope</span>  <span class="token comment">// 支持动态刷新</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigController</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${config.info}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/config&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-手动刷新" tabindex="-1"><a class="header-anchor" href="#_4-4-手动刷新"><span>4.4 手动刷新</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">POST http://localhost:8001/actuator/refresh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="五、总结" tabindex="-1"><a class="header-anchor" href="#五、总结"><span>五、总结</span></a></h2><p>✅ <strong>本章学习内容：</strong></p><ul><li>配置中心概述</li><li>Config Server 搭建</li><li>Config Client 配置</li><li>动态刷新</li></ul><p>✅ <strong>核心要点：</strong></p><ul><li>集中管理配置</li><li>支持动态刷新</li><li>支持多环境</li></ul><p><strong>下一章预告：</strong> 我们将学习 Nacos 注册配置中心。</p>`,45)])])}const o=s(t,[["render",p]]),r=JSON.parse('{"path":"/tutorials/java-backend/springcloud/6.Configpeizhizhongxin.html","title":"Config配置中心","lang":"zh-CN","frontmatter":{"title":"Config配置中心"},"headers":[{"level":2,"title":"一、配置中心概述","slug":"一、配置中心概述","link":"#一、配置中心概述","children":[{"level":3,"title":"1.1 为什么需要配置中心？","slug":"_1-1-为什么需要配置中心","link":"#_1-1-为什么需要配置中心","children":[]},{"level":3,"title":"1.2 Config简介","slug":"_1-2-config简介","link":"#_1-2-config简介","children":[]}]},{"level":2,"title":"二、搭建Config Server","slug":"二、搭建config-server","link":"#二、搭建config-server","children":[{"level":3,"title":"2.1 创建模块","slug":"_2-1-创建模块","link":"#_2-1-创建模块","children":[]},{"level":3,"title":"2.2 配置文件","slug":"_2-2-配置文件","link":"#_2-2-配置文件","children":[]},{"level":3,"title":"2.3 启动类","slug":"_2-3-启动类","link":"#_2-3-启动类","children":[]}]},{"level":2,"title":"三、配置Config Client","slug":"三、配置config-client","link":"#三、配置config-client","children":[{"level":3,"title":"3.1 添加依赖","slug":"_3-1-添加依赖","link":"#_3-1-添加依赖","children":[]},{"level":3,"title":"3.2 配置文件","slug":"_3-2-配置文件","link":"#_3-2-配置文件","children":[]}]},{"level":2,"title":"四、动态刷新","slug":"四、动态刷新","link":"#四、动态刷新","children":[{"level":3,"title":"4.1 添加依赖","slug":"_4-1-添加依赖","link":"#_4-1-添加依赖","children":[]},{"level":3,"title":"4.2 配置","slug":"_4-2-配置","link":"#_4-2-配置","children":[]},{"level":3,"title":"4.3 使用@RefreshScope","slug":"_4-3-使用-refreshscope","link":"#_4-3-使用-refreshscope","children":[]},{"level":3,"title":"4.4 手动刷新","slug":"_4-4-手动刷新","link":"#_4-4-手动刷新","children":[]}]},{"level":2,"title":"五、总结","slug":"五、总结","link":"#五、总结","children":[]}],"git":{"createdTime":1760959407000,"updatedTime":1760959407000,"contributors":[{"name":"YIXUAN","email":"byyi.xuan@outlook.com","commits":1}]},"filePathRelative":"tutorials/java-backend/springcloud/6.Config配置中心.md"}');export{o as comp,r as data};
